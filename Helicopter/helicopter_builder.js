(()=>{"use strict";var t,e,s={},i={};function a(t){var e=i[t];if(void 0!==e)return e.exports;var n=i[t]={exports:{}};return s[t](n,n.exports,a),n.exports}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(s,i){if(1&i&&(s=this(s)),8&i)return s;if("object"==typeof s&&s){if(4&i&&s.__esModule)return s;if(16&i&&"function"==typeof s.then)return s}var n=Object.create(null);a.r(n);var r={};t=t||[null,e({}),e([]),e(e)];for(var o=2&i&&s;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((t=>r[t]=()=>s[t]));return r.default=()=>s,a.d(n,r),n},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};class n{}var r=0;function o(t,e,s){const i=new Blob([t],{type:s}),a=document.createElement("a"),n=URL.createObjectURL(i);a.href=n,a.download=e,document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(n)}),0)}function l(){return"internal_id_"+(++r).toString()}function h(t){const e={div0:document.createElement("DIV"),div1:document.createElement("DIV"),div2:document.createElement("DIV")};return e.div0.classList.add("flex-container-o"),e.div1.classList.add("flex-container-i"),e.div2.classList.add("flex-container-i"),e.div0.appendChild(e.div1),e.div0.appendChild(e.div2),t.appendChild(e.div0),e}function c(t,e){const s=document.createElement("TH");return s.innerHTML=e,t.appendChild(s),s}function u(t,e,s,i=!0){const a=document.createElement("SPAN"),n=document.createElement("LABEL");e.id=l(),n.htmlFor=e.id,n.style.marginLeft="0.25em",n.style.marginRight="0.5em",n.textContent=t,e.setAttribute("type","number"),e.min="0",e.step="1",e.valueAsNumber=0,a.appendChild(n),a.appendChild(e),s.appendChild(a),i&&s.appendChild(document.createElement("BR"))}function _(t,e,s){const i=document.createElement("LABEL");return e.id=l(),i.htmlFor=e.id,i.style.marginLeft="0.25em",i.style.marginRight="0.5em",i.textContent=t,e.setAttribute("type","number"),e.min="0",e.step="1",e.valueAsNumber=0,i.classList.add("flex-item"),e.classList.add("flex-item"),s.div1.appendChild(i),s.div2.appendChild(e),[i,e]}function m(t,e,s){const i=document.createElement("LABEL");return e.id=l(),i.htmlFor=e.id,i.style.marginLeft="0.25em",i.style.marginRight="0.5em",i.textContent=t,i.classList.add("flex-item"),e.classList.add("flex-item"),s.div1.appendChild(i),s.div2.appendChild(e),[i,e]}function p(t,e,s){const i=document.createElement("LABEL");return e.id=l(),i.htmlFor=e.id,i.style.marginLeft="0.25em",i.style.marginRight="0.5em",i.textContent=t,i.classList.add("flex-item"),e.classList.add("flex-item"),s.div1.appendChild(i),s.div2.appendChild(e),[i,e]}function d(t,e,s,i=!0){const a=document.createElement("SPAN"),n=document.createElement("LABEL");e.id=l(),n.htmlFor=e.id,n.style.marginLeft="0.25em",n.style.marginRight="0.5em",n.textContent=t,e.setAttribute("type","checkbox"),a.appendChild(n),a.appendChild(e),s.appendChild(a),i&&s.appendChild(document.createElement("BR"))}function g(t,e,s,i=!0){const a=document.createElement("SPAN"),n=document.createElement("LABEL");e.hidden=!0,e.id=l(),e.textContent=t,n.htmlFor=e.id,n.style.marginLeft="0.25em",n.style.marginRight="0.5em",n.textContent=t,n.classList.add("lbl_action"),n.classList.add("btn_th"),a.appendChild(n),a.appendChild(e),s.appendChild(a),i&&(s.appendChild(document.createElement("BR")),s.appendChild(document.createElement("BR")))}function f(t,e,s){const i=document.createElement("LABEL");e.id=l(),i.htmlFor=e.id,i.id=l(),i.style.marginLeft="0.25em",i.style.marginRight="0.5em",i.textContent=t,e.setAttribute("type","checkbox"),i.classList.add("flex-item"),e.classList.add("flex-item"),s.div1.appendChild(i);const a=document.createElement("LABEL"),n=document.createElement("SPAN");return n.appendChild(a),n.appendChild(e),s.div2.appendChild(n),i}function y(t,e){const s=document.createElement("LABEL");return s.style.marginLeft="0.25em",s.style.marginRight="0.5em",s.textContent=t,s.classList.add("flex-item"),e.appendChild(s),s}function b(t,e,s){const i=document.createElement("LABEL");i.style.marginLeft="0.25em",i.style.marginRight="0.5em",i.textContent=t,i.classList.add("flex-item"),s.div1.appendChild(i);const a=document.createElement("LABEL");return a.style.marginLeft="0.25em",a.style.marginRight="0.5em",a.textContent=e,a.classList.add("flex-item"),s.div2.appendChild(a),[i,a]}function S(t){const e=document.createElement("LABEL");e.textContent=" ",e.classList.add("flex-item"),t.div1.appendChild(e);const s=document.createElement("LABEL");s.textContent=" ",s.classList.add("flex-item"),t.div2.appendChild(s)}function w(t){const e=document.createElement("TR");return t.append(e),e}function C(t){const e=document.createElement("TD");return t.append(e),e}function G(t){t.classList.toggle("changed_b",!1),t.classList.toggle("changed_g",!1),t.classList.toggle("changed_n",!1),t.offsetHeight,t.classList.toggle("changed_b")}var v=!1;function E(t,e,s=null){if(v)if(t.textContent!=e)if(null==s)!function(t){t.classList.toggle("changed_b",!1),t.classList.toggle("changed_g",!1),t.classList.toggle("changed_n",!1),t.offsetHeight,t.classList.toggle("changed_n")}(t);else{const i=parseInt(t.textContent)<parseInt(e);s&&i||!s&&!i?function(t){t.classList.toggle("changed_b",!1),t.classList.toggle("changed_g",!1),t.classList.toggle("changed_n",!1),t.offsetHeight,t.classList.toggle("changed_g")}(t):G(t)}else!function(t){t.classList.toggle("changed_b",!1),t.classList.toggle("changed_g",!1),t.classList.toggle("changed_n",!1)}(t);t.textContent=e}const P=(t,e)=>{var s=document.getElementById(t);s.classList.toggle("active",e);var i=s.nextElementSibling;(i=i.nextElementSibling).style.maxHeight=e?"inherit":"0px"};class R{static IsNullOrWhiteSpace(t){try{return null==t||"undefined"==t||t.toString().replace(/\s/g,"").length<1}catch(t){return console.log(t),!1}}static Join(t,...e){try{const s=e[0];if(Array.isArray(s)||s instanceof Array){let e=R.Empty;for(let i=0;i<s.length;i++){const a=s[i];i<s.length-1?e+=a+t:e+=a}return e}if("object"==typeof s){let e=R.Empty;const i=s;return Object.keys(s).forEach((s=>{e+=i[s]+t})),e=e.slice(0,e.length-t.length),e}const i=e;return R.join(t,...i)}catch(t){return console.log(t),R.Empty}}static Format(t,...e){try{return t.match(R.regexNumber)?R.format(R.regexNumber,t,e):t.match(R.regexObject)?R.format(R.regexObject,t,e,!0):t}catch(t){return console.log(t),R.Empty}}static format(t,e,s,i=!1){return e.replace(t,(function(t,e){const a=t.split(":");let n;return a.length>1&&(e=a[0].replace("{",""),t=a[1].replace("}","")),n=i?s[0][e]:s[e],null==n||null==n||t.match(/{\d+}/)?n:(n=R.parsePattern(t,n),void 0!==n&&null!=n?n:R.Empty)}))}static parsePattern(t,e){switch(t){case"L":return e.toLocaleLowerCase();case"U":return e.toLocaleUpperCase();case"d":if("string"==typeof e)return R.getDisplayDateFromString(e);if(e instanceof Date)return R.Format("{0:00}.{1:00}.{2:0000}",e.getDate(),e.getMonth(),e.getFullYear());break;case"s":if("string"==typeof e)return R.getSortableDateFromString(e);if(e instanceof Date)return R.Format("{0:0000}-{1:00}-{2:00}",e.getFullYear(),e.getMonth(),e.getDate());break;case"n":{"string"!=typeof e&&(e=e.toString());const t=e.replace(/,/g,".");if(isNaN(parseFloat(t))||t.length<=3)break;const s=t.split(/[^0-9]+/g);let i=s;s.length>1&&(i=[R.join("",...s.splice(0,s.length-1)),s[s.length-1]]);const a=i[0],n=a.length%3;let r=n>0?a.substring(0,n):R.Empty;const o=a.substring(n).match(/.{3}/g);return r=r+"."+R.Join(".",o),r+(i.length>1?","+i[1]:"")}case"x":return this.decimalToHexString(e);case"X":return this.decimalToHexString(e,!0)}return"number"!=typeof e&&isNaN(e)||isNaN(+t)||R.IsNullOrWhiteSpace(e)?e:R.formatNumber(e,t)}static decimalToHexString(t,e=!1){const s=parseFloat(t).toString(16);return e?s.toLocaleUpperCase():s}static getDisplayDateFromString(t){const e=t.split("-");if(e.length<=1)return t;let s=e[e.length-1];const i=e[e.length-2],a=e[e.length-3];return s=s.split("T")[0],s=s.split(" ")[0],`${s}.${i}.${a}`}static getSortableDateFromString(t){const e=t.replace(",","").split(".");if(e.length<=1)return t;const s=e[e.length-1].split(" ");let i=R.Empty;s.length>1&&(i=s[s.length-1]);let a=`${e[e.length-1].split(" ")[0]}-${e[e.length-2]}-${e[e.length-3]}`;return!R.IsNullOrWhiteSpace(i)&&i.length>1?a+=`T${i}`:a+="T00:00:00",a}static formatNumber(t,e){const s=e.length,i=t.toString();if(s<=i.length)return i;let a=s-i.length;return a+=1,new Array(a).join("0")+i}static join(t,...e){let s=R.Empty;for(let i=0;i<e.length;i++)if(!("string"==typeof e[i]&&R.IsNullOrWhiteSpace(e[i])||"number"!=typeof e[i]&&"string"!=typeof e[i])){s+=""+e[i];for(let a=i+1;a<e.length;a++)if(!R.IsNullOrWhiteSpace(e[a])){s+=t,i=a-1;break}}return s}}R.regexNumber=/{(\d+(:\w*)?)}/g,R.regexObject=/{(\w+(:\w*)?)}/g,R.Empty="";const x=JSON.parse('{"languages":["en"],"en":{"Language":"English","Pioneer":"Pioneer","WWI":"WWI","Roaring 20s":"Roaring 20s","Coming Storm":"Coming Storm","WWII":"WWII","Last Hurrah":"Last Hurrah","Open":"Open","Windscreen":"Windscreen","Sealed":"Sealed","Sealed Warning":"This crewmember cannot see outside.","Narrow Canopy":"Narrow Canopy","Bubble Canopy":"Bubble Canopy","Co-Pilot Controls":"Co-Pilot Controls","Co-Pilot Warning":"Maximum stress reduction of {0}.","Bombadier Controls":"Bombardier Controls","Bombadier Controls Warning":"This seat has controls.","Escape Hatch":"Escape Hatch","Ejection Seat":"Ejection Seat","Connectivity":"Connectivity","Oxygen Mask":"Oxygen Mask","Oxygen Mask Warning":"The pilot ignores the effects of high altitude and negates up to 2 G-Penalty.","Isolated":"Isolated","Isolated Warning":"Position takes double Injury when you Go Down.","Padding":"Padding","Injury Reduction Warning":"Negates 1 Injury for this position when you Go Down","Harness":"Harness","Fast Release System":"Fast Release System","Roll Bar":"Roll Bar","Flare Slot":"Flare Slot","Flare Slot Warning":"Allows flares to be fired out of a closed cockpit without opening the cockpit.","X1 Collimated Gunsight":"X1 Collimated Gunsight","Telescopic Gunsight":"Telescopic Gunsight","Illuminated Reflex Sight":"Illuminated Reflex Sight","Gyro Gunsight":"Gyro Gunsight","X1 Collimated Gunsight Warning":"+1 to Open Fire.","Telescopic Gunsight Warning":"+2 to Open Fire if you Drew a Bead.","Illuminated Reflex Sight Warning":"+2 to Open Fire.","Gyro Gunsight Warning":"+2 to Open Fire and additional +2 if you Draw a Bead.","Bombsight":"Bombsight","Bombsight Warning 1":"Subtract ","Bombsight Warning 2":" from your Altitude when rolling for bombing.","Pulsejets":"Pulsejets","Pulsejet Boost Warning":"Pulsejets double Boost when above dropoff speed, instead of below dropoff.","Turbine":"Turbine","Turbine Boost Warning":"Turbines ignore dropoff speed, providing constant Boost at all speeds.","Rotary":"Rotary","Rotary Right Warning":"+1 to Dogfight! when turning right.","Rotary Left Warning":"+1 to Dogfight! when turning left.","Tractor":"Tractor","Center-Mounted Tractor":"Center-Mounted Tractor","Rear-Mounted Pusher":"Rear-Mounted Pusher","Center-Mounted Pusher":"Center-Mounted Pusher","Pod":"Pod","Nacelle (Inside)":"Nacelle (Inside)","Nacelle (Offset)":"Nacelle (Offset)","Channel Tractor":"Channel Tractor","Fuselage Push-Pull":"Fuselage Push-Pull","Front Intake":"Front Intake","Wing Pod":"Wing Pod","Underwing Pod":"Underwing Pod","Forward Internal":"Forward Internal","Center Internal":"Center Internal","Rear Internal":"Rear Internal","Center Pod":"Center Pod","Rear Pod":"Rear Pod","Not Allowed":"Not Allowed","Panel":"Panel","Box":"Box","Intake":"Intake","Evaporation":"Evaporation","Evaporation Warning":"Attacks with a Crit rolls of 16+ will knock out the radiator, in addition to normal effects.","Low":"Low Radiator","Low Warning":"Force Cool Off when shot.","Inline":"Inline Radiator","High":"High Radiator","High Warning":"Bonus persists for 1 Cool Off after being shot. If the plane is an open cockpit, will spray the pilot with the radiator fluid!","High Offset":"High Offset Radiator","High Offset Warning":"Bonus persists for 1 Cool Off after being shot.","Water":"Water","Salt Water":"Salt Water","Mineral Oil":"Mineral Oil","Mineral Oil Warning":"Absorbs 1 Miss per Cool Off.","Castor Oil":"Castor Oil","Castor Oil Warning":"Absorbs 1 Miss per Cool Off. +2 Stress if leaking.","Glycol":"Glycol","Freon":"Freon","Freon Warning":"Take 1 Power Reduction while RPM is below 4.","Ammonia":"Ammonia","Ammonia Warning":"Take 1 Power Reduction while RPM is below 4. Causes 2 Injury when leaking.","No Cowling":"No Cowling","Basic Cowl":"Basic Cowl","Rotary Basic Cowl":"Rotary Basic Cowl","Closed Cowl":"Closed Cowl","Adjustable Slat Cowl":"Adjustable Slat Cowl","Foil Cowl":"Airfoil Cowl","Sealed Cowl":"Sealed Cowl","Radiator Fluid":"Radiator Fluid","Radiator Fluid Warning":"Radiator Fluid is Flammable.","Manually Variable Propeller":"Manually Variable Propeller","MVP_Warning":"Allows blade pitch to be adjusted on the ground without replacing it.","High Power":"High Power","Power":"Power","Default":"Default","Speed":"Speed","High Speed":"High Speed","Automatic Pitch":"Automatic Pitch","Manually Adjustable Pitch":"Manually Adjustable Pitch","Single Rotor":"Single Rotor","Coaxial":"Coaxial","Synchropter":"Synchropter","Transverse":"Transverse","Tandem Transverse":"Tandem Transverse","Wooden Spars":"Wooden Spars","Steel Spars":"Steel Spars","Aluminum Spars":"Aluminum Spars","Wooden Ribs":"Wooden Ribs","Steel Ribs":"Steel Ribs","Aluminum Ribs":"Aluminum Ribs","Titanium":"Titanium","Living Grove":"Living Grove","Living Grove Warning":"Free Repairs for Living Grove sections.","Naked":"Naked","Cloth Canvas":"Cloth Canvas","Transparent Celluloid":"Transparent Celluloid","Treated Paper":"Treated Paper","Tense Silk":"Tense Silk","Dragon Skin":"Dragon Skin","Molded Plywood":"Molded Plywood","Clinker Build":"Clinker Build","Glass Reinforced Plastic":"Glass Reinforced Plastic","Corrugated Duralumin":"Corrugated Duralumin","Steel Sheet":"Steel Sheet","Aluminum Sheet":"Aluminum Sheet","Tailless":"Tailless","Stubby":"Stubby","Standard":"Standard","Long":"Long","Wing Deck Parasol":"Parasol","Wing Deck Shoulder":"Shoulder","Wing Deck Mid":"Mid","Wing Deck Low":"Low","Wing Deck Gear":"Gear","Tense Silk Layers":"Tense Silk Layers","Plywood":"Plywood","Corrugated Steel":"Corrugated Steel","Thin Sheet Steel":"Thin Sheet Steel","Grand Eagle Feather":"Grand Eagle Feather","Solar Fiber":"Solar Fiber","Monoplane":"Monoplane","Tandem":"Tandem","Extreme Positive":"Extreme Positive","Positive":"Positive","Unstaggered":"Unstaggered","Negative":"Negative","Extreme Negative":"Extreme Negative","Tailplane":"Tailplane","The Wings":"The Wings","Canards":"Canards","Outboard":"Outboard","V-Tail":"V-Tail","T-Tail":"T-Tail","T-Tail Warning":"In the event of a spin/stall while above stall speed and under power, you are at a Disadvantage to recover.","Tailfin":"Tailfin","The Rotors":"The Rotors","Wing Warping":"Wing Warping","Cantilever Wing Warping":"Cantilever Wing Warping","Wing Warping Warning":"Wing Warping with a Boom Tail causes a stability penalty.","Flap Ailerons":"Flap Ailerons","Wing Warping Warning 2":"Get +1 to Dogfight! at below 15 speed.","Spoilerons":"Spoilerons","Spoilerons Warning":"When you roll Dogfight!, take +1, but then reduce your speed as if your Speed Factor was doubled.","None":"None","Flap Rudder":"Flap Rudder","Flying Rudder":"Flying Rudder","Flap Elevator":"Flap Elevator","Flying Elevator":"Flying Elevator","Basic Flaps":"Basic Flaps","Advanced Flaps":"Advanced Flaps","Control Flaps":"Control Flaps","Lift Dumpers":"Lift Dumpers","Lift Dumpers Warning":"Activate for +1 to Dogfight!, then immediately induce a stall.","Fixed Slots":"Fixed Slots","Automatic Slats":"Automatic Slats","Air Brake":"Air Brake","Air Brake Warning":"When deployed, immediately bleed of speed equal to Speed Factor and gain +1 to Dogfight!.","Dive Brake":"Dive Brake","Dive Brake Warning":"When deployed, steep dives trade altitude for speed at 1-2 instead of 1-3.","Drogue Chute":"Drogue Chute","Drogue Chute Warning":"Activate once per flight to: Give +3 to Go Down or take down a close pursuer.","Wing Blades":"Wing Blades","Wing Blades Warning":"Roll Dogfight! to use. 16+, enemy takes damage as per collision, user takes 1d10. 20+, user takes no damage. When used on a PC, use Evade Danger and Collision instead.","Parallel Struts":"Parallel Struts","N-Strut":"N-Strut","V-Strut":"V-Strut","I-Strut":"I-Strut","W-Strut":"W-Strut","Single Strut":"Single Strut","Star Strut":"Star Strut","Wing Truss":"Wing Truss","Wire Root":"Wire Root","Steel Parallel Struts":"Steel Parallel Struts","Steel N-Strut":"Steel N-Strut","Steel V-Strut":"Steel V-Strut","Steel I-Strut":"Steel I-Strut","Steel W-Strut":"Steel W-Strut","Steel Single Strut":"Steel Single Strut","Steel Star Strut":"Steel Star Strut","Steel Wing Truss":"Steel Wing Truss","Steel Wire Root":"Steel Wire Root","Birch":"Birch","Duralumin":"Duralumin","Steel":"Steel","Aluminium":"Aluminium","Whalebone":"Whalebone","Self-Sealing Gas Tank":"Self-Sealing Gas Tank","Self-Sealing Gas Tank Warning":"Fuel leak penalty will apply only to the next Fuel Check.","Remote Fire Extinguisher":"Remote Fire Extinguisher","Remote Fire Extinguisher Warning":"Spend to put out a fire.","Internal Fuselage Tank":"Internal Fuselage Tank","External Wing Tank":"External Wing Tank","Internal Wing Tank":"Internal Wing Tank","Microtank":"Microtank","Tiny":"Tiny Cargo","Small":"Small Cargo","Medium":"Medium Cargo","Large":"Large Cargo","Huge":"Huge Cargo","Retractable Gear + Boat Hull":"Retractable Gear + Boat Hull","Retractable ":"Retractable ","Landing Gear":"Landing Gear","Floats":"Floats","Hybrid Floats":"Hybrid Floats","Boat Hull":"Boat Hull","Landing Skid":"Landing Skid","Landing Skid Warning":"All landings are crash landings.","Zeppelin Hook":"Zeppelin Hook","Zeppelin Hook Warning":"Allows landing inside airships or large planes.","Carrier Hook":"Carrier Hook","Carrier Hook Warning":"Allows landing on carriers.","Underwing Skid":"Underwing Skid","Windmill":"Windmill","Windmill Warning":"Generates 1 charge per 10 speed.","Ram Air Scoop":"Ram Air Scoop","Battery":"Battery","Battery Warning":"Stores 5 charges each.","Battery (High Quality)":"Battery (High Quality)","Loud Yelling":"Loud Yelling","Intercom System":"Intercom System","Radio Receiver":"Radio Receiver","Radio Transmitter":"Radio Transmitter","Radio Transceiver":"Radio Transceiver","Whalebone Radio Receiver":"Whalebone Radio Receiver","Whalebone Radio Base Station":"Whalebone Radio Base Station","Radio Receiver (High Quality)":"Radio Receiver (High Quality)","Radio Transmitter (High Quality)":"Radio Transmitter (High Quality)","Radio Transceiver (High Quality)":"Radio Transceiver (High Quality)","Whalebone Radio Base Station (High Quality)":"Whalebone Radio Base Station (High Quality)","Small Reconnaissance Camera":"Small Recon Camera","Internal Small Reconnaissance Camera":"Internal Small Recon Camera","Small Reconnaissance Camera Warning":"Can take pictures from a height of 2 AF or lower.","Medium Reconnaissance Camera":"Medium Recon Camera","Internal Medium Reconnaissance Camera":"Internal Medium Recon Camera","Medium Reconnaissance Camera Warning":"Can take pictures from a height of 4 AF or lower.","Large Reconnaissance Camera":"Large Recon Camera","Internal Large Reconnaissance Camera":"Internal Large Recon Camera","Large Reconnaissance Camera Warning":"Can take pictures from any height.","Guncam":"Guncam","Guncam Warning":"Confirms your kills for you.","Wing Cutouts":"Wing Cutouts","Hull Cutouts":"Hull Cutouts","Searchlight":"Searchlight","Electric Heating":"Electric Heating","Radiator Loop":"Radiator Loop","Basic Fan":"Basic Fan","Basic Fan Warning":"Has a Basic Fan.","Air Conditioning":"Air Conditioning","Gyroscopic":"Gyroscopic Autopilot","Gyroscopic Warning":"Gives +4 to Empty Seat rolls.","Altitude Holding":"Altitude Holding","Altitude Holding Warning":"Allows the Empty Seat rule to be ignored.","Clockwork Programmable":"Clockwork Programmable","Clockwork Programmable Warning":"Can do anything but Dogfight!, fire weapons, drop bombs, or make landings. For Himmilgard only.","Programmable":"Programmable","Programmable Warning":"Can do anything but Dogfight!, fire weapons, drop bombs, or make landings.","Rattenhirn":"Rattenhirn","Rattenhirn Warning":"Fully automated. For robo-planes.","Control Rods":"Control Rods","Hydraulic-Assisted":"Hydraulic-Assisted","Fly by Wire":"Fly by Wire","Armour":"Armour","Forward":"Forward","Rearward":"Rearward","Up":"Up","Down":"Down","Left":"Left","Right":"Right","Interruptor Gear":"Interruptor Gear","Synchronization Gear":"Synchronization Gear","Spinner Gun":"Spinner Gun","Deflector Plate":"Deflector Plate","No Interference":"No Interference","Standard Action":"Standard Action","Mechanical Action":"Mechanical Action","Gast Principle":"Gast Principle","Rotary_Gun":"Rotary","Heat Ray":"Heat Ray","Gyrojets":"Gyrojets","Pneumatic":"Pneumatic","Himmilgard":"Himmilgard","Mechanical Action Warning":"For each RPM past the first, use +1 Ammo and roll +1d10. Keep the two highest.  Advantage/Disadvantage is +/- 1d10.  Take 1 Wear per 1 rolled.  Weapon unusable if engine dies.","Heat Ray Warning":"Roll Crits +Damage done. On Crit, choose one: start a fire, destroy a radiator/oil component and push Cool Off, or injure crew. Take -2 forward to Eyeball after firing.","Gyrojets Warning":"+1 Damage and +1 AP for each Range Band (actual, not adjusted by attacks) past Knife.","Pneumatic Warning 1":"Weapon \'jams\' after rapid fire as the compressor refills.","Pneumatic Warning 2":"Locked to \'Edged\' Ammo: On Ammo Crit, attack deals double damage. All-metal planes cannot suffer Ammo Crits.","Deflection Warning":"Take {0} to attack on a deflection shot.","Deflector Plate Warning":"Deflector Plates inflict 1 Wear every time you roll a natural 5 or less on the first Crit die.","No Interference Warning":"Some fuselage guns really don\'t shoot through a propeller, but most do.  Verify with the DM and your common sense before selecting this.","Helicopter Flight":"Helicopter Flight","Helicopter Flight Warning":"A helicopter must have Boost 2 to boost or take off vertically, gaining 1 altitude.","Helicopter Landing":"Helicopter Landing","Helicopter Landing Warning":"A deliberately landed helicopter travelling at 0 speed never has to roll Go Down regardless of how rough the terrain is.","Helicopter Descent":"Helicopter Descent","Helicopter Descent Warning":"A helicopter can descend up to 5 altitude bands in one maneuver without gaining speed.","Helicopter Stall":"Helicopter Stall","Helicopter Stall Warning":"Travelling faster than 37 speed immediately suffers a Retreating Wing Stall.","Rotor Span Warning":"Undersized rotors cause the engine to work harder and reduce reliability.","Autogyro Stall":"Autogyro Stall","Autogyro Stall Warning":"An Autogyro cannot stall, it automatically trades Altitude for speed 1-1.  If it runs out of altitude before regaining control, it lands gently.  If the autogyro exceeds speed 37 or sustains negative Gs it suffers a more traditional stall.","Ornithopter Stall":"Ornithopter Flight","Ornithopter Stall Warning":"In the event that the engine stops, double your Stall Speed and halve your Handling.","Ornithopter Flutterer Attack":"Flutterer Attack","Ornithopter Flutterer Attack Warning":"Take a -3 Penalty to Open Fire when you Boost.","Ornithopter Buzzer Boost":"Buzzer Boost","Ornithopter Buzzer Boost Warning":"Can boost above top speed. Every time you boost, take +2 Energy Loss forward.","Ornithopter Buzzer Stall":"Buzzer Stall","Ornithopter Buzzer Stall Warning":"Can take 1 RPM to avoid a Stall.  Take 1 when you drop below Stall, and 1 every turn you start below Stall.","Rumble Warning":"Rumble requires a minimum structure of Rumble*10 to fly.","Stability Warning":"Stability must be between -10 and +10 to be flyable by a human.","Max Strain Warning":"A Max Strain of less than 10 means the plane falls apart on the ground.","Vital Part Controls":"Controls","Vital Part Aircrew":"Aircrew #{0}","Vital Part Fuel Tanks":"Fuel Tanks","Vital Part Engine":"Engine #{0}","Vital Part Oil Tank":"Oil Tank #{0}","Vital Part Oil Cooler":"Oil Cooler #{0}","Vital Part Oil Pan":"Oil Pan #{0}","Vital Part Engine Pusher":"Engine #{0} Pusher","Vital Part Oil Tank Pusher":"Oil Tank #{0} Pusher","Vital Part Oil Cooler Pusher":"Oil Cooler #{0} Pusher","Vital Part Oil Pan Pusher":"Oil Pan #{0} Pusher","Vital Part Engine Puller":"Engine #{0} Puller","Vital Part Oil Tank Puller":"Oil Tank #{0} Puller","Vital Part Oil Cooler Puller":"Oil Cooler #{0} Puller","Vital Part Oil Pan Puller":"Oil Pan #{0} Puller","Vital Part Radiator":"Radiator #{0}","Vital Part Electrics":"Electrics","Vital Part Weapon Set":"Weapon Set #{0}: {1}s","Vital Part Tail Rotor":"Tail Rotor","Vital Part Landing Gear":"Landing Gear","Catalog Engine":"Engine","Catalog Oil Tank":"Oil Tank","Catalog Oil Cooler":"Oil Cooler","Catalog Oil Pan":"Oil Pan","Catalog Radiator":"Radiator"," Bomb Mass Internally.":"{0} Bomb Mass Internally. "," Bomb Mass Externally.":"{0} Bomb Mass Externally. ","Largest Internal Bomb":"Largest internal bomb is {0} Mass. "," Rocket Mass Internally.":"{0} Rocket Mass Internally. "," Rocket Mass Externally.":"{0} Rocket Mass Externally. ","Pulsejet":"Pulsejet","Starter":"Starter","Turns Right":"Turns Right","Turns Left":"Turns Left","War Emergency Power":"War Emergency Power","War Emergency Power from altitudes 0-9":"War Emergency Power from altitudes 0-9","War Emergency Power Warning":"Take double RPM to exceed Max Speed when Boosting.","Altitude Throttle":"Altitude Throttle","Altitude Throttle Warning":"This engine has the WEP upgrade at Altitudes 0-9.","Fixed":"Fixed","Flexible":"Flexible","Turret":"Turret","Turreted":"Turreted","Weapon Tag: Deflector Plate":"Deflector Plate","Weapon Tag Mechanical Action":"Mechanical Action","Weapon Tag Gast Principle":"Gast Principle","Weapon Tag Rotary":"Rotary","Weapon Tag Heat Ray":"Heat Ray","Weapon Tag Gyrojet":"Gyrojet","Weapon Tag Pneumatic":"Pneumatic","Weapon Tag Reload":"Reload {0}","Weapon Tag Rapid Fire":"Rapid Fire","Weapon Tag Shells":"Shells","Weapon Tag AP":"AP {0}","Weapon Tag Jam":"Jam {0}","Weapon Tag Awkward":"Awkward {0}","Weapon Tag Fully Accessible":"Fully Accessible","Weapon Tag Partly Accessible":"Partly Accessible","Weapon Tag Inaccessible":"Inaccessible","Weapon Tag Manual":"Manual","Stat Lift Bleed":"Lift Bleed","Stat Drag":"Drag","Stat Mass":"Mass","Stat Wet Mass":"Wet Mass","Stat Bomb Mass":"Bomb Mass","Stat Cost":"Cost","Stat Upkeep":"Upkeep","Stat Control":"Control","Stat Pitch Stability":"Pitch Stability","Stat Lateral Stability":"Lateral Stability","Stat Wing Area":"Wing Area","Stat Raw Strain":"Raw Strain","Stat Structure":"Structure","Stat Toughness":"Toughness","Stat Power":"Power","Stat Fuel Consumption":"Fuel Consumption","Stat Fuel":"Fuel","Stat Pitch Speed":"Pitch Speed","Stat Pitch Boost":"Pitch Boost","Stat Charge":"Charge","Stat Crash Safety":"Crash Safety","Stat Max Strain":"Max Strain","Stat Visibility":"Visibility","Stat Reliability":"Reliability","Stat Flight Stress":"Flight Stress","Stat Required Sections":"Required Sections","Stat Escape":"Escape","Stat Altitude":"Altitude","Stat Overspeed":"Overspeed","Stat Cooling":"Cooling","Stat Torque":"Torque","Stat Rumble":"Rumble","Derived Aircraft Name":"Aircraft Name","Derived Era Report":"Era","Derived Mass Variations":"Mass Variations","Derived Boost":"Boost","Derived Handling":"Handling","Derived Rate of Climb":"Rate of Climb","Derived Stall Speed":"Stall Speed","Derived Top Speed":"Top Speed","Derived Vital Components":"Vital Components","Derived Full Fuel with Bombs":"Full Fuel with Bombs","Derived Half Fuel with Bombs":"Half Fuel with Bombs","Derived Full Fuel":"Full Fuel","Derived Half Fuel":"Half Fuel","Derived Empty Fuel":"Empty Fuel","Derived Propulsion":"Propulsion","Derived Aerodynamics":"Aerodynamics","Derived Survivability":"Survivability","Derived Crew Members":"Crew Members","Derived Dropoff":"Dropoff","Derived Stability":"Stability","Derived Crash Safety":"Crash Safety","Derived Crew/Passengers":"Crew/Passengers","Derived Overspeed":"Overspeed","Derived Energy Loss":"Energy Loss","Derived Fuel Uses":"Fuel Uses","Derived Turn Bleed":"Turn Bleed","Derived Turn Bleed wB":"Turn Bleed (with Bombs)","Derived Attack Modifier":"Attack Modifier","Derived Landing Gear":"Landing Gear","Derived Communications":"Communications","Derived Escape":"Escape","Derived Ideal Engine Altitude":"Ideal Altitude","Derived Is Flammable Question":"Flammable?","Derived Electrics":"Electrics","Derived Weapon Systems":"Weapon Systems","Derived Special Rules":"Special Rules","Derived Problematic Parts":"Out-of-Era Parts","Fuel Uses Warning":"This plane is very short on fuel. Consider 7 Fuel Uses as a good guideline for play, although special cases exist.","Stall Speed":"Stall Speed","Stall Speed Warning":"Stall Speed is higher than Max Speed.","Price Word Used":"Used","Yes":"Yes","No":"No","Derived Per 10 Speed":"/10 speed","Derived Battery":"Battery Storage","Weapon Description":"{0}: {1}x {2} fires [{3}] for {4} damage with {5} hits with {6} ammunition. [{7}]","Weapon Description Heat Ray":"{0}: {1}x {2} fires [{3}] for {4} damage with {5} hits with {6} charges. [{7}]","Submachine Gun":"Submachine Gun","SMG Warning":"-3 to all Attacks beyond Knife Range.","Scattergun":"Scattergun","Scattergun Warning":"Rather than roll Open Fire, you roll a d5 per hit shown in the builder. You do a number of Hits equal to, and Damage half of the roll results, and roll Crit dice like normal. Not affected by Masteries or Special Ammo.","Light Machine Gun":"Light Machine Gun","Machine Gun":"Machine Gun","Balloon Gun":"Balloon Gun","Enhanced Machine Gun":"Enhanced Machine Gun","Enhanced Heavy Machine Gun":"Enhanced Heavy Machine Gun","Punt Gun":"Punt Gun","Punt Gun Warning":"Rather than roll Open Fire, you roll a d10 per hit shown in the builder. You do a number of Hits equal to, and Damage half of the roll results, and roll Crit dice like normal. Not affected by Masteries or Special Ammo.","Light Repeating Cannon":"Light Repeating Cannon","Heavy Cannon":"Heavy Cannon","Light Machine Cannon":"Light Machine Cannon","Heavy Machine Cannon":"Heavy Machine Cannon","Fliergerflammenwerfer":"Fliergerflammenwerfer","Fliergerflammenwerfer Warning":"Rather than roll Open Fire, you roll a d10 per hit shown in the builder. You do a number of Hits equal to, and Damage half of the roll results, and roll Crit dice like normal. Not affected by Masteries or Special Ammo. Uses Fuel uses as Ammo. Incendiary. Max range is Knife. Crits always start fires.","Recoilless Cannon":"Recoilless Cannon","Autocannon":"Autocannon","Battle Cannon":"Battle Cannon","Precision Rifle":"Precision Rifle","Precision Rifle Warning":"Must be fired alone. Must Draw a Bead to fire. Never does more than 1 Hit worth of damage, but rolls Crits normally. Special Ammo: 1 Box per belt. Hits ammo adds or subtracts 5 Hits. Crit Ammo replaces normal Crits outright with the special effect.","Lightning Arc":"Lightning Arc","Lightning Arc Warning":"Uses 3 Charge to deal 1d10 damage to any aircraft within Close range.","Harpoon Launcher":"Harpoon Launcher","Harpoon Launcher Warning":"Max Range Close. Ignores range bands: hits on 16+. Prevents escape until the line is cut. Harpoons can be used as ziplines by boarders.","Heavy Machine Gun":"Heavy Machine Gun","Heavy Repeating Cannon":"Heavy Repeating Cannon","Accessories Section Title":"Additional Parts","Accessories Radio":"Radio","Accessories Autopilot":"Autopilot","Accessories Control Aids":"Control Aids","Accessories Armour Coverage":"Armour Coverage","Accessories Climate":"Climate","Accessories Visibility":"Visibility","Accessories Additional Part Stats":"Additional Part Stats","Accessories Information":"Information","Accessories Electrical":"Electrical","Accessories Control":"Control","Cards Too Many Warnings Warning":"And More!  See the Plane Builder for details.","Cards Gun String Reload":"{0} loads of {1} shots","Cards Gun String No Reload":"{0} shots","Cards Uses Radiator":"Uses Radiator #{0}","Cockpit Section Title":"Cockpits","Cockpit Num Cockpits":"Number of Cockpits:","Cockpit Bombsight":"Bombsight","Cockpit Option":"Option","Cockpit Upgrade":"Upgrade","Cockpit Safety Options":"Safety Options","Cockpit Gunsights":"Gunsights","Cockpit Cockpit Stats":"Cockpit Stats","Control Surfaces Section Title":"Control Surfaces","Control Surfaces Control Surfaces":"Control Surfaces","Control Surfaces Drag Inducers":"Drag Inducers","Control Surfaces Stats":"Control Surface Stats","Control Surfaces Ailerons":"Ailerons","Control Surfaces Rudders":"Rudders","Control Surfaces Elevators":"Elevators","Control Surfaces Flaps":"Flaps","Control Surfaces Slats":"Slats","Engines Section Title":"Engines","Engines Num Engines":"Number of Engines:","Engines Num Radiators":"Number of Radiators:","Engines Asymmetric Plane":"Asymmetric Plane:","Engines Engine Type":"Engine Type","Engines Options":"Options","Engines Options 2":"Options 2","Engines Engine Stats":"Engine Stats","Engine Cooling":"Cooling","Engine Mounting":"Mounting","Engine Upgrades":"Upgrades","Engine Cowls":"Cowls","Engine Electrical":"Electrical","Engine Mounting Location":"Engine Mounting Location","Engine Push Pull":"Push Pull","Engine Side-by-Side":"Side-by-Side","Engine Torque To Structure":"Torque To Structure","Engine Extended Driveshafts":"Extended Driveshafts","Engine Outboard Propeller":"Outboard Propeller","Engine Geared Propeller":"Geared Propeller","Engine Negate Reliability Penalty":"Negate Reliability Penalty","Engine Alternator":"Alternator","Engine Generator":"Generator","Engine Rotary Cooling":"Rotary Engines use Oil Tanks. \\n +1 Mass, Oil Tank is a Vital Component.","Engine Air-Cooled Engine.":"Air-Cooled Engine.","Engine Air Cooling Fan":"Air Cooling Fan","Engine Select Radiator":"Select Radiator","Engine Cooling Amount":"Cooling Amount","Radiators Radiator Type":"Radiator Type","Radiators Mounting":"Mounting","Radiators Coolant":"Coolant","Radiators Radiator Stats":"Radiator Stats","Radiators Harden Radiator":"Harden Radiator","Era Section Title":"Era","Era Option":"Option","Frames Frames and Covering":"Frames and Covering","Frames Frame Type":"Frame Type","Frames Skin Type":"Skin Type","Frames Frame Options":"Frame Options","Frames Frame Stats":"Frame Stats","Frames Flying Wing":"Flying Wing","Frames Geodesic":"Geodesic","Frames Monocoque":"Monocoque","Frames Internal Bracing":"Internal Bracing","Frames Lifting Body":"Lifting Body","Frames No Skin":"None","Frames Tail Section Title":"Tail","Frames Tail Type":"Tail Length:","Frames Tail Farman":"Farman Tail:","Frames Tail Boom":"Boom Tail:","Frames Tail Frame Type":"Tail Frame Type","Frames Tail Skin Type":"Tail Skin Type","Frames Tail Frame Options":"Tail Frame Options","Landing Gear Section Title":"Landing Gear","Landing Gear Landing Gear":"Landing Gear","Landing Gear Extras":"Extras","Landing Gear Gear Stats":"Gear Stats","Landing Gear Retractable":"Retractable","Load Section Title":"Load","Load Fuel":"Fuel","Load Munitions":"Munitions","Load Cargo and Passengers":"Cargo and Passengers","Load Load Stats":"Load Stats","Load Self-Sealing Gas Tank":"Self-Sealing Gas Tank","Load Remote Fire Extinguisher":"Remote Fire Extinguisher","Load Bombs":"Bombs","Load Rockets":"Rockets","Load Internal Bay Count":"Internal Bay Count","Load Widen Internal Bay 1":"Widen Internal Bay 1","Load Widen Internal Bay 2":"Widen Internal Bay 2","Load Cargo":"Cargo","Optimization Section Title":"Optimizations","Optimization Num Free Optimizations":"Number of Free Optimizations:","Optimization Negative":"Negative","Optimization Effect":"Effect","Optimization Positive":"Positive","Optimization Optimization Stats":"Optimization Stats","Optimization Cost":"Expense: +/- 10% Cost","Optimization Lift Bleed":"Lift Efficiency: +/- 3 Lift Bleed","Optimization Leg Room":"Leg Room: +/- 1 Escape, Visibility","Optimization Mass":"Mass: +/- 10% Mass","Optimization Toughness":"Redundancy: +/- 25% Toughness","Optimization Max Strain":"Support: +/- 15% Max Strain","Optimization Reliability":"Reliability: +/- 2 Reliability","Optimization Drag":"Streamlining: +/- 10% Drag","Passengers Section Title":"Passengers","Passengers Number of Seats":"Number of Seats","Passengers Number of Beds":"Number of 1st Class, Beds, or Stretchers","Passengers Upgrade":"Upgrade","Passengers Connectivity":"Connectivity","Passengers Count":"{0} cabin seats and {1} first class or stretcher seats.","Propeller Section Title":"Propeller","Propeller Propeller Pitch":"Propeller Pitch:","Propeller Propeller Upgrades:":"Propeller Upgrades:","Reinforcement Section Title":"Reinforcements","Reinforcement External Reinforcements":"External Reinforcements","Reinforcement Internal Reinforcements":"Cantilevers","Reinforcement Reinforcement Stats":"Reinforcement Stats","Reinforcement Wood":"Wood","Reinforcement Steel":"Steel","Reinforcement Cabane":"Cabane","Reinforcement Wires":"Wires","Reinforcement Wing Blades":"Wing Blades","Reinforcement Aircraft Max Strain":"Aircraft Max Strain","Rotor Section Title":"Rotors","Rotor Rotor":"Rotor","Rotor Material":"Material","Rotor Accessories":"Accessories","Rotor Stats":"Rotor Stats","Rotor Minimum Span":"Minimum Rotor Span","Rotor Span":"Rotor Span Modification","Rotor Rotor Material":"Rotor Material","Rotor Clutched Rotor":"Clutched Rotor","Rotor Area":"Rotor Area","Rotor Number of Rotors":"Number of Rotors","Rotor Ideal Rotor Span":"Ideal Rotor Span","Rotor Stagger":"Rotor Stagger","Rotor Motor Cross-link":"Motor Cross-link","Rotor Blade Count":"Blade Count","Aircraft Type Section Title":"Aircraft Type","AIRPLANE":"Fixed Wing","HELICOPTER":"Helicopter","AUTOGYRO":"Autogyro","ORNITHOPTER_BASIC":"Basic Ornithopter","ORNITHOPTER_FLUTTER":"Fluttering Ornithopter","ORNITHOPTER_BUZZER":"Buzzing Ornithopter","Stabilizers Section Title":"Stabilizers","Stabilizers Horizontal Stabilizers":"Horizontal Stabilizers","Stabilizers Vertical Stabilizers":"Vertical Stabilizers","Stabilizers Stabilizer Stats":"Stabilizer Stats","Stabilizers # of Stabilizers":"# of Stabilizers","Used Section Title":"Used Plane","Used Is Aircraft Used?":"Is Aircraft Used?","Used Effect":"Effect","Used Description":"Description","Used Penalties(+) <br/> Benefits(-)":"Penalties(+) <br/> Benefits(-)","Used Burnt Out":"Burnt Out","Used Burnt Out Description":"Engines are at -1 Reliability","Used Ragged":"Ragged","Used Ragged Description":"Reduce your Max Speed by 10%","Used Hefty":"Hefty","Used Hefty Description":"Increase your Stall Speeds by 20%","Used Sticky Guns":"Sticky Guns","Used Sticky Guns Description":"Increase the chance of guns jamming by 1","Used Weak":"Weak","Used Weak Description":"Cut the plane\'s Toughness in half","Used Fragile":"Fragile","Used Fragile Description":"Reduce your Max Strain by 20%","Used Leaky":"Leaky","Used Leaky Description":"Reduce your Fuel by 20%","Used Sluggish":"Sluggish","Used Sluggish Description":"Reduce your Handling by 5","Weapons Section Title":"Weapons","Weapons Number of Weapon Sets":"Number of Weapon Sets:","Weapons Number of Weapon Braces":"Number of Weapon Braces:","Weapons Weapon Set":"Weapon Set","Weapons Weapons":"Weapons","Weapons Weapon Stats":"Weapon Stats","Weapons Type":"Weapon Type","Weapons Number of Mounts":"Number of Mounts","Weapons Ammunition":"Ammunition","Weapons Action":"Action","Weapons Projectile":"Projectile","Weapons Belt Fed":"Belt Fed","Weapons Stat Mounting":"Mounting","Weapons Stat Jam":"Jam","Weapons Stat Hits":"Hits","Weapons Stat Damage":"Damage","Weapons Stat Shots":"Shots","Weapons Stat Charges":"Charges per Shot","Weapons Wing Mount":"Wing Mount","Weapons Accessible":"Accessible","Weapons Free Accessible":"Free Accessible","Weapons Covered":"Covered","Weapons # Weapons at Mount":"Weapons at Mount","Weapons Synchronization":"Synchronization","Weapons Mount":"Weapon Mount","Weapons Braces":"Weapon Braces","Weapons Braces Warning":"These mounts give an observer +1 to make a Personal Attack with a loose weapon they are carrying in their hands.","Wings Section Title":"Wings","Wings Wing Stagger":"Wing Stagger:","Wings Closed Wing":"Closed Wing:","Wings Swept Wing":"Swept Wings:","Wings Wing Type":"Wing Type","Wings Wing Options":"Wing Options","Wings Wing Stats":"Wing Stats","Wings Full Wings":"Full Wings","Wings Miniature Wings":"Miniature Wings","Wings Sesquiplane":"Sesquiplane","Wings No Wing":"None","Wings Area":"Area","Wings Span":"Span","Wings Gull":"Gull","Wings Dihedral":"Dihedral","Wings Anhedral":"Anhedral","Aircraft Button Save":"Save","Aircraft Button Load":"Load","Aircraft Button Copy As Link":"Copy As Link","Aircraft Button Save Dashboard":"Save Dashboard","Aircraft Button Interactive Dashboard":"Interactive Dashboard","Aircraft Button Save NPC":"Save NPC","Aircraft Button Save Catalog":"Save Catalog","Aircraft Button Default Aircraft":"Default Aircraft","Aircraft Stats Section Title":"Total Sum of Stats","Aircraft Derived Section Title":"Aircraft Derived Statistics","Seat #":"Seat #{0}","Seats #":"Seats # {0}","Seat Location":"Choose Seat","Radiators #":"Radiators # {0}","Crew Pilot":"Pilot","Crew Bombadier":"Bombardier","Crew Co-Pilot":"Co-Pilot","Crew Gunner":"Gunner","Crew Aircrew":"Aircrew","Diesel":"Diesel Engine","Diesel Warning":"Engine won\'t catch fire.","Cargo Tiny":"A small locker for personal stuff.","Cargo Small":"Will fit a trunk, barrel, or crate.","Cargo Medium":"Will fit a small vehicle like a motorcycle, car, or zeppelin engine.","Cargo Large":"Will fit a scout or fighter aircraft with the wings taken off.","Cargo Huge":"Will fit just about anything you can imagine.","Alter Select Part":"Select Part","Alter Quantity":"Quantity","Alter Part Name":"Part Name","Alter Part Special Rules":"Special Rules","Frame Count":"Frame Count","Frame Count Warning":"This plane appears to have unused frame sections.  Check to see if this is intentional.","Altitude Section Title":"Altitude Effects","Altitude Altitude":"Altitude","Rarity":"Rarity","Rarity Custom":"Custom","Rarity Common":"Common","Rarity Rare":"Rare","Rarity Legendary":"Legendary","Boost Warning":"Boost is 0 for some loads.  The plane cannot accelerate to take off.","Insufficient Charge":"Insufficient Charge","Insufficient Charge Warning":"This aircraft has electrical systems with nothing to power them.","Low Mass Warning":"This aircraft is very low mass. If it is a custom airplane, be careful not to make it overpowered.","Low Drag Warning":"This aircraft is very low drag. If it is a custom airplane, be careful not to make it overpowered.","Connectivity Warning":"Can move between positions without Wingwalking.","Passenger Connectivity Warning":"Can reach the cockpit without Wingwalking.","Rotor Thickness":"Rotor Thickness"}}');var I=a.t(x,2);const M=new class{constructor(){this.lang="en"}LoadLanguages(t){this.languages=t}GetLanguages(){const t=[];for(const e of this.languages.languages)t.push(e);return t}SetCurrentLanguage(t){this.languages[t]&&(this.lang=t)}e(t){return this.languages[this.lang][t]?this.languages[this.lang][t]:this.languages.en[t]?this.languages.en[t]:(console.error("Failed to find "+t),"!"+t+"!")}};function A(t,...e){return R.Format(M.e(t),...e)}M.LoadLanguages(I);class N extends n{constructor(t){super(),this.model=t,document.getElementById("lbl_era").textContent=A("Era Section Title");const e=document.getElementById("table_era"),s=document.createDocumentFragment();var i=w(s);c(i,A("Era Option")),c(i,A("Stat Lift Bleed")),c(i,A("Stat Cost")),c(i,A("Stat Pitch Stability"));const a=(i=w(s)).insertCell();this.select=document.createElement("SELECT"),a.append(this.select),this.bleed=i.insertCell(),this.cost=i.insertCell(),this.pstab=i.insertCell(),this.select.required=!0,this.select.onchange=()=>{this.model.SetSelected(this.select.selectedIndex)};for(let t of this.model.GetEraOptions()){const e=document.createElement("OPTION");e.text=A(t.name),this.select.add(e)}e.appendChild(s)}UpdateDisplay(){this.select.selectedIndex=this.model.GetSelected();const t=this.model.PartStats();E(this.bleed,t.liftbleed.toString(),!1),E(this.cost,t.cost.toString(),!1),E(this.pstab,t.pitchstab.toString(),!1)}}class T extends n{constructor(t,e){super(),this.row=t,this.cockpit=e,this.upg_chbxs=[],this.sft_chbxs=[],this.gun_chbxs=[];const s=document.createDocumentFragment(),i=C(s),a=C(s),n=C(s),r=C(s),o=C(s),l=document.createElement("TABLE"),u=l.insertRow();c(u,A("Stat Mass")),c(u,A("Stat Drag")),c(u,A("Stat Cost"));const m=l.insertRow();this.d_mass=m.insertCell(),this.d_drag=m.insertCell(),this.d_cost=m.insertCell();const p=l.insertRow();c(p,A("Stat Control")),c(p,A("Stat Required Sections")),c(p,"");const d=l.insertRow();this.d_cont=d.insertCell(),this.d_rseq=d.insertCell(),d.insertCell();const g=l.insertRow();c(g,A("Stat Flight Stress")),c(g,A("Stat Escape")),c(g,A("Stat Visibility"));const y=l.insertRow();this.d_strs=y.insertCell(),this.d_escp=y.insertCell(),this.d_visi=y.insertCell(),o.appendChild(l),o.className="inner_table",l.className="inner_table",this.sel_type=document.createElement("SELECT"),this.d_strs.className="part_local",this.d_visi.className="part_local",this.d_escp.className="part_local";for(let t of e.GetTypeList()){let e=document.createElement("OPTION");e.text=A(t.name),this.sel_type.add(e)}i.appendChild(this.sel_type);var b=h(a);const S=e.GetUpgradeList(),w=e.CanUpgrades();for(let t=0;t<S.length;t++){let e=document.createElement("INPUT");w[t]&&(f(A(S[t].name),e,b),e.onchange=()=>{this.cockpit.SetUpgrade(t,e.checked)}),this.upg_chbxs.push(e)}b=h(n);var G=0;for(let t of e.GetSafetyList()){let e=document.createElement("INPUT");f(A(t.name),e,b);let s=G;G+=1,e.onchange=()=>{this.cockpit.SetSafety(s,e.checked)},this.sft_chbxs.push(e)}b=h(r);var v=0;for(let t of e.GetGunsightList()){let e=document.createElement("INPUT");f(A(t.name),e,b);let s=v;v+=1,e.onchange=()=>{this.cockpit.SetGunsight(s,e.checked)},this.gun_chbxs.push(e)}this.bombsight=document.createElement("INPUT"),_(A("Cockpit Bombsight"),this.bombsight,b),this.bombsight.onchange=()=>{this.cockpit.SetBombsightQuality(this.bombsight.valueAsNumber)},this.bombsight.min="0",this.bombsight.max="301",this.bombsight.step="1",this.sel_type.onchange=()=>{this.cockpit.SetType(this.sel_type.selectedIndex)},this.row.appendChild(s)}UpdateCockpit(t){this.cockpit=t}UpdateDisplay(){let t=this.cockpit.PartStats();E(this.d_mass,t.mass.toString(),!1),E(this.d_drag,t.drag.toString(),!1),E(this.d_cost,t.cost.toString(),!1),E(this.d_cont,t.control.toString(),!0),E(this.d_rseq,t.reqsections.toString(),!1);const e=this.cockpit.GetFlightStress();e[0],e[1],E(this.d_strs,R.Format("{0}",e[0])),E(this.d_escp,this.cockpit.GetEscape().toString(),!0),E(this.d_visi,this.cockpit.GetVisibility().toString(),!0),this.sel_type.selectedIndex=this.cockpit.GetType();const s=this.cockpit.GetSelectedUpgrades();for(let t=0;t<this.upg_chbxs.length;t++)this.upg_chbxs[t].checked=s[t];const i=this.cockpit.GetSelectedSafety();let a=this.cockpit.CanSafety();for(let t=0;t<this.sft_chbxs.length;t++)this.sft_chbxs[t].checked=i[t],this.sft_chbxs[t].disabled=!a[t];const n=this.cockpit.GetSelectedGunsights();for(let t=0;t<this.gun_chbxs.length;t++)this.gun_chbxs[t].checked=n[t];this.bombsight.valueAsNumber=this.cockpit.GetBombsightQuality()}}class k extends n{constructor(t){super(),this.cockpits=t,document.getElementById("lbl_cockpits").textContent=A("Cockpit Section Title"),document.getElementById("lbl_num_cockpits").textContent=A("Cockpit Num Cockpits"),this.tbl=document.getElementById("table_cockpit");const e=document.createDocumentFragment(),s=w(e);c(s,A("Cockpit Option")),c(s,A("Cockpit Upgrade")),c(s,A("Cockpit Safety Options")),c(s,A("Cockpit Gunsights")),c(s,A("Cockpit Cockpit Stats")),this.counter=document.getElementById("num_cockpits"),this.positions=[],this.counter.onchange=t=>{this.cockpits.SetNumberOfCockpits(this.counter.valueAsNumber)},this.tbl.appendChild(e)}CounterChange(){for(;this.positions.length>this.counter.valueAsNumber;)this.RemoveCockpit();for(;this.positions.length<this.counter.valueAsNumber;)this.AddCockpit(this.positions.length)}AddCockpit(t){const e=this.tbl.insertRow(),s=new T(e,this.cockpits.GetCockpit(t));this.positions.push(s)}RemoveCockpit(){this.positions.pop(),this.tbl.deleteRow(this.tbl.rows.length-1)}UpdateDisplay(){this.counter.valueAsNumber=this.cockpits.GetNumberOfCockpits(),this.CounterChange();for(let t=0;t<this.positions.length;t++){let e=this.positions[t];e.UpdateCockpit(this.cockpits.GetCockpit(t)),e.UpdateDisplay()}}}class L extends n{constructor(t){super(),this.pass=t,document.getElementById("lbl_passengers").textContent=A("Passengers Section Title");const e=document.getElementById("table_passengers"),s=document.createDocumentFragment();var i=w(s);c(i,A("Passengers Number of Seats")),c(i,A("Passengers Number of Beds")),c(i,A("Passengers Upgrade")),c(i,A("Stat Mass")),c(i,A("Stat Required Sections")),i=w(s),this.nseats=document.createElement("INPUT"),this.nseats.type="number",this.nseats.min="0",i.insertCell().append(this.nseats),this.nbeds=document.createElement("INPUT"),this.nbeds.type="number",this.nbeds.min="0",i.insertCell().append(this.nbeds);const a=i.insertCell();this.connect=document.createElement("INPUT");const n=h(a);f(A("Passengers Connectivity"),this.connect,n),this.mass=i.insertCell(),this.reqseq=i.insertCell(),this.connect.disabled=!0,this.nseats.onchange=()=>{this.pass.SetSeats(this.nseats.valueAsNumber)},this.nbeds.onchange=()=>{this.pass.SetBeds(this.nbeds.valueAsNumber)},this.connect.onchange=()=>{this.pass.SetConnected(this.connect.checked)},e.appendChild(s)}SetCollapse(){P("passenger_collapse",!this.pass.IsDefault())}UpdateDisplay(){const t=this.pass.PartStats();this.nseats.valueAsNumber=this.pass.GetSeats(),this.nbeds.valueAsNumber=this.pass.GetBeds(),this.connect.checked=this.pass.GetConnected(),this.connect.disabled=!this.pass.PossibleConnection(),E(this.mass,t.mass.toString(),!1),E(this.reqseq,t.reqsections.toString(),!1)}}class W{constructor(t){this.array=new ArrayBuffer(51200),this.view=new DataView(this.array),this.offset=0}Check(){if(this.offset>=this.array.byteLength)throw"Serialization Way too long."}PushNum(t){this.view.setInt16(this.offset,t,!1),this.offset+=2,this.Check()}PushBool(t){t?this.view.setUint8(this.offset,1):this.view.setUint8(this.offset,0),this.offset+=1,this.Check()}PushString(t){var e=(new TextEncoder).encode(t);this.PushNum(e.length);for(let t=0;t<e.length;t++)this.view.setUint8(this.offset,e[t]),this.offset++;this.Check()}PushNumArr(t){this.PushNum(t.length);for(const e of t)this.PushNum(e);this.Check()}PushBoolArr(t){this.PushNum(t.length);for(const e of t)this.PushBool(e);this.Check()}PushFloat(t){this.view.setFloat32(this.offset,t,!1),this.offset+=4,this.Check()}FinalArray(){return this.array.slice(0,this.offset)}}class B{constructor(t){this.array=t,this.view=new DataView(this.array),this.offset=0,this.version=parseFloat(this.GetString()),this.Reset()}Reset(){this.offset=0}Check(){if(this.offset>=this.array.byteLength)throw"Deserialization Failed"}GetNum(){this.Check();const t=this.view.getInt16(this.offset,!1);return this.offset+=2,t}GetBool(){this.Check();const t=this.view.getUint8(this.offset);return this.offset+=1,t>0}GetString(){this.Check();const t=this.GetNum(),e=new Uint8Array(this.view.buffer,this.offset,t);let s;return this.offset+=t,s=this.version<12.65?"windows-1252":"utf-8",new TextDecoder(s).decode(e)}GetNumArr(t){this.Check();const e=this.GetNum(),s=[];for(let t=0;t<e;t++)s.push(this.GetNum());for(;s.length<t;)s.push(0);return s}GetBoolArr(t){this.Check();const e=this.GetNum(),s=[];for(let t=0;t<e;t++)s.push(this.GetBool());for(;s.length<t;)s.push(!1);return s}GetFloat(){this.Check();const t=this.view.getFloat32(this.offset,!1);return this.offset+=4,t}CheckLastNum(){return this.view.getInt16(this.array.byteLength-2,!1)}GetRemaining(){return this.array.byteLength-this.offset}}function F(t,e){for(;t.length<e;)t.push(0);return t}function O(t,e){for(;t.length<e;)t.push(!1);return t}var q;!function(t){t[t.WHITE=0]="WHITE",t[t.YELLOW=1]="YELLOW",t[t.RED=2]="RED"}(q||(q={}));class D{constructor(t){this.liftbleed=0,this.wetmass=0,this.mass=0,this.drag=0,this.control=0,this.cost=0,this.reqsections=0,this.visibility=0,this.flightstress=0,this.escape=0,this.pitchstab=0,this.latstab=0,this.cooling=0,this.reliability=0,this.power=0,this.fuelconsumption=0,this.maxstrain=0,this.structure=0,this.pitchspeed=0,this.pitchboost=0,this.wingarea=0,this.toughness=0,this.upkeep=0,this.crashsafety=0,this.bomb_mass=0,this.fuel=0,this.charge=0,this.warnings=[],this.era=[],t&&this.fromJSON(t,0)}toJSON(){return{liftbleed:this.liftbleed,wetmass:this.wetmass,mass:this.mass,drag:this.drag,control:this.control,cost:this.cost,reqsections:this.reqsections,visibility:this.visibility,flightstress:this.flightstress,escape:this.escape,pitchstab:this.pitchstab,latstab:this.latstab,cooling:this.cooling,reliability:this.reliability,power:this.power,fuelconsumption:this.fuelconsumption,maxstrain:this.maxstrain,structure:this.structure,pitchboost:this.pitchboost,pitchspeed:this.pitchspeed,wingarea:this.wingarea,toughness:this.toughness,upkeep:this.upkeep,crashsafety:this.crashsafety,bomb_mass:this.bomb_mass,fuel:this.fuel,charge:this.charge,warnings:this.warnings,eras:this.era}}fromJSON(t,e){if(t.liftbleed&&(this.liftbleed=t.liftbleed),t.wetmass&&(this.wetmass=t.wetmass),t.mass&&(this.mass=t.mass),t.drag&&(this.drag=t.drag),t.control&&(this.control=t.control),t.cost&&(this.cost=t.cost),t.reqsections&&(this.reqsections=t.reqsections),t.visibility&&(this.visibility=t.visibility),t.flightstress&&(this.flightstress=t.flightstress),t.escape&&(this.escape=t.escape),t.pitchstab&&(this.pitchstab=t.pitchstab),t.latstab&&(this.latstab=t.latstab),t.cooling&&(this.cooling=t.cooling),t.reliability&&(this.reliability=t.reliability),t.power&&(this.power=t.power),t.fuelconsumption&&(this.fuelconsumption=t.fuelconsumption),t.maxstrain&&(this.maxstrain=t.maxstrain),t.structure&&(this.structure=t.structure),t.pitchspeed&&(this.pitchspeed=t.pitchspeed),t.pitchboost&&(this.pitchboost=t.pitchboost),t.wingarea&&(this.wingarea=t.wingarea),t.toughness&&(this.toughness=t.toughness),t.upkeep&&(this.upkeep=t.upkeep),t.crashsafety&&(this.crashsafety=t.crashsafety),t.bomb_mass&&(this.bomb_mass=t.bomb_mass),t.fuel&&(this.fuel=t.fuel),t.charge&&(this.charge=t.charge),t.warning&&this.warnings.push({source:A(t.name),warning:A(t.warning),color:q.WHITE}),t.warnings){const e=t.warnings,s=[];for(const t of e)s.push({source:t.source,warning:t.warning});this.warnings=this.MergeWarnings(s)}if(t.era&&this.era.push({name:A(t.name),era:A(t.era)}),t.eras){const e=t.eras,s=[];for(const t of e)s.push({name:t.name,era:t.era});this.era=this.MergeEra(s)}}serialize(t){t.PushNum(this.liftbleed),t.PushNum(this.wetmass),t.PushNum(this.mass),t.PushNum(this.drag),t.PushNum(this.control),t.PushNum(this.cost),t.PushNum(this.reqsections),t.PushNum(this.visibility),t.PushNum(this.flightstress),t.PushNum(this.escape),t.PushNum(this.pitchstab),t.PushNum(this.latstab),t.PushNum(this.cooling),t.PushNum(this.reliability),t.PushNum(this.power),t.PushNum(this.fuelconsumption),t.PushNum(this.maxstrain),t.PushNum(this.structure),t.PushFloat(this.pitchboost),t.PushFloat(this.pitchspeed),t.PushNum(this.wingarea),t.PushNum(this.toughness),t.PushNum(this.upkeep),t.PushNum(this.crashsafety),t.PushNum(this.bomb_mass),t.PushNum(this.fuel),t.PushNum(this.charge),t.PushNum(this.warnings.length);for(const e of this.warnings)t.PushString(e.source),t.PushString(e.warning);t.PushNum(this.era.length);for(const e of this.era)t.PushString(e.name),t.PushString(e.era)}deserialize(t){if(this.liftbleed=t.GetNum(),this.wetmass=t.GetNum(),this.mass=t.GetNum(),this.drag=t.GetNum(),this.control=t.GetNum(),this.cost=t.GetNum(),this.reqsections=t.GetNum(),this.visibility=t.GetNum(),this.flightstress=t.GetNum(),this.escape=t.GetNum(),this.pitchstab=t.GetNum(),this.latstab=t.GetNum(),this.cooling=t.GetNum(),this.reliability=t.GetNum(),this.power=t.GetNum(),this.fuelconsumption=t.GetNum(),this.maxstrain=t.GetNum(),this.structure=t.GetNum(),this.pitchboost=t.GetFloat(),this.pitchspeed=t.GetFloat(),this.wingarea=t.GetNum(),this.toughness=t.GetNum(),this.upkeep=t.GetNum(),this.crashsafety=t.GetNum(),this.bomb_mass=t.GetNum(),this.fuel=t.GetNum(),this.charge=t.GetNum(),t.version>12.25){const e=t.GetNum();this.warnings=[];for(let s=0;s<e;s++)this.warnings.push({source:t.GetString(),warning:t.GetString(),color:q.WHITE});const s=t.GetNum();this.era=[];for(let e=0;e<s;e++)this.era.push({name:t.GetString(),era:t.GetString()})}}Add(t){const e=new D;return e.liftbleed=this.liftbleed+t.liftbleed,e.wetmass=this.wetmass+t.wetmass,e.mass=this.mass+t.mass,e.drag=this.drag+t.drag,e.control=this.control+t.control,e.cost=this.cost+t.cost,e.reqsections=this.reqsections+t.reqsections,e.visibility=this.visibility+t.visibility,e.flightstress=this.flightstress+t.flightstress,e.escape=this.escape+t.escape,e.pitchstab=this.pitchstab+t.pitchstab,e.latstab=this.latstab+t.latstab,e.cooling=this.cooling+t.cooling,e.reliability=this.reliability+t.reliability,e.power=this.power+t.power,e.fuelconsumption=this.fuelconsumption+t.fuelconsumption,e.maxstrain=this.maxstrain+t.maxstrain,e.structure=this.structure+t.structure,e.pitchboost=this.pitchboost+t.pitchboost,e.pitchspeed=this.pitchspeed+t.pitchspeed,e.wingarea=this.wingarea+t.wingarea,e.toughness=this.toughness+t.toughness,e.upkeep=this.upkeep+t.upkeep,e.crashsafety=this.crashsafety+t.crashsafety,e.bomb_mass=this.bomb_mass+t.bomb_mass,e.fuel=this.fuel+t.fuel,e.charge=this.charge+t.charge,e.warnings=this.MergeWarnings(t.warnings),e.era=this.MergeEra(t.era),e}MergeWarnings(t){const e=[];for(const t of this.warnings)e.push({source:t.source,warning:t.warning,color:t.color});for(const s of t){let t=!1;for(const e of this.warnings)s.source==e.source&&s.warning==e.warning&&(t=!0);t||e.push({source:s.source,warning:s.warning,color:s.color})}return e}MergeEra(t){const e=[];for(const t of this.era)e.push({name:t.name,era:t.era});for(const s of t){let t=!1;for(const e of this.era)s.name==e.name&&s.era==e.era&&(t=!0);t||e.push({name:s.name,era:s.era})}return e}Multiply(t){const e=this.Clone();return e.liftbleed=this.liftbleed*t,e.wetmass=this.wetmass*t,e.mass=this.mass*t,e.drag=this.drag*t,e.control=this.control*t,e.cost=this.cost*t,e.reqsections=this.reqsections*t,e.visibility=this.visibility*t,e.flightstress=this.flightstress*t,e.escape=this.escape*t,e.pitchstab=this.pitchstab*t,e.latstab=this.latstab*t,e.cooling=this.cooling*t,e.reliability=this.reliability*t,e.power=this.power*t,e.fuelconsumption=this.fuelconsumption*t,e.maxstrain=this.maxstrain*t,e.structure=this.structure*t,e.wingarea=this.wingarea*t,e.toughness=this.toughness*t,e.upkeep=this.upkeep*t,e.crashsafety=this.crashsafety*t,e.bomb_mass=this.bomb_mass*t,e.fuel=this.fuel*t,e.charge=this.charge*t,Math.abs(t)>1e-6&&(e.warnings=this.warnings,e.era=this.era),e}Equal(t){return this.liftbleed==t.liftbleed&&this.wetmass==t.wetmass&&this.mass==t.mass&&this.drag==t.drag&&this.control==t.control&&this.cost==t.cost&&this.reqsections==t.reqsections&&this.visibility==t.visibility&&this.flightstress==t.flightstress&&this.escape==t.escape&&this.pitchstab==t.pitchstab&&this.latstab==t.latstab&&this.cooling==t.cooling&&this.reliability==t.reliability&&this.power==t.power&&this.fuelconsumption==t.fuelconsumption&&this.maxstrain==t.maxstrain&&this.structure==t.structure&&this.pitchspeed==t.pitchspeed&&this.pitchboost==t.pitchboost&&this.wingarea==t.wingarea&&this.toughness==t.toughness&&this.upkeep==t.upkeep&&this.crashsafety==t.crashsafety&&this.bomb_mass==t.bomb_mass&&this.fuel==t.fuel&&this.charge==t.charge}rtz(t){return t>0?Math.floor(1e-6+t):Math.ceil(-1e-6+t)}Round(){this.liftbleed=this.rtz(this.liftbleed),this.wetmass=this.rtz(this.wetmass),this.mass=this.rtz(this.mass),this.drag=this.rtz(this.drag),this.control=this.rtz(this.control),this.cost=this.rtz(this.cost),this.reqsections=this.rtz(this.reqsections),this.visibility=this.rtz(this.visibility),this.flightstress=this.rtz(this.flightstress),this.escape=this.rtz(this.escape),this.pitchstab=this.rtz(this.pitchstab),this.latstab=this.rtz(this.latstab),this.cooling=this.rtz(this.cooling),this.reliability=this.rtz(this.reliability),this.power=this.rtz(this.power),this.fuelconsumption=this.rtz(this.fuelconsumption),this.maxstrain=this.rtz(this.maxstrain),this.structure=this.rtz(this.structure),this.wingarea=this.rtz(this.wingarea),this.toughness=this.rtz(this.toughness),this.upkeep=this.rtz(this.upkeep),this.crashsafety=this.rtz(this.crashsafety),this.bomb_mass=this.rtz(this.bomb_mass),this.fuel=this.rtz(this.fuel),this.charge=this.rtz(this.charge)}Clone(){return this.Add(new D)}}const U=t=>{switch(t){case"Pioneer":return 0;case"WWI":return 1;case"Roaring 20s":return 2;case"Coming Storm":return 3;case"WWII":return 4;case"Last Hurrah":return 5;case"Himmilgard":return 6}},z=t=>{switch(t){case"Pioneer":return 0;case"WWI":return 1;case"Roaring 20s":return 2;case"Coming Storm":return 3;case"WWII":return 4;case"Last Hurrah":return 5;case"Himmilgard":return-1}},H=t=>{switch(t){case 0:return"Pioneer";case 1:return"WWI";case 2:return"Roaring 20s";case 3:return"Coming Storm";case 4:return"WWII";case 5:return"Last Hurrah";case 6:case-1:return"Himmilgard"}};var j,J,V,Y;!function(t){t[t.PROPELLER=0]="PROPELLER",t[t.TURBINE=1]="TURBINE",t[t.PULSEJET=2]="PULSEJET"}(j||(j={}));class X{constructor(t){this.name="Default",this.overspeed=0,this.altitude=0,this.torque=0,this.rumble=0,this.oiltank=!1,this.pulsejet=!1,this.stats=new D,this.rarity=Y.CUSTOM,t&&this.fromJSON(t)}toJSON(){return{name:this.name,overspeed:this.overspeed,altitude:this.altitude,torque:this.torque,rumble:this.rumble,oiltank:this.oiltank,pulsejet:this.pulsejet,rarity:this.rarity,...this.stats.toJSON()}}fromJSON(t,e=9999){t.name&&(this.name=t.name),t.overspeed&&(this.overspeed=t.overspeed),t.altitude&&(this.altitude=t.altitude),t.torque&&(this.torque=t.torque),t.rumble&&(this.rumble=t.rumble),t.oiltank&&(this.oiltank=t.oiltank),t.pulsejet&&(this.pulsejet=t.pulsejet),t.rarity&&(this.rarity=t.rarity),this.stats=new D(t)}serialize(t){t.PushString(this.name),t.PushNum(this.overspeed),t.PushNum(this.altitude),t.PushNum(this.torque),t.PushNum(this.rumble),t.PushBool(this.oiltank),t.PushBool(this.pulsejet),t.PushNum(this.rarity),this.stats.serialize(t)}deserialize(t){this.name=t.GetString(),this.overspeed=t.GetNum(),this.altitude=t.GetNum(),this.torque=t.GetNum(),this.rumble=t.GetNum(),this.oiltank=t.GetBool(),this.pulsejet=t.GetBool(),t.version>12.35&&(this.rarity=t.GetNum()),this.stats.deserialize(t)}Clone(){const t=new X;return t.fromJSON(JSON.parse(JSON.stringify(this.toJSON()))),t}Equal(t){return this.stats.Equal(t.stats)&&this.overspeed==t.overspeed&&this.altitude==t.altitude&&this.torque==t.torque&&this.rumble==t.rumble&&this.oiltank==t.oiltank&&this.pulsejet==t.pulsejet&&this.rarity==t.rarity}Verify(){this.oiltank&&(this.stats.cooling=0),this.PulseJetCheck()}PulseJetCheck(){this.pulsejet?(this.stats.cooling=0,this.overspeed=100,this.altitude=3,this.torque=0):this.rumble=0}}!function(t){t[t.NONE=0]="NONE",t[t.ALTITUDE_THROTTLE=1]="ALTITUDE_THROTTLE",t[t.SUPERCHARGER=2]="SUPERCHARGER",t[t.TURBOCHARGER=3]="TURBOCHARGER"}(J||(J={}));class Q{constructor(){this.EraTable=[{name:"Pioneer",materials:3,cost:.5,maxRPM:30,powerdiv:8,fuelfactor:10},{name:"WWI",materials:2,cost:1,maxRPM:35,powerdiv:7,fuelfactor:8},{name:"Roaring 20s",materials:1.5,cost:2,maxRPM:40,powerdiv:6.8,fuelfactor:6},{name:"Coming Storm",materials:1.35,cost:2.25,maxRPM:45,powerdiv:6.6,fuelfactor:5},{name:"WWII",materials:1.25,cost:2.5,maxRPM:50,powerdiv:6.5,fuelfactor:4},{name:"Last Hurrah",materials:1,cost:3,maxRPM:50,powerdiv:6.2,fuelfactor:2}],this.CoolingTable=[{name:"Liquid Cooled",forcefactor:1.2,RPMoff:0,thrustfactor:1,radiator:1,massfactor:1},{name:"Air Cooled",forcefactor:1,RPMoff:0,thrustfactor:1,radiator:0,massfactor:1},{name:"Rotary",forcefactor:1,RPMoff:8,thrustfactor:1.5,radiator:0,massfactor:1},{name:"Contrarotary",forcefactor:1,RPMoff:8,thrustfactor:1.25,radiator:0,massfactor:1},{name:"Semi-Radial",forcefactor:.8,RPMoff:0,thrustfactor:1,radiator:0,massfactor:1},{name:"Liquid Radial",forcefactor:1,RPMoff:0,thrustfactor:1,radiator:2.5,massfactor:1.3}],this.CompressorTable=[{name:"None"},{name:"Altitude Throttle"},{name:"Supercharger"},{name:"Turbocharger"}],this.Upgrades=[{name:"Asperator Boost",powerfactor:.11,fuelfactor:0,massfactor:0,dragfactor:0,idealalt:-1,costfactor:3,reqsection:!1},{name:"War Emergency Power",powerfactor:0,fuelfactor:0,massfactor:0,dragfactor:0,idealalt:0,costfactor:5,reqsection:!1},{name:"Fuel Injector",powerfactor:0,fuelfactor:-.1,massfactor:0,dragfactor:0,idealalt:0,costfactor:2,reqsection:!1},{name:"Diesel",powerfactor:-.2,fuelfactor:-.5,massfactor:0,dragfactor:0,idealalt:0,costfactor:0,reqsection:!1}],this.name="Default Name",this.era_sel=0,this.cool_sel=0,this.upg_sel=[...Array(this.Upgrades.length).fill(!1)],this.engine_displacement=1,this.num_cyl_per_row=2,this.num_rows=2,this.compression_ratio=2,this.rpm_boost=1,this.material_fudge=1,this.quality_fudge=1,this.compressor_type=J.NONE,this.compressor_count=0,this.min_IAF=0,this.rarity=Y.CUSTOM}CanUpgrade(){const t=[...Array(this.Upgrades.length).fill(!0)];return t[0]=!1,this.compressor_type==J.ALTITUDE_THROTTLE&&(t[0]=!1,t[1]=!1,t[2]=!1),t}UpgradePower(){var t=1;for(let e=0;e<this.upg_sel.length;e++)this.upg_sel[e]&&(t+=this.Upgrades[e].powerfactor);return this.upg_sel[0]&&(t*=1+this.Upgrades[0].powerfactor),t}RPM(){const t=this.EraTable[this.era_sel],e=this.CoolingTable[this.cool_sel];return(t.maxRPM-e.RPMoff)*(this.compression_ratio/10)}GearedRPM(){return this.RPM()*this.rpm_boost}CalcPower(){const t=this.EraTable[this.era_sel],e=this.CoolingTable[this.cool_sel],s=this.engine_displacement*this.compression_ratio*e.forcefactor*this.UpgradePower()*(this.GearedRPM()/10);return Math.floor(1e-6+s/t.powerdiv)}UpgradeMass(){var t=1;for(let e=0;e<this.upg_sel.length;e++)this.upg_sel[e]&&(t+=this.Upgrades[e].massfactor);return t}CalcMass(){this.EraTable[this.era_sel];const t=this.CoolingTable[this.cool_sel],e=this.engine_displacement**2*this.compression_ratio/1e3,s=this.engine_displacement*this.num_rows/10+1,i=this.engine_displacement/5;return Math.floor(1e-6+(e+s+i)*this.UpgradeMass()*this.material_fudge*t.massfactor)}UpgradeDrag(){var t=1;for(let e=0;e<this.upg_sel.length;e++)this.upg_sel[e]&&(t+=this.Upgrades[e].dragfactor);return t}CoolDrag(){switch(this.CoolingTable[this.cool_sel].name){case"Liquid Cooled":case"Air Cooled":case"Semi-Radial":return 1;case"Rotary":return this.GearedRPM()/10;case"Contrarotary":return this.GearedRPM()/8;case"Liquid Radial":return 1.2}throw"Error in CoolDrag, no valid switch case."}CalcDrag(){const t=3+this.engine_displacement/this.num_rows/3;return Math.floor(1e-6+t*this.CoolDrag()*this.UpgradeDrag())}CoolBurnout(){const t=this.EraTable[this.era_sel].materials/2;switch(this.CoolingTable[this.cool_sel].name){case"Liquid Cooled":return 2;case"Air Cooled":return(2+this.num_rows**2)*t;case"Rotary":case"Contrarotary":return this.num_rows**2/(this.GearedRPM()/10);case"Semi-Radial":return(2+this.num_rows**2/2)*t;case"Liquid Radial":return.5}throw"Error in CoolBurnout, no valid switch case."}MaterialModifier(){const t=this.EraTable[this.era_sel].materials,e=this.num_cyl_per_row*this.num_rows,s=this.engine_displacement/e*this.compression_ratio**2*t;return this.rpm_boost*s*this.CoolBurnout()*this.rpm_boost}IsRotary(){return"Rotary"==this.CoolingTable[this.cool_sel].name||"Contrarotary"==this.CoolingTable[this.cool_sel].name}CalcCooling(){return this.IsRotary()?0:Math.floor(1e-6+this.MaterialModifier()/20*this.CoolingTable[this.cool_sel].radiator)}CalcOverspeed(){return Math.round(1.5*this.RPM())}UpgradeFuel(){var t=1;for(let e=0;e<this.upg_sel.length;e++)this.upg_sel[e]&&(t+=this.Upgrades[e].fuelfactor);return t*this.EraTable[this.era_sel].fuelfactor}CalcFuelConsumption(){const t=this.engine_displacement*this.RPM()/100;return Math.floor(1e-6+t*this.UpgradeFuel())}CalcAltitude(){var t=0;for(let e=0;e<this.upg_sel.length;e++)this.upg_sel[e]&&(t+=this.Upgrades[e].idealalt);return 10*(3+t)-1}CoolTorque(){return"Rotary"==this.CoolingTable[this.cool_sel].name?this.CalcMass():"Contrarotary"==this.CoolingTable[this.cool_sel].name?Math.floor(1e-6+this.CalcMass()/2):1}CalcTorque(){return Math.floor(1e-6+this.CoolTorque()*this.GearedRPM()/5/4)}UpgradeCost(){var t=0;for(let e=0;e<this.upg_sel.length;e++)this.upg_sel[e]&&(t+=this.Upgrades[e].costfactor);return t}CalcCost(){const t=this.EraTable[this.era_sel],e=this.CoolingTable[this.cool_sel],s=Math.max(1,this.quality_fudge),i=this.engine_displacement*this.compression_ratio/10,a=this.UpgradeCost()+i;var n=s*t.cost*a;return e.radiator>0&&(n*=1.4),Math.floor(1e-6+n)}VerifyValues(){for(this.engine_displacement=Math.max(.01,this.engine_displacement),this.engine_displacement=Math.min(150,this.engine_displacement),this.era_sel=Math.max(0,Math.min(this.EraTable.length-1,this.era_sel)),this.cool_sel=Math.max(0,Math.min(this.CoolingTable.length-1,this.cool_sel)),this.num_cyl_per_row=Math.floor(Math.max(1,this.num_cyl_per_row)),this.num_rows=Math.floor(Math.max(1,this.num_rows)),this.compression_ratio=Math.max(.01,this.compression_ratio),this.compression_ratio=Math.min(25,this.compression_ratio),this.rpm_boost=Math.max(.1,this.rpm_boost),this.rpm_boost=Math.min(2,this.rpm_boost),this.material_fudge=Math.max(.1,this.material_fudge),this.material_fudge=Math.min(2,this.material_fudge),this.quality_fudge=Math.max(.1,this.quality_fudge),this.quality_fudge=Math.min(2,this.quality_fudge);this.material_fudge-1+(this.quality_fudge-1)<-.9;)this.material_fudge+=.1,this.quality_fudge+=.1;this.min_IAF=10*Math.round(1e-6+this.min_IAF/10),this.compressor_count=Math.floor(1e-6+this.compressor_count),this.compressor_count=Math.min(5,this.compressor_count),this.compressor_type==J.NONE?(this.compressor_count=0,this.min_IAF=0):this.compressor_type==J.ALTITUDE_THROTTLE?(this.compressor_count=1,this.min_IAF=0,this.upg_sel[0]=!1,this.upg_sel[1]=!1,this.upg_sel[2]=!1):(this.min_IAF=Math.max(0,this.min_IAF),this.compressor_count=Math.max(1,this.compressor_count))}EngineStats(){const t=new X;switch(t.name=this.name,this.VerifyValues(),t.stats.power=this.CalcPower(),t.stats.mass=this.CalcMass(),t.stats.drag=this.CalcDrag(),t.stats.reliability=Math.floor(-1.999999+this.era_sel+10*(this.quality_fudge+this.material_fudge-2)),t.stats.cooling=this.CalcCooling(),t.oiltank=this.IsRotary(),t.overspeed=this.CalcOverspeed(),t.stats.fuelconsumption=this.CalcFuelConsumption(),t.altitude=this.CalcAltitude(),t.torque=this.CalcTorque(),t.stats.cost=this.CalcCost(),t.pulsejet=!1,t.rumble=0,t.stats.era.push({name:this.name,era:A(H(this.era_sel))}),this.compressor_type){case J.NONE:break;case J.ALTITUDE_THROTTLE:t.stats.cost+=3,t.altitude=49,t.stats.warnings.push({source:A("Altitude Throttle"),warning:A("Altitude Throttle Warning"),color:q.WHITE});break;case J.SUPERCHARGER:{t.stats.power=Math.floor(1e-6+1.25*t.stats.power),t.stats.fuelconsumption=Math.floor(1e-6+1.25*t.stats.fuelconsumption),t.stats.mass=Math.floor(1e-6+1.2*t.stats.mass),t.stats.drag+=this.min_IAF/10,t.stats.cost+=1+Math.floor(1e-6+t.stats.power/50);const e=this.compressor_count-1;t.altitude=29+20*e,t.stats.reliability-=e,t.stats.mass+=e,t.stats.drag+=e,t.stats.cost+=2*e;break}case J.TURBOCHARGER:{t.stats.power=Math.floor(1e-6+1.25*t.stats.power),t.stats.mass=Math.floor(1e-6+1.2*t.stats.mass),t.stats.drag+=this.min_IAF/10*2,t.stats.cost+=1+Math.floor(1e-6+t.stats.power/50);const e=this.compressor_count-1;t.altitude=49+20*e,t.stats.reliability-=e,t.stats.mass+=e,t.stats.drag+=e,t.stats.cost+=2*e,t.stats.reqsections+=1;break}}return(this.compressor_type==J.ALTITUDE_THROTTLE||this.upg_sel[1])&&t.stats.warnings.push({source:A("War Emergency Power"),warning:A("War Emergency Power Warning"),color:q.WHITE}),t.stats.fuelconsumption=Math.max(1,t.stats.fuelconsumption),t.rarity=this.rarity,t}EngineInputs(){const t=new tt;t.engine_type=V.PROPELLER,t.RPM_boost=this.rpm_boost,t.compression=this.compression_ratio,t.compressor_count=this.compressor_count,t.compressor_type=this.compressor_type,t.cyl_per_row=this.num_cyl_per_row,t.displacement=this.engine_displacement,t.era_sel=this.era_sel,t.material_fudge=this.material_fudge,t.min_IdealAlt=this.min_IAF,t.name=this.name,t.quality_fudge=this.quality_fudge,t.rows=this.num_rows,t.type=this.cool_sel;for(let e=0;e<t.upgrades.length;e++)t.upgrades[e]=this.upg_sel[e];return t.rarity=this.rarity,t}fromJSON(t){return this.engine_displacement=t.displacement,this.compression_ratio=t.compression,this.cool_sel=t.type,this.num_cyl_per_row=t.cyl_per_row,this.num_rows=t.rows,this.rpm_boost=t.RPM_boost,this.era_sel=t.era_sel,this.material_fudge=t.material_fudge,this.quality_fudge=t.quality_fudge,this.compressor_type=t.compressor_type,this.compressor_count=t.compressor_count,this.min_IAF=t.min_IAF,this.upg_sel=O(t.upgrades,this.upg_sel.length),t.rarity?this.rarity=t.rarity:this.rarity=Y.CUSTOM,this.EngineStats()}}class Z{constructor(){this.EraTable=[{name:"Pioneer",cost:5,drag:10,mass:10,fuel:4,vibe:2.5,material:2},{name:"WWI",cost:3.5,drag:25,mass:24,fuel:3,vibe:3,material:3},{name:"Roaring 20s",cost:2.5,drag:30,mass:50,fuel:2,vibe:4,material:9},{name:"Coming Storm",cost:2.5,drag:30,mass:50,fuel:2,vibe:4,material:9},{name:"WWII",cost:1.75,drag:40,mass:100,fuel:1,vibe:5,material:24},{name:"Last Hurrah",cost:1.5,drag:50,mass:150,fuel:.7,vibe:6,material:50}],this.ValveTable=[{name:"Valved",scale:1,rumble:1,designcost:2,reliability:1},{name:"Valveless",scale:1.1,rumble:.9,designcost:1,reliability:3}],this.desired_power=1,this.valve_sel=0,this.era_sel=0,this.build_quality=1,this.overall_quality=1,this.starter=!1,this.rarity=Y.CUSTOM}TempMass(){const t=this.EraTable[this.era_sel],e=this.ValveTable[this.valve_sel];var s=0;return this.starter&&(s=1),this.technical_power/t.mass*e.scale+s}CalcMass(){return Math.floor(1e-6+this.TempMass())+1}CalcDrag(){const t=this.EraTable[this.era_sel],e=this.ValveTable[this.valve_sel],s=this.technical_power/t.drag*e.scale+1;return Math.floor(1e-6+this.TempMass()+s+1)}CalcReliability(){const t=this.EraTable[this.era_sel],e=this.ValveTable[this.valve_sel],s=this.desired_power/(t.material*e.reliability*this.overall_quality)-1;return Math.trunc(-s)}CalcFuelConsumption(){const t=this.EraTable[this.era_sel];return Math.floor(1e-6+1.1*this.technical_power*t.fuel)}CalcRumble(){const t=this.EraTable[this.era_sel],e=this.ValveTable[this.valve_sel];return Math.floor(1e-6+this.technical_power*e.rumble/(2*t.vibe))}CalcCost(){const t=this.EraTable[this.era_sel];return Math.floor(1e-6+this.TempMass()*this.build_quality*t.cost)+1+this.CalcRumble()}VerifyValues(){this.desired_power=Math.max(1,Math.floor(this.desired_power)),this.valve_sel=Math.max(0,Math.min(this.ValveTable.length-1,this.valve_sel)),this.era_sel=Math.max(0,Math.min(this.EraTable.length-1,this.era_sel)),this.build_quality=Math.max(.01,this.build_quality),this.overall_quality=Math.max(.01,this.overall_quality),this.build_quality=Math.max(this.build_quality,this.overall_quality),this.overall_quality=this.build_quality}DesignCost(){const t=this.EraTable[this.era_sel],e=this.ValveTable[this.valve_sel];var s=0;this.starter&&(s=3);const i=this.technical_power*t.cost/e.designcost;return Math.floor(1.000001+this.build_quality*(i+s))}EngineInputs(){const t=new tt;var e="";return 0==this.valve_sel&&(e="V"),t.name="Pulsejet P"+e+"-"+this.desired_power.toString()+" ("+this.EraTable[this.era_sel].name+")",t.engine_type=V.PULSEJET,t.era_sel=this.era_sel,t.type=this.valve_sel,t.power=this.desired_power,t.starter=this.starter,t.quality_cost=this.build_quality,t.quality_rely=this.overall_quality,t.rarity=this.rarity,t}EngineStats(){const t=new X;this.VerifyValues();var e="";return 0==this.valve_sel&&(e="V"),t.name="Pulsejet P"+e+"-"+this.desired_power.toString()+" ("+this.EraTable[this.era_sel].name+")",t.stats.power=this.desired_power,this.technical_power=Math.floor(1e-6+4*this.desired_power/3),t.stats.mass=this.CalcMass(),t.stats.drag=this.CalcDrag(),t.stats.reliability=this.CalcReliability(),t.stats.fuelconsumption=this.CalcFuelConsumption(),t.rumble=this.CalcRumble(),t.stats.cost=this.CalcCost(),t.overspeed=100,t.altitude=29,t.pulsejet=!0,t.stats.era.push({name:t.name,era:A(H(this.era_sel))}),t.rarity=this.rarity,t.stats.mass+=t.rumble,t.stats.drag+=t.stats.mass,t}}class K{constructor(){this.TypeTable=[{name:"Turbojet",efficiency:0,massfactor:.8,costfactor:1},{name:"Turbofan",efficiency:0,massfactor:1,costfactor:1},{name:"Propfan",efficiency:-9,massfactor:.8,costfactor:1},{name:"Turboprop",efficiency:-3,massfactor:.8,costfactor:1}],this.EraTable=[{name:"Gen 1 1945-1955",max_temp:1100,efficiency:-2,costfactor:.5},{name:"Gen 1.5 1955-1965",max_temp:1100,efficiency:-1,costfactor:.6},{name:"Gen 2 1965-1975",max_temp:1400,efficiency:-1,costfactor:.7},{name:"Gen 2.5 1975-1985",max_temp:1400,efficiency:0,costfactor:.8},{name:"Gen 3 1985-1995",max_temp:1800,efficiency:0,costfactor:.9},{name:"Gen 3.5 1995-2005",max_temp:1800,efficiency:1,costfactor:1},{name:"Gen 4 2005-2015",max_temp:2e3,efficiency:1,costfactor:1.1},{name:"Gen 4.5 2015-2025",max_temp:2e3,efficiency:2,costfactor:1.2},{name:"Gen 0 Himmilgard",max_temp:800,efficiency:-10,costfactor:.5}],this.name="Default",this.era_sel=0,this.type_sel=0,this.fuel_heat_value=43020,this.flow_adjustment=0,this.diameter=.89,this.compression_ratio=3.5,this.bypass_ratio=0,this.afterburner=!1,this.rarity=Y.CUSTOM}TempMass(){this.EraTable[this.era_sel];const t=this.TypeTable[this.type_sel];return Math.log2(this.compression_ratio)*Math.PI*Math.pow(this.diameter/2,2)*1.75*361.75/(1+this.bypass_ratio/3)*t.massfactor*.75}CalcMass(){var t=this.TempMass();1==this.type_sel&&(t*=.4833*Math.log(this.compression_ratio)-.3168);var e=t/25+95.684*this.flow_adjustment;if(2==this.type_sel||3==this.type_sel){const t=.5-this.flow_adjustment;e=Math.abs(e)*(19.74*Math.pow(t,3)-11.462*t*t+1.0666*t+.4333)}return Math.max(1,Math.floor(1e-6+e))}CalcDrag(){return this.EraTable[this.era_sel],this.TypeTable[this.type_sel],Math.floor(1e-6+5*Math.PI*Math.pow(this.diameter/2,2))}CalcReliability(){this.EraTable[this.era_sel],this.TypeTable[this.type_sel];const t=-Math.log2(this.compression_ratio)-20*this.flow_adjustment;return Math.trunc(t+1)}CalcStages(){const t=this.EraTable[this.era_sel],e=this.TypeTable[this.type_sel],s=108.9,i=288.15,a=1.4,n=Math.PI*Math.pow(this.diameter/2,2),r=.8+(t.efficiency+e.efficiency)/20+this.flow_adjustment,o=s*this.compression_ratio,l=i*Math.pow(o/s,(a-1)/a),h=t.max_temp/i,c=Math.pow(this.compression_ratio,1-1/a),u=340.3*(Math.sqrt(2/(a-1)*(h/(1*c)-1)*(c-1)+h/(1*c)*0*0)-0)*r/1e3,_=Math.pow(1.6,1-1/a),m=340.3*(Math.sqrt(2/(a-1)*(1*_-1))-0)*r/1e3,p=289.8789/this.fuel_heat_value*(t.max_temp/i-l/i);var d=u/(1+this.bypass_ratio)+this.bypass_ratio*m/(1+this.bypass_ratio),g=p/((1+this.bypass_ratio)*d)*1e3;const f=s*n*this.MFP(1)/(1+p);var y=this.compression_ratio*f*Math.sqrt(1/t.max_temp)*r;return(!isFinite(d)||!isFinite(y)||!isFinite(g)||d<0||y<0||g<0)&&(d=0,y=0,g=0),{thrust:d*y,fuel:g*d*y}}MFP(t){return Math.sqrt(1.4/.287058)*t*Math.pow(1+(1.4-1)/2*t*t,2.4/(2*(1.4-1)))}CalcCost(){const t=this.EraTable[this.era_sel],e=this.TypeTable[this.type_sel];return Math.floor(1e-6+.5*this.TempMass()*(1+this.flow_adjustment)*t.costfactor*e.costfactor)+1}VerifyValues(){this.era_sel=Math.max(0,Math.min(this.EraTable.length-1,this.era_sel)),this.type_sel=Math.max(0,Math.min(this.TypeTable.length-1,this.type_sel)),this.flow_adjustment=Math.max(-.5,Math.min(.5,this.flow_adjustment)),this.diameter=Math.max(.1,this.diameter),this.compression_ratio=Math.max(1,this.compression_ratio),this.bypass_ratio=Math.max(0,this.bypass_ratio),this.bypass_ratio=Math.min(20,this.bypass_ratio),this.type_sel>2&&(this.afterburner=!1)}EngineInputs(){const t=new tt;return t.name=this.name,t.engine_type=V.TURBOMACHINERY,t.era_sel=this.era_sel,t.type=this.type_sel,t.flow_adjustment=this.flow_adjustment,t.diameter=this.diameter,t.compression_ratio=this.compression_ratio,t.bypass_ratio=this.bypass_ratio,t.upgrades[0]=this.afterburner,t.rarity=this.rarity,t}GetPitchSpeed(){return this.bypass_ratio>=8?1:this.bypass_ratio>=3.5?1.1:this.bypass_ratio>=1?1.2:1.3}EngineStats(){const t=new X;this.VerifyValues();const e=this.CalcStages();return this.kN=e.thrust,this.tsfc=e.fuel/e.thrust,t.name=this.name,t.stats.power=Math.round(1e3*e.thrust/89),t.stats.mass=this.CalcMass(),t.stats.drag=this.CalcDrag(),t.stats.reliability=this.CalcReliability(),t.stats.fuelconsumption=Math.round(200*e.fuel/1e3),t.rumble=0,t.stats.cost=this.CalcCost(),t.overspeed=100,t.altitude=59,8==this.era_sel?t.stats.era.push({name:t.name,era:A(H(-1))}):t.stats.era.push({name:t.name,era:A(H(5))}),t.stats.pitchspeed=this.GetPitchSpeed(),t.rarity=this.rarity,t}}class ${constructor(){this.EraTable=[{name:"Pioneer",draw:3,drawfactor:.4,massfactor:.4,reliability:-1,costfactor:.4,overspeed:20},{name:"WWI",draw:1,drawfactor:.4,massfactor:1/3,reliability:0,costfactor:1/2.25,overspeed:25},{name:"Roaring 20s",draw:1,drawfactor:2/7,massfactor:2/7,reliability:1,costfactor:.5,overspeed:30},{name:"Coming Storm",draw:0,drawfactor:2/7,massfactor:1/4,reliability:2,costfactor:1/1.9,overspeed:35},{name:"WWII",draw:0,drawfactor:1/4,massfactor:.2,reliability:3,costfactor:1/1.8,overspeed:40},{name:"Last Hurrah",draw:0,drawfactor:.2,massfactor:1/6,reliability:4,costfactor:1/1.75,overspeed:45}],this.Winding=[{name:"Aluminum",drawmod:1.1,mass:-2,drag:1,costfactor:1,reliabilty:0},{name:"Copper",drawmod:1,mass:0,drag:0,costfactor:1,reliabilty:0},{name:"Silver",drawmod:.95,mass:1,drag:0,costfactor:1.1,reliabilty:0},{name:"Electrum",drawmod:.9,mass:2,drag:0,costfactor:1.3,reliabilty:1},{name:"Platinum",drawmod:.75,mass:3,drag:0,costfactor:2,reliabilty:2},{name:"Screamer Sinew",drawmod:.9,mass:0,drag:1,costfactor:1.75,reliabilty:4},{name:"Lightning Sprite Ephemera",drawmod:.5,mass:-2,drag:-2,costfactor:2,reliabilty:-3}],this.name="Default",this.era_sel=0,this.winding_sel=0,this.power=1,this.chonk=1,this.quality_fudge=1}EraMass(){const t=this.EraTable[this.era_sel];return Math.floor(1e-6+t.massfactor*this.power)}CalcMass(){const t=this.Winding[this.winding_sel];return Math.max(0,Math.floor(1e-6+this.EraMass()+t.mass))}CalcDrag(){const t=this.power/10,e=this.Winding[this.winding_sel].drag;return Math.max(1,Math.floor(1.000001+t+this.chonk+e))}CalcOverspeed(){const t=this.chonk/2,e=7.5*(this.quality_fudge-1);return Math.ceil(-1e-6+this.EraTable[this.era_sel].overspeed-t+e)}CalcDraw(){const t=this.EraTable[this.era_sel],e=this.Winding[this.winding_sel],s=t.draw+Math.ceil(this.power*t.drawfactor-1e-6);return Math.ceil(s*e.drawmod-1e-6)}CalcReliability(){const t=this.EraTable[this.era_sel],e=this.Winding[this.winding_sel],s=this.power/10,i=5*(this.quality_fudge-1);return Math.trunc(1e-6+t.reliability+this.chonk-s+i)+e.reliabilty}CalcTorque(){const t=1+this.EraMass()/10+this.chonk/4;return Math.max(1,Math.floor(1e-6+t))}CalcCost(){const t=this.EraTable[this.era_sel],e=this.Winding[this.winding_sel],s=t.costfactor*this.power,i=Math.ceil(s*Math.max(.5,this.quality_fudge)-1e-6);return Math.ceil(i*e.costfactor-1e-6)}VerifyValues(){this.era_sel=Math.max(0,Math.min(this.EraTable.length-1,this.era_sel)),this.winding_sel=Math.max(0,Math.min(this.Winding.length-1,this.winding_sel)),this.power=Math.max(1,this.power),this.power=Math.floor(1e-6+this.power),this.chonk=Math.floor(1e-6+this.chonk),this.chonk=Math.max(-10,this.chonk),this.chonk=Math.min(10,this.chonk),this.quality_fudge=Math.max(.5,this.quality_fudge),this.quality_fudge=Math.min(2,this.quality_fudge)}EngineStats(){var t=new X;return t.name=this.name,this.VerifyValues(),t.stats.power=this.power,t.stats.mass=this.CalcMass(),t.stats.drag=this.CalcDrag(),t.stats.reliability=this.CalcReliability(),t.stats.cooling=0,t.oiltank=!1,t.overspeed=this.CalcOverspeed(),t.stats.fuelconsumption=0,t.stats.charge=-this.CalcDraw(),t.altitude=100,t.torque=this.CalcTorque(),t.stats.cost=this.CalcCost(),t.pulsejet=!1,t.rumble=0,t.stats.era.push({name:this.name,era:A(H(this.era_sel))}),t}EngineInputs(){var t=new tt;return t.engine_type=V.ELECTRIC,t.name=this.name,t.power=this.power,t.era_sel=this.era_sel,t.winding_sel=this.winding_sel,t.material_fudge=this.chonk,t.quality_fudge=this.quality_fudge,t}}!function(t){t[t.PROPELLER=0]="PROPELLER",t[t.PULSEJET=1]="PULSEJET",t[t.TURBOMACHINERY=2]="TURBOMACHINERY",t[t.ELECTRIC=3]="ELECTRIC"}(V||(V={})),function(t){t[t.CUSTOM=0]="CUSTOM",t[t.COMMON=1]="COMMON",t[t.RARE=2]="RARE",t[t.LEGENDARY=3]="LEGENDARY"}(Y||(Y={}));class tt{constructor(t){this.name="Default",this.engine_type=V.PROPELLER,this.type=0,this.era_sel=0,this.rarity=Y.CUSTOM,this.displacement=0,this.compression=0,this.cyl_per_row=0,this.rows=0,this.RPM_boost=0,this.material_fudge=0,this.quality_fudge=0,this.compressor_type=0,this.compressor_count=0,this.min_IdealAlt=0,this.upgrades=[...Array(4).fill(!1)],this.power=0,this.quality_cost=0,this.quality_rely=0,this.starter=!1,this.flow_adjustment=0,this.diameter=0,this.compression_ratio=0,this.bypass_ratio=0,this.winding_sel=0,t&&this.fromJSON(t)}toJSON(){switch(this.engine_type){case V.PROPELLER:return{name:this.name,engine_type:this.engine_type,type:this.type,era_sel:this.era_sel,displacement:this.displacement,compression:this.compression,cyl_per_row:this.cyl_per_row,rows:this.rows,RPM_boost:this.RPM_boost,material_fudge:this.material_fudge,quality_fudge:this.quality_fudge,compressor_type:this.compressor_type,compressor_count:this.compressor_count,min_IAF:this.min_IdealAlt,upgrades:this.upgrades,rarity:this.rarity};case V.PULSEJET:return{name:this.name,engine_type:this.engine_type,type:this.type,era_sel:this.era_sel,power:this.power,quality_cost:this.quality_cost,quality_rely:this.quality_rely,starter:this.starter,rarity:this.rarity};case V.TURBOMACHINERY:return{name:this.name,engine_type:this.engine_type,type:this.type,era_sel:this.era_sel,flow_adjustment:this.flow_adjustment,diameter:this.diameter,compression_ratio:this.compression_ratio,bypass_ratio:this.bypass_ratio,upgrades:this.upgrades,rarity:this.rarity};case V.ELECTRIC:return{name:this.name,engine_type:this.engine_type,power:this.power,era_sel:this.era_sel,winding_sel:this.winding_sel,diameter:this.diameter,material_fudge:this.material_fudge,quality_fudge:this.quality_fudge};default:throw"EngineInputs.toJSON: Oh dear, you have a new engine type."}}fromJSON(t){switch(this.name=t.name,this.engine_type=t.engine_type,this.type=t.type,this.era_sel=t.era_sel,this.engine_type){case V.PROPELLER:this.displacement=t.displacement,this.compression=t.compression,this.cyl_per_row=t.cyl_per_row,this.rows=t.rows,this.RPM_boost=t.RPM_boost,this.material_fudge=t.material_fudge,this.quality_fudge=t.quality_fudge,this.compressor_type=t.compressor_type,this.compressor_count=t.compressor_count,this.min_IdealAlt=t.min_IAF,this.upgrades=O(t.upgrades,this.upgrades.length);break;case V.PULSEJET:this.power=t.power,this.quality_cost=t.quality_cost,this.quality_rely=t.quality_rely,this.starter=t.starter;break;case V.TURBOMACHINERY:this.flow_adjustment=t.flow_adjustment,this.diameter=t.diameter,this.compression_ratio=t.compression_ratio,this.bypass_ratio=t.bypass_ratio,this.upgrades=t.upgrades;break;case V.ELECTRIC:this.power=t.power,this.winding_sel=t.winding_sel,this.material_fudge=t.material_fudge,this.quality_fudge=t.quality_fudge;break;default:throw"EngineInputs.fromJSON: Oh dear, you have a new engine type."}t.rarity?this.rarity=t.rarity:this.rarity=Y.CUSTOM}serialize(t){switch(t.PushString(this.name),t.PushNum(this.engine_type),t.PushNum(this.type),t.PushNum(this.era_sel),this.engine_type){case V.PROPELLER:t.PushFloat(this.displacement),t.PushFloat(this.compression),t.PushNum(this.cyl_per_row),t.PushNum(this.rows),t.PushFloat(this.RPM_boost),t.PushFloat(this.material_fudge),t.PushFloat(this.quality_fudge),t.PushNum(this.compressor_type),t.PushNum(this.compressor_count),t.PushNum(this.min_IdealAlt),t.PushBoolArr(this.upgrades);break;case V.PULSEJET:t.PushNum(this.power),t.PushFloat(this.quality_cost),t.PushFloat(this.quality_rely),t.PushBool(this.starter);break;case V.TURBOMACHINERY:t.PushFloat(this.flow_adjustment),t.PushFloat(this.diameter),t.PushFloat(this.compression_ratio),t.PushFloat(this.bypass_ratio),t.PushBoolArr(this.upgrades);break;case V.ELECTRIC:t.PushNum(this.power),t.PushNum(this.winding_sel),t.PushNum(this.material_fudge),t.PushFloat(this.quality_fudge);break;default:throw"EngineInputs.serialize: Oh dear, you have a new engine type."}t.PushNum(this.rarity)}deserialize(t){switch(this.name=t.GetString(),this.engine_type=t.GetNum(),this.type=t.GetNum(),this.era_sel=t.GetNum(),this.engine_type){case V.PROPELLER:this.displacement=t.GetFloat(),this.compression=t.GetFloat(),this.cyl_per_row=t.GetNum(),this.rows=t.GetNum(),this.RPM_boost=t.GetFloat(),this.material_fudge=t.GetFloat(),this.quality_fudge=t.GetFloat(),this.compressor_type=t.GetNum(),this.compressor_count=t.GetNum(),this.min_IdealAlt=t.GetNum(),this.upgrades=t.GetBoolArr(this.upgrades.length);break;case V.PULSEJET:this.power=t.GetNum(),this.quality_cost=t.GetFloat(),this.quality_rely=t.GetFloat(),this.starter=t.GetBool();break;case V.TURBOMACHINERY:this.flow_adjustment=t.GetFloat(),this.diameter=t.GetFloat(),this.compression_ratio=t.GetFloat(),this.bypass_ratio=t.GetFloat(),this.upgrades=t.GetBoolArr(this.upgrades.length);break;case V.ELECTRIC:this.power=t.GetNum(),this.winding_sel=t.GetNum(),this.material_fudge=t.GetNum(),this.quality_fudge=t.GetFloat();break;default:throw"EngineInputs.deserialize: Oh dear, you have a new engine type."}t.version>12.35?this.rarity=t.GetNum():this.rarity=Y.CUSTOM}PartStats(){switch(this.engine_type){case V.PROPELLER:{const t=new Q;return t.name=this.name,t.cool_sel=this.type,t.era_sel=this.era_sel,t.engine_displacement=this.displacement,t.compression_ratio=this.compression,t.num_cyl_per_row=this.cyl_per_row,t.num_rows=this.rows,t.rpm_boost=this.RPM_boost,t.material_fudge=this.material_fudge,t.quality_fudge=this.quality_fudge,t.compressor_type=this.compressor_type,t.compressor_count=this.compressor_count,t.min_IAF=this.min_IdealAlt,t.upg_sel=this.upgrades,t.rarity=this.rarity,t.EngineStats()}case V.PULSEJET:{const t=new Z;t.valve_sel=this.type,t.era_sel=this.era_sel,t.desired_power=this.power,t.build_quality=this.quality_cost,t.overall_quality=this.quality_rely,t.starter=this.starter,t.rarity=this.rarity;const e=t.EngineStats();return this.name=e.name,e}case V.TURBOMACHINERY:{const t=new K;return t.type_sel=this.type,t.era_sel=this.era_sel,t.flow_adjustment=this.flow_adjustment,t.diameter=this.diameter,t.compression_ratio=this.compression_ratio,t.bypass_ratio=this.bypass_ratio,t.afterburner=this.upgrades[0],t.name=this.name,t.rarity=this.rarity,t.EngineStats()}case V.ELECTRIC:{const t=new $;return t.era_sel=this.era_sel,t.winding_sel=this.winding_sel,t.power=this.power,t.chonk=this.material_fudge,t.quality_fudge=this.quality_fudge,t.name=this.name,t.EngineStats()}default:throw"EngineInputs.PartStats: Oh dear, you have a new engine type."}}Equal(t){return this.name==t.name}Clone(){const t=new tt;t.name=this.name,t.engine_type=this.engine_type,t.type=this.type,t.era_sel=this.era_sel,t.displacement=this.displacement,t.compression=this.compression,t.cyl_per_row=this.cyl_per_row,t.rows=this.rows,t.RPM_boost=this.RPM_boost,t.material_fudge=this.material_fudge,t.quality_fudge=this.quality_fudge,t.compressor_type=this.compressor_type,t.compressor_count=this.compressor_count,t.min_IdealAlt=this.min_IdealAlt,t.power=this.power,t.quality_cost=this.quality_cost,t.quality_rely=this.quality_rely,t.starter=this.starter;for(let e=0;e<this.upgrades.length;e++)t.upgrades[e]=this.upgrades[e];return t.flow_adjustment=this.flow_adjustment,t.diameter=this.diameter,t.compression_ratio=this.compression_ratio,t.bypass_ratio=this.bypass_ratio,t.winding_sel=this.winding_sel,t.rarity=this.rarity,t}}const et=JSON.parse('{"l":[{"name":"Custom","engines":[{"name":"Bentley BR.1 150hp","engine_type":0,"type":2,"era_sel":1,"displacement":17.1,"compression":4.9,"cyl_per_row":9,"rows":1,"RPM_boost":1,"material_fudge":1,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Renault V8 70hp","engine_type":0,"type":0,"era_sel":1,"displacement":7,"compression":4,"cyl_per_row":2,"rows":4,"RPM_boost":1.1,"material_fudge":1.4,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]}]},{"name":"Early-WWI","engines":[{"name":"Aeromarine K-6 100hp","engine_type":0,"type":0,"era_sel":1,"displacement":7.36,"compression":4.7,"cyl_per_row":1,"rows":6,"RPM_boost":1.1,"material_fudge":1.2,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Anzani 10 Cylinder 110hp","engine_type":0,"type":1,"era_sel":1,"displacement":12,"compression":4.85,"cyl_per_row":5,"rows":2,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Anzani 10 Cylinder 80hp","engine_type":0,"type":1,"era_sel":1,"displacement":8.27,"compression":4.85,"cyl_per_row":5,"rows":2,"RPM_boost":0.9,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Anzani 6 cylinder 60hp","engine_type":0,"type":1,"era_sel":1,"displacement":6.23,"compression":4.5,"cyl_per_row":3,"rows":2,"RPM_boost":1,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Argus As II 120hp","engine_type":0,"type":0,"era_sel":1,"displacement":10.353,"compression":5,"cyl_per_row":1,"rows":6,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Austro-Daimler 6 120hp","engine_type":0,"type":0,"era_sel":1,"displacement":13.8,"compression":4.85,"cyl_per_row":1,"rows":6,"RPM_boost":0.65,"material_fudge":1.1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Benz Bz.III 150hp","engine_type":0,"type":0,"era_sel":1,"displacement":15.4,"compression":4.7,"cyl_per_row":1,"rows":6,"RPM_boost":0.75,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Clerget 7Z 95hp","engine_type":0,"type":2,"era_sel":1,"displacement":11.88,"compression":4.3,"cyl_per_row":7,"rows":1,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":1.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Clerget 9Bf 140hp","engine_type":0,"type":2,"era_sel":1,"displacement":17.46,"compression":4.85,"cyl_per_row":9,"rows":1,"RPM_boost":0.9,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Gnome 14 Double Lambda 160hp","engine_type":0,"type":2,"era_sel":1,"displacement":23.8,"compression":3.87,"cyl_per_row":7,"rows":2,"RPM_boost":1.2,"material_fudge":0.8,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Gnome 7 Lambda 70hp","engine_type":0,"type":2,"era_sel":1,"displacement":11.9,"compression":3.75,"cyl_per_row":7,"rows":1,"RPM_boost":1.1,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Gnome 7 Lambda 80hp","engine_type":0,"type":2,"era_sel":1,"displacement":11.9,"compression":3.87,"cyl_per_row":7,"rows":1,"RPM_boost":1.2,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Gnome 7 Omega 50hp","engine_type":0,"type":2,"era_sel":0,"displacement":7.7,"compression":4,"cyl_per_row":7,"rows":1,"RPM_boost":1.49,"material_fudge":1,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Gnome monosoupape 9B 100hp","engine_type":0,"type":2,"era_sel":1,"displacement":16.28,"compression":4.5,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":0.8,"quality_fudge":1.6,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Le Rhone 9C 90hp","engine_type":0,"type":2,"era_sel":1,"displacement":10.89,"compression":4.8,"cyl_per_row":9,"rows":1,"RPM_boost":1,"material_fudge":1.1,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Mercedes D.II 120hp","engine_type":0,"type":0,"era_sel":1,"displacement":9.4,"compression":4.5,"cyl_per_row":1,"rows":6,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Mercedes D.III 150hp","engine_type":0,"type":0,"era_sel":1,"displacement":15,"compression":4.3,"cyl_per_row":1,"rows":6,"RPM_boost":0.95,"material_fudge":0.9,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"RAF 1a 90hp","engine_type":0,"type":0,"era_sel":1,"displacement":9.88,"compression":4.3,"cyl_per_row":2,"rows":4,"RPM_boost":0.9,"material_fudge":1.3,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"U.I 100hp","engine_type":0,"type":2,"era_sel":1,"displacement":16.28,"compression":4.5,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":0.8,"quality_fudge":1.6,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"U.I 110hp","engine_type":0,"type":2,"era_sel":1,"displacement":15.84,"compression":4.85,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]}]},{"name":"Late-WWI","engines":[{"name":"Bentley BR.2 230hp","engine_type":0,"type":2,"era_sel":1,"displacement":24.93,"compression":5.2,"cyl_per_row":9,"rows":1,"RPM_boost":0.9,"material_fudge":0.8,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Clerget 11EB 200hp","engine_type":0,"type":2,"era_sel":1,"displacement":21.49,"compression":5.1,"cyl_per_row":11,"rows":1,"RPM_boost":1,"material_fudge":1,"quality_fudge":1.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Clerget 16X 420hp","engine_type":0,"type":0,"era_sel":1,"displacement":32.53333333,"compression":5,"cyl_per_row":4,"rows":4,"RPM_boost":0.87,"material_fudge":0.6,"quality_fudge":1.5,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Hispano-Suiza 8F 300hp","engine_type":0,"type":0,"era_sel":1,"displacement":18.4,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":0.98,"material_fudge":0.7,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Mercedes D.IIIav 200hp","engine_type":0,"type":0,"era_sel":1,"displacement":15,"compression":4.64,"cyl_per_row":1,"rows":6,"RPM_boost":1.05,"material_fudge":0.9,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Napier Lion II 480hp \'18","engine_type":0,"type":0,"era_sel":1,"displacement":24,"compression":5.8,"cyl_per_row":3,"rows":4,"RPM_boost":1,"material_fudge":0.9,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Rolls-Royce Eagle III 250hp","engine_type":0,"type":0,"era_sel":1,"displacement":24,"compression":4.9,"cyl_per_row":2,"rows":6,"RPM_boost":0.75,"material_fudge":0.7,"quality_fudge":1.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Rolls-Royce Eagle VIII 360hp","engine_type":0,"type":0,"era_sel":1,"displacement":20,"compression":6,"cyl_per_row":2,"rows":6,"RPM_boost":0.85,"material_fudge":0.7,"quality_fudge":1.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Rolls-Royce Hawk 110hp","engine_type":0,"type":0,"era_sel":1,"displacement":7.41,"compression":5.1,"cyl_per_row":1,"rows":6,"RPM_boost":1,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Sunbeam Dyak 100hp","engine_type":0,"type":0,"era_sel":1,"displacement":8.800000002,"compression":5,"cyl_per_row":1,"rows":6,"RPM_boost":0.8,"material_fudge":0.9,"quality_fudge":1.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Ur.III 150hp","engine_type":0,"type":2,"era_sel":1,"displacement":17.6,"compression":5,"cyl_per_row":11,"rows":1,"RPM_boost":0.9,"material_fudge":1,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]}]},{"name":"Mid-WWI","engines":[{"name":"Argus As III 190hp","engine_type":0,"type":0,"era_sel":1,"displacement":15.9,"compression":5,"cyl_per_row":1,"rows":6,"RPM_boost":0.8,"material_fudge":0.6,"quality_fudge":1.5,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Austro-Daimler 6 200hp","engine_type":0,"type":0,"era_sel":1,"displacement":15,"compression":5,"cyl_per_row":1,"rows":6,"RPM_boost":0.9,"material_fudge":0.9,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Beardmore 160hp","engine_type":0,"type":0,"era_sel":1,"displacement":16.635,"compression":4.5,"cyl_per_row":1,"rows":6,"RPM_boost":0.8,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Bz.IV 200hp","engine_type":0,"type":0,"era_sel":1,"displacement":18.6,"compression":4.9,"cyl_per_row":1,"rows":6,"RPM_boost":0.75,"material_fudge":0.9,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Clerget 9B 130hp","engine_type":0,"type":2,"era_sel":1,"displacement":16.2,"compression":4.85,"cyl_per_row":9,"rows":1,"RPM_boost":0.9,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Cosmos Mercury","engine_type":0,"type":1,"era_sel":1,"displacement":19.6,"compression":5.3,"cyl_per_row":7,"rows":2,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":0.6,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Curtiss K-12 375hp","engine_type":0,"type":0,"era_sel":1,"displacement":18.77,"compression":5,"cyl_per_row":2,"rows":6,"RPM_boost":1.33,"material_fudge":0.8,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Curtiss OXX-6","engine_type":0,"type":0,"era_sel":1,"displacement":9.3,"compression":4.92,"cyl_per_row":2,"rows":4,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Fiat A.12 200hp","engine_type":0,"type":0,"era_sel":1,"displacement":21.6,"compression":4.5,"cyl_per_row":1,"rows":6,"RPM_boost":0.8,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Gnome 9B Monosoupape 110hp","engine_type":0,"type":2,"era_sel":1,"displacement":15.84,"compression":4.85,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Gnome 9N Monosoupape 160hp","engine_type":0,"type":2,"era_sel":1,"displacement":15.84,"compression":5.1,"cyl_per_row":9,"rows":1,"RPM_boost":1.05,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Hispano-Suiza 8Aa 150hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.2,"compression":4.8,"cyl_per_row":2,"rows":4,"RPM_boost":1,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Hispano-Suiza 8Ab 180hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.2,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Hispano-Suiza 8B 200hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.2,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Hispano-Suiza 8Bc 220hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.2,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":1.2,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Le Rhone 9Ja 110hp","engine_type":0,"type":2,"era_sel":1,"displacement":14.4,"compression":5,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Le Rhone 9Jb 130hp","engine_type":0,"type":2,"era_sel":1,"displacement":14.4,"compression":5,"cyl_per_row":9,"rows":1,"RPM_boost":1,"material_fudge":1,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Liberty L-12 400hp","engine_type":0,"type":0,"era_sel":2,"displacement":27,"compression":5.4,"cyl_per_row":2,"rows":6,"RPM_boost":0.64,"material_fudge":0.6,"quality_fudge":1.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Lorraine 12Da 400hp","engine_type":0,"type":0,"era_sel":1,"displacement":24.4,"compression":5,"cyl_per_row":2,"rows":6,"RPM_boost":1.1,"material_fudge":0.7,"quality_fudge":1.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Mercedes D.IIIa 170hp","engine_type":0,"type":0,"era_sel":1,"displacement":15,"compression":4.5,"cyl_per_row":1,"rows":6,"RPM_boost":0.95,"material_fudge":0.9,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Mercedes D.IIIa 180hp","engine_type":0,"type":0,"era_sel":1,"displacement":15,"compression":4.64,"cyl_per_row":1,"rows":6,"RPM_boost":0.95,"material_fudge":0.9,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Mercedes D.IVa 250hp","engine_type":0,"type":0,"era_sel":1,"displacement":21.6,"compression":4.94,"cyl_per_row":1,"rows":6,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Rolls-Royce Falcon III 290hp","engine_type":0,"type":0,"era_sel":1,"displacement":14.4,"compression":5.3,"cyl_per_row":2,"rows":6,"RPM_boost":1.2,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Rolls-Royce Hawk 80hp","engine_type":0,"type":0,"era_sel":1,"displacement":7.41,"compression":5.1,"cyl_per_row":1,"rows":6,"RPM_boost":0.75,"material_fudge":1,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Sunbeam Arab 208hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.76,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":1.1,"material_fudge":1.2,"quality_fudge":0.9,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Sunbeam Maori II 260hp","engine_type":0,"type":0,"era_sel":1,"displacement":12.27,"compression":5.3,"cyl_per_row":2,"rows":6,"RPM_boost":1.3,"material_fudge":1.7,"quality_fudge":0.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Ur.II 110hp","engine_type":0,"type":2,"era_sel":1,"displacement":14.4,"compression":5,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]}]},{"name":"Pre-WWI","engines":[{"name":"Mercedes E4F 70hp","engine_type":0,"type":0,"era_sel":1,"displacement":6.3,"compression":4,"cyl_per_row":1,"rows":4,"RPM_boost":1.2,"material_fudge":1.3,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]}]},{"name":"Coming Storm","engines":[{"name":"Allison V-1710-85 1200hp","engine_type":0,"type":0,"era_sel":3,"displacement":28,"compression":6.65,"cyl_per_row":2,"rows":6,"RPM_boost":0.9,"material_fudge":1,"quality_fudge":0.8,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Bristol Pegasus XVIII 835hp","engine_type":0,"type":1,"era_sel":2,"displacement":28.7,"compression":6.25,"cyl_per_row":9,"rows":1,"RPM_boost":0.95,"material_fudge":1.2,"quality_fudge":0.8,"compressor_type":2,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Daimler-Benz 601ARJ 1775hp","engine_type":0,"type":0,"era_sel":3,"displacement":33.93,"compression":6.9,"cyl_per_row":2,"rows":6,"RPM_boost":0.84,"material_fudge":0.6,"quality_fudge":0.7,"compressor_type":2,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,true,false]}]},{"name":"Roaring 20s","engines":[{"name":"Argus As 5 1500hp","engine_type":0,"type":0,"era_sel":2,"displacement":94.1,"compression":5.6,"cyl_per_row":6,"rows":4,"RPM_boost":0.638,"material_fudge":0.4,"quality_fudge":1.6,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Brguet Quadrimoteur Type B H-32 970hp","engine_type":0,"type":0,"era_sel":2,"displacement":48.64,"compression":5,"cyl_per_row":4,"rows":8,"RPM_boost":1,"material_fudge":0.7,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Napier Lion II 480hp \'20","engine_type":0,"type":0,"era_sel":2,"displacement":24,"compression":5.8,"cyl_per_row":3,"rows":4,"RPM_boost":0.75,"material_fudge":0.9,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Napier Lion XI 580hp","engine_type":0,"type":0,"era_sel":2,"displacement":24,"compression":6,"cyl_per_row":4,"rows":3,"RPM_boost":1,"material_fudge":1.1,"quality_fudge":0.9,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]}]},{"name":"WWII","engines":[{"name":"Klimov M-105PF 1230hp","engine_type":0,"type":0,"era_sel":3,"displacement":35.101,"compression":7,"cyl_per_row":2,"rows":6,"RPM_boost":0.55,"material_fudge":0.6,"quality_fudge":1.4,"compressor_type":2,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Rolls Royce Merlin 46 930hp","engine_type":0,"type":0,"era_sel":3,"displacement":27,"compression":5.55,"cyl_per_row":2,"rows":6,"RPM_boost":0.98,"material_fudge":0.8,"quality_fudge":1,"compressor_type":2,"compressor_count":1,"min_IAF":30,"upgrades":[false,true,true,false]}]},{"name":"ACDQ","engines":[{"name":"2A-Series 4-Cylinder Inline","engine_type":0,"type":0,"era_sel":0,"displacement":16,"compression":4.5,"cyl_per_row":1,"rows":2,"RPM_boost":0.5,"material_fudge":0.8,"quality_fudge":1.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"F-Series 6-Cylinder Inline","engine_type":0,"type":0,"era_sel":0,"displacement":17,"compression":4.3,"cyl_per_row":1,"rows":6,"RPM_boost":1.07,"material_fudge":0.7,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"G-Series 9-Cylinder Rotary Engine","engine_type":0,"type":2,"era_sel":0,"displacement":16,"compression":4.7,"cyl_per_row":9,"rows":1,"RPM_boost":1.04,"material_fudge":1,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Hartmann H.IIc Straight-6 Engine","engine_type":0,"type":0,"era_sel":1,"displacement":12,"compression":4.7,"cyl_per_row":1,"rows":6,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Hornet R-3 Boxer 6-Cylinder","engine_type":0,"type":0,"era_sel":1,"displacement":10,"compression":5,"cyl_per_row":2,"rows":3,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Maclean-King Tiger MK.1 V-12 Engine","engine_type":0,"type":0,"era_sel":1,"displacement":17,"compression":5,"cyl_per_row":2,"rows":6,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Ogre-Z Beta V-6","engine_type":0,"type":0,"era_sel":0,"displacement":11,"compression":5,"cyl_per_row":1,"rows":6,"RPM_boost":1,"material_fudge":0.7,"quality_fudge":0.8,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"Pulsejet PV-12 (Pioneer)","engine_type":1,"type":0,"era_sel":0,"power":12,"quality_cost":1.1,"quality_rely":1.1,"starter":false},{"name":"Pulsejet PV-20 (Pioneer)","engine_type":1,"type":0,"era_sel":0,"power":20,"quality_cost":1.1,"quality_rely":1.1,"starter":false},{"name":"Pulsejet PV-8 (Pioneer)","engine_type":1,"type":0,"era_sel":0,"power":8,"quality_cost":1.1,"quality_rely":1.1,"starter":false},{"name":"Seguin 110 Sigma 7-Cylinder Rotary Engine","engine_type":0,"type":2,"era_sel":1,"displacement":14,"compression":4.5,"cyl_per_row":7,"rows":1,"RPM_boost":1.05,"material_fudge":1,"quality_fudge":1.5,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"SuperPegasus 7-Cylinder Rotary Engine","engine_type":0,"type":2,"era_sel":0,"displacement":13.5,"compression":5,"cyl_per_row":7,"rows":1,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},{"name":"TurboGoblin 8-Cylinder Semi-Radial","engine_type":0,"type":4,"era_sel":0,"displacement":13,"compression":5.5,"cyl_per_row":8,"rows":1,"RPM_boost":1,"material_fudge":0.9,"quality_fudge":0.6,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]}]},{"name":"Himmilgard Pulsejet","engines":[{"name":"Pulsejet PV-5 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":5,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-6 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":6,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-7 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":7,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-8 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":8,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-9 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":9,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-10 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":10,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-11 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":11,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-12 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":12,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-13 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":13,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-14 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":14,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1},{"name":"Pulsejet PV-15 (WWI)","engine_type":1,"type":0,"era_sel":1,"power":15,"quality_cost":1,"quality_rely":1,"starter":false,"rarity":1}]},{"name":"Himmilgard Liquid Radial","engines":[{"name":"Einsort MM 140hp","engine_type":0,"type":5,"era_sel":1,"displacement":14.72,"compression":5,"cyl_per_row":9,"rows":1,"RPM_boost":0.78,"material_fudge":0.9,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Einsort MR 150hp","engine_type":0,"type":5,"era_sel":1,"displacement":15.46,"compression":5,"cyl_per_row":9,"rows":1,"RPM_boost":0.78,"material_fudge":0.9,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Gernsback Motor 0005","engine_type":0,"type":5,"era_sel":1,"displacement":12,"compression":6,"cyl_per_row":5,"rows":2,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3}]},{"name":"Himmilgard Liquid Cooled","engines":[{"name":"Meier Brenjunge 200hp","engine_type":0,"type":0,"era_sel":1,"displacement":13.5,"compression":5.4,"cyl_per_row":1,"rows":6,"RPM_boost":0.86,"material_fudge":0.8,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Bertha F1166 120hp","engine_type":0,"type":0,"era_sel":1,"displacement":9.4,"compression":4.5,"cyl_per_row":1,"rows":6,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Bertha F1466 170hp","engine_type":0,"type":0,"era_sel":1,"displacement":15,"compression":4.64,"cyl_per_row":1,"rows":6,"RPM_boost":0.9,"material_fudge":0.9,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Bertha F1466 ber 180hp","engine_type":0,"type":0,"era_sel":1,"displacement":15,"compression":4.64,"cyl_per_row":1,"rows":6,"RPM_boost":0.95,"material_fudge":0.9,"quality_fudge":0.9,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Bertha F2000 250hp","engine_type":0,"type":0,"era_sel":1,"displacement":21.6,"compression":4.94,"cyl_per_row":1,"rows":6,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Brandt Krieger I 370hp","engine_type":0,"type":0,"era_sel":1,"displacement":18.77,"compression":5.5,"cyl_per_row":2,"rows":6,"RPM_boost":1.1,"material_fudge":0.7,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3},{"name":"Brandt Kurier XVI 180hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.2,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Fleischmann F10 250hp","engine_type":0,"type":0,"era_sel":1,"displacement":21.71,"compression":4.3,"cyl_per_row":1,"rows":6,"RPM_boost":1.05,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Fleischmann F10 300hp","engine_type":0,"type":0,"era_sel":1,"displacement":21.71,"compression":4.75,"cyl_per_row":1,"rows":6,"RPM_boost":1.05,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Fokker Fungizidherstellung Typ 247 160hp","engine_type":0,"type":0,"era_sel":1,"displacement":14.3,"compression":4.8,"cyl_per_row":1,"rows":6,"RPM_boost":0.85,"material_fudge":0.8,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Meier Ochs 2 160hp","engine_type":0,"type":0,"era_sel":1,"displacement":16.6,"compression":4.5,"cyl_per_row":1,"rows":6,"RPM_boost":0.84,"material_fudge":0.7,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Meier Windhund 70hp","engine_type":0,"type":0,"era_sel":1,"displacement":6.3,"compression":4,"cyl_per_row":1,"rows":4,"RPM_boost":1.2,"material_fudge":1.3,"quality_fudge":0.8,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Nationales Motorbro Arbeiter XVII 170hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.7,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,true],"rarity":2},{"name":"Nationales Motorbro D-1140 220hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.4,"compression":5.5,"cyl_per_row":2,"rows":6,"RPM_boost":1.1,"material_fudge":1.5,"quality_fudge":0.6,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Nationales Motorbro D-760 150hp","engine_type":0,"type":0,"era_sel":1,"displacement":7.6,"compression":5.5,"cyl_per_row":2,"rows":4,"RPM_boost":1.1,"material_fudge":1.5,"quality_fudge":0.6,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Nationales Motorbro D-760tgl 180hp","engine_type":0,"type":0,"era_sel":1,"displacement":7.6,"compression":5.5,"cyl_per_row":2,"rows":4,"RPM_boost":1.1,"material_fudge":1.5,"quality_fudge":0.4,"compressor_type":3,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Nationales Motorbro D-840 160hp","engine_type":0,"type":0,"era_sel":1,"displacement":8.4,"compression":5.5,"cyl_per_row":2,"rows":4,"RPM_boost":1.05,"material_fudge":1.5,"quality_fudge":0.6,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Nationales Motorbro Kurier XXI 210hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.7,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3},{"name":"SAM Kurier XII 150hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.2,"compression":4.8,"cyl_per_row":2,"rows":4,"RPM_boost":1,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"SAM Kurier XX 200hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.2,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":1.1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"SAM Transporter I 300hp","engine_type":0,"type":0,"era_sel":1,"displacement":22.08,"compression":4.5,"cyl_per_row":2,"rows":6,"RPM_boost":1.15,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"SAM Transporter III 320hp","engine_type":0,"type":0,"era_sel":1,"displacement":22.08,"compression":4.5,"cyl_per_row":2,"rows":6,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":3,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"SAM Transporter V 350hp","engine_type":0,"type":0,"era_sel":1,"displacement":22.08,"compression":4.75,"cyl_per_row":2,"rows":6,"RPM_boost":1.2,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Schrankhut RD.300V 230hp","engine_type":0,"type":0,"era_sel":1,"displacement":18.4,"compression":6.4,"cyl_per_row":1,"rows":6,"RPM_boost":0.51,"material_fudge":0.7,"quality_fudge":1.3,"compressor_type":1,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3},{"name":"Wollsteinkraft Verteidiger C 250hp","engine_type":0,"type":0,"era_sel":1,"displacement":24,"compression":4.9,"cyl_per_row":2,"rows":6,"RPM_boost":0.75,"material_fudge":0.7,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Wollsteinkraft Verteidiger H 360hp","engine_type":0,"type":0,"era_sel":1,"displacement":20,"compression":6,"cyl_per_row":2,"rows":6,"RPM_boost":0.85,"material_fudge":0.7,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Wollsteinkraft Wagehals C 290hp","engine_type":0,"type":0,"era_sel":1,"displacement":14.4,"compression":5.3,"cyl_per_row":2,"rows":6,"RPM_boost":1.2,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Bertha F4398 490hp","engine_type":0,"type":0,"era_sel":1,"displacement":44.3,"compression":4.7,"cyl_per_row":3,"rows":6,"RPM_boost":0.85,"material_fudge":0.7,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Brandt Patriot 210hp","engine_type":0,"type":0,"era_sel":1,"displacement":17.5,"compression":5.65,"cyl_per_row":1,"rows":6,"RPM_boost":0.65,"material_fudge":0.7,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Brandt Turbolader-Patriot 260hp","engine_type":0,"type":0,"era_sel":1,"displacement":17.5,"compression":5.65,"cyl_per_row":1,"rows":6,"RPM_boost":0.65,"material_fudge":0.7,"quality_fudge":1.2,"compressor_type":3,"compressor_count":1,"min_IAF":30,"upgrades":[false,false,false,false],"rarity":2},{"name":"Meier Br 400hp","engine_type":0,"type":0,"era_sel":1,"displacement":27,"compression":5.4,"cyl_per_row":2,"rows":6,"RPM_boost":0.86,"material_fudge":0.6,"quality_fudge":1.4,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3},{"name":"Meier Eisbr 500hp","engine_type":0,"type":0,"era_sel":1,"displacement":27,"compression":5.4,"cyl_per_row":2,"rows":6,"RPM_boost":0.86,"material_fudge":0.6,"quality_fudge":1.4,"compressor_type":3,"compressor_count":1,"min_IAF":30,"upgrades":[false,false,false,false],"rarity":3},{"name":"SAM Kurier XIII 180hp","engine_type":0,"type":0,"era_sel":1,"displacement":11.2,"compression":4.8,"cyl_per_row":2,"rows":4,"RPM_boost":1,"material_fudge":1,"quality_fudge":1.1,"compressor_type":3,"compressor_count":1,"min_IAF":10,"upgrades":[false,false,false,false],"rarity":2},{"name":"SAM Transporter IV 320hp","engine_type":0,"type":0,"era_sel":1,"displacement":22.08,"compression":4.5,"cyl_per_row":2,"rows":6,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":3,"compressor_count":1,"min_IAF":20,"upgrades":[false,false,false,false],"rarity":2},{"name":"Sonnenmotor EGH3 220hp","engine_type":0,"type":0,"era_sel":0,"displacement":20,"compression":5,"cyl_per_row":2,"rows":4,"RPM_boost":1,"material_fudge":0.9,"quality_fudge":1,"compressor_type":2,"compressor_count":1,"min_IAF":50,"upgrades":[false,false,false,true],"rarity":3},{"name":"Wollsteinkraft Wagehals T 360hp","engine_type":0,"type":0,"era_sel":1,"displacement":14.4,"compression":5.3,"cyl_per_row":2,"rows":6,"RPM_boost":1.2,"material_fudge":1,"quality_fudge":1.1,"compressor_type":3,"compressor_count":2,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"SAM Kurier L 300hp","engine_type":0,"type":0,"era_sel":1,"displacement":18.4,"compression":5.3,"cyl_per_row":2,"rows":4,"RPM_boost":0.99,"material_fudge":0.8,"quality_fudge":1.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3},{"name":"Bertha F2080 220hp","engine_type":0,"type":0,"era_sel":1,"displacement":19.7,"compression":4.4,"cyl_per_row":1,"rows":8,"RPM_boost":1,"material_fudge":0.6,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Bertha F2080 ber 270hp","engine_type":0,"type":0,"era_sel":1,"displacement":19.7,"compression":4.8,"cyl_per_row":1,"rows":8,"RPM_boost":1,"material_fudge":0.6,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2}]},{"name":"Himmilgard Contrarotary","engines":[{"name":"Nationales Motorbro R-1860 160hp","engine_type":0,"type":3,"era_sel":1,"displacement":18.6,"compression":6,"cyl_per_row":11,"rows":1,"RPM_boost":0.65,"material_fudge":1,"quality_fudge":1,"compressor_type":1,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Nationales Motorbro R-1190 110hp","engine_type":0,"type":3,"era_sel":1,"displacement":11.9,"compression":6,"cyl_per_row":9,"rows":1,"RPM_boost":0.67,"material_fudge":1.2,"quality_fudge":1,"compressor_type":1,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2}]},{"name":"Himmilgard Air Cooled","engines":[{"name":"Braun UL 90hp","engine_type":0,"type":1,"era_sel":1,"displacement":8.8,"compression":4.3,"cyl_per_row":2,"rows":4,"RPM_boost":1.2,"material_fudge":1.3,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Braun ULK 110hp","engine_type":0,"type":1,"era_sel":1,"displacement":8.8,"compression":4.3,"cyl_per_row":2,"rows":4,"RPM_boost":1.2,"material_fudge":1.2,"quality_fudge":1,"compressor_type":2,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Scholz Luchs X 110hp","engine_type":0,"type":1,"era_sel":1,"displacement":12.1,"compression":4.85,"cyl_per_row":5,"rows":2,"RPM_boost":0.8,"material_fudge":0.9,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Braun UX 150hp","engine_type":0,"type":1,"era_sel":1,"displacement":13.2,"compression":4.3,"cyl_per_row":2,"rows":6,"RPM_boost":1.23,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Scholz Luchs III 30hp","engine_type":0,"type":1,"era_sel":1,"displacement":3.1,"compression":4.5,"cyl_per_row":3,"rows":1,"RPM_boost":1,"material_fudge":1.1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Scholz Luchs VI 60hp","engine_type":0,"type":1,"era_sel":1,"displacement":6.23,"compression":4.5,"cyl_per_row":3,"rows":2,"RPM_boost":1,"material_fudge":1.1,"quality_fudge":0.9,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Breitbusch Libelle \'320hp\'","engine_type":0,"type":1,"era_sel":1,"displacement":22.78,"compression":4.42,"cyl_per_row":9,"rows":1,"RPM_boost":1.31,"material_fudge":1.1,"quality_fudge":0.3,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3},{"name":"Rosevear Ankou B 180hp","engine_type":0,"type":1,"era_sel":1,"displacement":12.9,"compression":5.17,"cyl_per_row":9,"rows":1,"RPM_boost":0.9,"material_fudge":1.4,"quality_fudge":0.9,"compressor_type":2,"compressor_count":2,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3}]},{"name":"Himmilgard Semi-Radial","engines":[{"name":"SLW Sigvird 180hp","engine_type":0,"type":4,"era_sel":1,"displacement":11,"compression":6,"cyl_per_row":4,"rows":1,"RPM_boost":1,"material_fudge":1,"quality_fudge":1.3,"compressor_type":2,"compressor_count":2,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3}]},{"name":"Himmilgard Rotary","engines":[{"name":"Modded Z12 110hp","engine_type":0,"type":2,"era_sel":1,"displacement":15,"compression":5,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1,"compressor_type":1,"compressor_count":1,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"Robur Herausforderer 180hp","engine_type":0,"type":2,"era_sel":1,"displacement":18,"compression":5.5,"cyl_per_row":5,"rows":2,"RPM_boost":0.9,"material_fudge":1,"quality_fudge":1,"compressor_type":3,"compressor_count":1,"min_IAF":40,"upgrades":[false,false,true,true],"rarity":3},{"name":"Rhona Motorbau Z11 80hp","engine_type":0,"type":2,"era_sel":1,"displacement":10.9,"compression":4.5,"cyl_per_row":9,"rows":1,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Rhona Motorbau Z11tgl 100hp","engine_type":0,"type":2,"era_sel":1,"displacement":10.9,"compression":4.5,"cyl_per_row":9,"rows":1,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":2,"compressor_count":1,"min_IAF":20,"upgrades":[false,false,false,false],"rarity":1},{"name":"Rhona Motorbau Z12 110hp","engine_type":0,"type":2,"era_sel":1,"displacement":15,"compression":5,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Schreiber B.IX 130hp","engine_type":0,"type":2,"era_sel":1,"displacement":16.2,"compression":4.8,"cyl_per_row":9,"rows":1,"RPM_boost":0.95,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Schreiber G.IX 110hp","engine_type":0,"type":2,"era_sel":1,"displacement":15.84,"compression":4.85,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":0.8,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Schreiber O.VII 50hp","engine_type":0,"type":2,"era_sel":1,"displacement":8,"compression":4.85,"cyl_per_row":7,"rows":1,"RPM_boost":0.8,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Schreiber L.VII 80hp","engine_type":0,"type":2,"era_sel":1,"displacement":11.9,"compression":3.87,"cyl_per_row":7,"rows":1,"RPM_boost":1.2,"material_fudge":0.8,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1},{"name":"Schreiber TG.IX 130hp","engine_type":0,"type":2,"era_sel":1,"displacement":15.84,"compression":4.85,"cyl_per_row":9,"rows":1,"RPM_boost":0.8,"material_fudge":0.8,"quality_fudge":1,"compressor_type":2,"compressor_count":1,"min_IAF":20,"upgrades":[false,false,false,false],"rarity":1},{"name":"Schreiber T.IX 160hp","engine_type":0,"type":2,"era_sel":1,"displacement":16.2,"compression":4.8,"cyl_per_row":9,"rows":1,"RPM_boost":0.95,"material_fudge":1,"quality_fudge":1.1,"compressor_type":2,"compressor_count":1,"min_IAF":30,"upgrades":[false,false,false,false],"rarity":2},{"name":"W.O.1 150hp","engine_type":0,"type":2,"era_sel":1,"displacement":17.1,"compression":4.9,"cyl_per_row":9,"rows":1,"RPM_boost":1,"material_fudge":1,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":2},{"name":"W.O.3 230hp","engine_type":0,"type":2,"era_sel":1,"displacement":24.93,"compression":5.2,"cyl_per_row":9,"rows":1,"RPM_boost":0.9,"material_fudge":0.8,"quality_fudge":1.2,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":3},{"name":"Schreiber L.XIV 160hp","engine_type":0,"type":2,"era_sel":1,"displacement":23.8,"compression":3.87,"cyl_per_row":7,"rows":2,"RPM_boost":1.2,"material_fudge":0.8,"quality_fudge":1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false],"rarity":1}]}]}');class st{constructor(t){this.constant=!1,this.name=t,this.list=[];const e=window.localStorage.getItem("test.engines."+this.name);null!=e&&this.fromJSON(JSON.parse(e));const s=window.localStorage.getItem("test.engines_names");let i=[];s&&(i=JSON.parse(s));let a=!1;for(const e of i)if(e==t){a=!0;break}a||i.push(t),window.localStorage.setItem("test.engines_names",JSON.stringify(i))}toJSON(){const t=[];for(const e of this.list)t.push(e.toJSON());return{name:this.name,engines:t}}fromJSON(t,e=!1){t.name&&(this.name=t.name),e&&(this.list=[]);for(const s of t.engines)try{this.push(new tt(s),e)}catch(t){console.error(t)}}deserializeEngine(t){if(this.constant)throw"Engine List is Constant";const e=new tt;return e.deserialize(t),this.push(e)}push(t,e=!1){if(this.constant)throw"Engine List is Constant";if(e)this.remove(t);else for(let e=0;e<this.length;e++)if(this.list[e].Equal(t))return e;return this.list.push(t.Clone()),this.list=this.list.sort(((t,e)=>(""+t.name).localeCompare(e.name))),window.localStorage.setItem("test.engines."+this.name,JSON.stringify(this.toJSON())),this.find(t)}get(t){return t<0||t>=this.length?new tt:this.list[t]}get_name(t){const e=this.find_name(t);return this.get(e)}get_stats(t){return t<0||t>=this.length?new X:this.list[t].PartStats()}get_stats_name(t){const e=this.find_name(t);return this.get_stats(e)}find(t){for(let e=0;e<this.length;e++)if(t.Equal(this.list[e]))return e;return-1}find_name(t){for(let e=0;e<this.length;e++)if(this.list[e].name==t)return e;return-1}remove(t){if(this.constant)throw"Engine List is Constant";const e=this.find(t);e>=0&&this.list.splice(e,1),window.localStorage.setItem("test.engines."+this.name,JSON.stringify(this.toJSON()))}remove_name(t){if(this.constant)throw"Engine List is Constant";const e=this.find_name(t);e>=0&&this.list.splice(e,1),window.localStorage.setItem("test.engines."+this.name,JSON.stringify(this.toJSON()))}get length(){return this.list.length}SetConstant(){this.constant=!0}}const it=new Map([["Custom",new st("Custom")]]);function at(){return it}function nt(t){const e=at();for(const s of e.keys())if("Custom"!=s&&e.get(s).find_name(t)>=0)return s;return e.get("Custom").find_name(t)>=0?"Custom":""}class rt extends n{constructor(t,e){super(),this.engine=t;const s=e;this.InitTypeSelect(s);const i=s.insertCell();i.className="inner_table";const a=document.createElement("TABLE");a.className="inner_table",c(a.insertRow(),A("Engine Cooling")),this.cool_cell=a.insertRow().insertCell(),c(a.insertRow(),A("Engine Mounting"));const n=a.insertRow().insertCell();c(a.insertRow(),A("Engine Upgrades"));const r=a.insertRow().insertCell();i.appendChild(a);const o=s.insertCell();o.className="inner_table";const l=document.createElement("TABLE");l.className="inner_table",c(l.insertRow(),A("Engine Cowls"));const h=l.insertRow().insertCell();o.appendChild(l),c(l.insertRow(),A("Engine Electrical"));const u=l.insertRow().insertCell();this.InitMountSelect(n),this.InitUpgradeSelect(r),this.InitCowlSelect(h),this.InitElectricSelect(u),this.InitStatDisplay(s),this.intake_fan=document.createElement("INPUT"),this.intake_fan.onchange=()=>{this.engine.SetIntakeFan(this.intake_fan.checked)}}InitTypeSelect(t){this.e_rarity=document.createElement("LABEL"),this.e_pwr=document.createElement("LABEL"),this.e_mass=document.createElement("LABEL"),this.e_drag=document.createElement("LABEL"),this.e_rely=document.createElement("LABEL"),this.e_cool=document.createElement("LABEL"),this.e_over=document.createElement("LABEL"),this.e_fuel=document.createElement("LABEL"),this.e_alti=document.createElement("LABEL"),this.e_torq=document.createElement("LABEL"),this.e_rumb=document.createElement("LABEL"),this.e_cost=document.createElement("LABEL"),this.cool_count=document.createElement("INPUT"),this.cool_count.setAttribute("type","number");const e=t.insertCell(0);this.e_list_select=document.createElement("SELECT"),this.e_list_select.required=!0,e.appendChild(this.e_list_select),e.appendChild(document.createElement("BR"));for(let t of at().keys()){let e=document.createElement("OPTION");e.text=t,this.e_list_select.add(e)}this.e_select=document.createElement("SELECT"),this.e_select.required=!0,e.appendChild(this.e_select),e.appendChild(document.createElement("BR"));const s=at();for(let t=0;t<s.get("Custom").length;t++){let e=s.get("Custom").get(t),i=document.createElement("OPTION");i.text=e.name,this.e_select.add(i)}const i=h(e);m(A("Rarity"),this.e_rarity,i),m(A("Stat Power"),this.e_pwr,i),m(A("Stat Mass"),this.e_mass,i),m(A("Stat Drag"),this.e_drag,i),m(A("Stat Reliability"),this.e_rely,i),m(A("Stat Cooling"),this.e_cool,i),m(A("Stat Overspeed"),this.e_over,i),m(A("Stat Fuel Consumption"),this.e_fuel,i),m(A("Stat Altitude"),this.e_alti,i),m(A("Stat Torque"),this.e_torq,i),m(A("Stat Rumble"),this.e_rumb,i),m(A("Stat Cost"),this.e_cost,i),this.e_list_select.onchange=()=>{this.engine.SetSelectedList(this.e_list_select.options[this.e_list_select.selectedIndex].text)},this.e_select.onchange=()=>{this.engine.SetSelectedIndex(this.e_select.selectedIndex)}}UpdateEngine(t){this.engine=t}InitMountSelect(t){const e=document.createElement("SPAN");e.textContent=A("Engine Mounting Location"),t.appendChild(e),t.appendChild(document.createElement("BR")),this.mount_select=document.createElement("SELECT");for(let t of this.engine.GetMountList()){let e=document.createElement("OPTION");e.text=A(t.name),this.mount_select.add(e)}this.mount_select.required=!0,this.mount_select.selectedIndex=this.engine.GetMountIndex(),this.mount_select.onchange=()=>{this.engine.SetMountIndex(this.mount_select.selectedIndex)},t.appendChild(this.mount_select),t.appendChild(document.createElement("BR")),this.pushpull_input=document.createElement("INPUT"),this.torque_input=document.createElement("INPUT");const s=h(t);this.pushpull_label=f(" "+A("Engine Push Pull"),this.pushpull_input,s),f(" "+A("Engine Torque To Structure"),this.torque_input,s),this.pushpull_input.checked=this.engine.GetUsePushPull(),this.torque_input.checked=this.engine.GetUsePushPull(),this.pushpull_input.onchange=()=>{this.engine.SetUsePushPull(this.pushpull_input.checked)},this.torque_input.onchange=()=>{this.engine.SetTorqueToStruct(this.torque_input.checked)}}InitUpgradeSelect(t){this.ds_input=document.createElement("INPUT"),this.op_input=document.createElement("INPUT"),this.gp_input=document.createElement("INPUT"),this.gpr_input=document.createElement("INPUT");const e=h(t);f(A("Engine Extended Driveshafts"),this.ds_input,e),f(A("Engine Outboard Propeller"),this.op_input,e),_(A("Engine Geared Propeller"),this.gp_input,e),_(A("Engine Negate Reliability Penalty"),this.gpr_input,e),this.gp_input.onchange=()=>{this.engine.SetGearCount(this.gp_input.valueAsNumber)},this.gpr_input.onchange=()=>{this.engine.SetGearReliability(this.gpr_input.valueAsNumber)},this.ds_input.onchange=()=>{this.engine.SetUseExtendedDriveshaft(this.ds_input.checked)},this.op_input.onchange=()=>{this.engine.SetOutboardProp(this.op_input.checked)}}InitElectricSelect(t){const e=h(t);this.alternator_input=document.createElement("INPUT"),this.generator_input=document.createElement("INPUT"),f(A("Engine Alternator"),this.alternator_input,e),f(A("Engine Generator"),this.generator_input,e),this.alternator_input.onchange=()=>{this.engine.SetAlternator(this.alternator_input.checked)},this.generator_input.onchange=()=>{this.engine.SetGenerator(this.generator_input.checked)}}InitStatDisplay(t){const e=t.insertCell();e.className="inner_table";const s=document.createElement("TABLE");s.className="inner_table",e.appendChild(s);const i=s.insertRow();c(i,A("Stat Power")),c(i,A("Stat Mass")),c(i,A("Stat Drag"));const a=s.insertRow();this.d_powr=a.insertCell(),this.d_mass=a.insertCell(),this.d_drag=a.insertCell();const n=s.insertRow();c(n,A("Stat Reliability")),c(n,A("Stat Visibility")),c(n,A("Stat Overspeed"));const r=s.insertRow();this.d_rely=r.insertCell(),this.d_rely.className="part_local",this.d_visi=r.insertCell(),this.d_over=r.insertCell();const o=s.insertRow();c(o,A("Stat Cost")),c(o,A("Stat Altitude")),c(o,A("Stat Fuel Consumption"));const l=s.insertRow();this.d_cost=l.insertCell(),this.d_alti=l.insertCell(),this.d_fuel=l.insertCell();const h=s.insertRow();c(h,A("Stat Pitch Stability")),c(h,A("Stat Lateral Stability")),c(h,A("Stat Raw Strain"));const u=s.insertRow();this.d_pstb=u.insertCell(),this.d_lstb=u.insertCell(),this.d_maxs=u.insertCell();const _=s.insertRow();c(_,A("Stat Structure")),c(_,A("Stat Flight Stress")),c(_,A("Stat Required Sections"));const m=s.insertRow();this.d_strc=m.insertCell(),this.d_fstr=m.insertCell(),this.d_sect=m.insertCell();const p=s.insertRow();c(p,A("Stat Charge")),c(p,""),c(p,"");const d=s.insertRow();this.d_chrg=d.insertCell(),d.insertCell(),d.insertCell()}InitCowlSelect(t){this.cowl_select=document.createElement("SELECT");for(let t of this.engine.GetCowlList()){let e=document.createElement("OPTION");e.text=A(t.name),this.cowl_select.add(e)}this.cowl_select.required=!0,this.cowl_select.selectedIndex=this.engine.GetMountIndex(),this.cowl_select.onchange=()=>{this.engine.SetCowl(this.cowl_select.selectedIndex)},t.appendChild(this.cowl_select)}InitCoolingSelect(){for(;this.cool_cell.children.length>0;)this.cool_cell.removeChild(this.cool_cell.children[0]);if(this.engine.IsRotary()){this.e_cool.textContent="0";const t=document.createElement("SPAN");t.innerText=A("Engine Rotary Cooling"),this.cool_cell.appendChild(t)}else if("0"==this.e_cool.textContent){const t=document.createElement("SPAN");t.textContent=A("Engine Air-Cooled Engine."),this.cool_cell.appendChild(t);const e=h(this.cool_cell);f(A("Engine Air Cooling Fan"),this.intake_fan,e),this.intake_fan.disabled=!this.engine.CanIntakeFan()}else{this.cool_select||(this.cool_select=document.createElement("SELECT"),this.cool_select.required=!0);const t=h(this.cool_cell);p(A("Engine Select Radiator"),this.cool_select,t),_(A("Engine Cooling Amount"),this.cool_count,t);const e=this.engine.GetNumRadiators();for(;this.cool_select.options.length>0;)this.cool_select.options.remove(this.cool_select.options.length-1);for(let t=1;t<e+1;t++){let e=document.createElement("OPTION");e.textContent=A("Vital Part Radiator",t),this.cool_select.add(e)}this.cool_select.onchange=()=>{this.engine.SetRadiator(this.cool_select.selectedIndex)},this.cool_select.selectedIndex=this.engine.GetRadiator(),this.cool_count.min="0",this.cool_count.max=this.engine.GetMaxCooling().toString(),this.cool_count.valueAsNumber=this.engine.GetCooling(),this.cool_count.onchange=()=>{this.engine.SetCooling(this.cool_count.valueAsNumber)}}}UpdateDisplay(){for(;this.e_list_select.options.length>0;)this.e_list_select.options.remove(this.e_list_select.options.length-1);for(;this.e_select.options.length>0;)this.e_select.options.remove(this.e_select.options.length-1);const t=this.engine.GetSelectedList();if(""!=t){var e=!1,s=0;const i=at();for(let a of i.keys()){let i=document.createElement("OPTION");i.text=a,this.e_list_select.add(i),a==t||e?(s=Math.abs(s),e=!0):s-=1}this.e_list_select.selectedIndex=s;const a=this.engine.CanSelectIndex();for(let e=0;e<i.get(t).length;e++){let s=i.get(t).get(e),n=document.createElement("OPTION");n.text=s.name,n.disabled=!a[e],this.e_select.add(n)}this.e_select.selectedIndex=this.engine.GetSelectedIndex()}else{const t=at();for(let e of t.keys()){let t=document.createElement("OPTION");t.text=e,this.e_list_select.add(t)}this.e_list_select.selectedIndex=-1;let e=this.engine.GetCurrentStats(),s=document.createElement("OPTION");s.text=e.name,this.e_select.add(s),this.e_select.selectedIndex=0}const i=this.engine.GetCurrentStats();switch(i.rarity){case Y.CUSTOM:this.e_rarity.textContent=A("Rarity Custom"),this.e_rarity.className="ER_Custom";break;case Y.COMMON:this.e_rarity.textContent=A("Rarity Common"),this.e_rarity.className="";break;case Y.RARE:this.e_rarity.textContent=A("Rarity Rare"),this.e_rarity.className="ER_Rare";break;case Y.LEGENDARY:this.e_rarity.textContent=A("Rarity Legendary"),this.e_rarity.className="ER_Legendary"}const a=this.engine.GetMinAltitude(),n=this.engine.GetMaxAltitude();if(this.e_pwr.textContent=i.stats.power.toString(),this.e_mass.textContent=i.stats.mass.toString(),this.e_drag.textContent=i.stats.drag.toString(),this.e_rely.textContent=i.stats.reliability.toString(),this.e_cool.textContent=i.stats.cooling.toString(),this.e_over.textContent=i.overspeed.toString(),this.e_fuel.textContent=i.stats.fuelconsumption.toString(),this.e_alti.textContent=a.toString()+"-"+n.toString(),this.e_torq.textContent=i.torque.toString(),this.e_rumb.textContent=i.rumble.toString(),this.e_cost.textContent=i.stats.cost.toString(),this.InitCoolingSelect(),this.intake_fan.checked=this.engine.GetIntakeFan(),this.mount_select.selectedIndex=this.engine.GetMountIndex(),this.engine.GetIsTurbine()?this.pushpull_label.textContent=" "+A("Engine Side-by-Side"):this.pushpull_label.textContent=" "+A("Engine Push Pull"),this.pushpull_input.checked=this.engine.GetUsePushPull(),this.pushpull_input.disabled=!this.engine.CanUsePushPull(),this.torque_input.checked=this.engine.GetTorqueToStruct(),this.torque_input.checked=this.engine.GetTorqueToStruct(),this.torque_input.disabled=!this.engine.CanTorqueToStruct(),this.ds_input.checked=this.engine.GetUseExtendedDriveshaft(),this.ds_input.disabled=!this.engine.CanUseExtendedDriveshaft(),this.op_input.checked=this.engine.GetOutboardProp(),this.op_input.disabled=!this.engine.CanOutboardProp(),this.gp_input.valueAsNumber=this.engine.GetGearCount(),this.gp_input.disabled=!this.engine.CanUseGears(),this.gpr_input.valueAsNumber=this.engine.GetGearReliability(),this.gpr_input.disabled=!this.engine.CanUseGears(),i.pulsejet){this.mount_select.disabled=!0,this.mount_select.selectedIndex=-1;for(let t=0;t<this.mount_select.options.length;t++)"fuselage"==this.mount_select.options[t].value&&(this.mount_select.options[t].disabled=!0);this.cowl_select.disabled=!0,this.alternator_input.disabled=!0,this.generator_input.disabled=!0}else{this.mount_select.disabled=!1;const t=this.engine.CanMountIndex();for(let e=0;e<this.mount_select.options.length;e++)this.mount_select.options[e].disabled=!t[e];this.cowl_select.disabled=!1,this.alternator_input.disabled=!1,this.generator_input.disabled=!1}this.cowl_select.selectedIndex=this.engine.GetCowl();const r=this.engine.GetCowlEnabled();for(let t=0;t<r.length;t++)this.cowl_select.options[t].disabled=!r[t];this.generator_input.checked=this.engine.GetGenerator(),this.generator_input.disabled=!this.engine.GetGeneratorEnabled(),this.alternator_input.checked=this.engine.GetAlternator(),this.alternator_input.disabled=!this.engine.GetAlternatorEnabled();const o=this.engine.PartStats();E(this.d_powr,o.power.toString(),!0),E(this.d_mass,o.mass.toString(),!1),E(this.d_drag,o.drag.toString(),!1),E(this.d_rely,this.engine.GetReliability().toString(),!0),E(this.d_visi,o.visibility.toString(),!0),E(this.d_over,this.engine.GetOverspeed().toString(),!0),E(this.d_cost,o.cost.toString(),!1),E(this.d_alti,a.toString()+"-"+n.toString()),E(this.d_fuel,o.fuelconsumption.toString(),!1),E(this.d_pstb,o.pitchstab.toString(),!0),E(this.d_lstb,o.latstab.toString(),!0),E(this.d_maxs,o.maxstrain.toString(),!0),E(this.d_strc,o.structure.toString(),!0),E(this.d_fstr,o.flightstress.toString(),!1),E(this.d_sect,o.reqsections.toString(),!1),E(this.d_chrg,o.charge.toString(),!0)}}class ot extends n{constructor(t,e){super(),this.radiator=e;const s=t.insertCell();this.type_select=document.createElement("SELECT");for(let t of this.radiator.GetTypeList()){let e=document.createElement("OPTION");e.text=A(t.name),this.type_select.add(e)}this.type_select.onchange=()=>{this.radiator.SetTypeIndex(this.type_select.selectedIndex)},s.appendChild(this.type_select);const i=t.insertCell();this.mount_select=document.createElement("SELECT");for(let t of this.radiator.GetMountList()){let e=document.createElement("OPTION");e.text=A(t.name),this.mount_select.add(e)}this.mount_select.onchange=()=>{this.radiator.SetMountIndex(this.mount_select.selectedIndex)},i.appendChild(this.mount_select);const a=t.insertCell();this.coolant_select=document.createElement("SELECT");for(let t of this.radiator.GetCoolantList()){let e=document.createElement("OPTION");e.text=A(t.name),this.coolant_select.add(e)}this.coolant_select.onchange=()=>{this.radiator.SetCoolantIndex(this.coolant_select.selectedIndex)},a.appendChild(this.coolant_select),a.appendChild(document.createElement("BR")),this.harden_input=document.createElement("INPUT");const n=h(a);f(A("Radiators Harden Radiator"),this.harden_input,n),this.harden_input.onchange=()=>{this.radiator.SetHarden(this.harden_input.checked)};const r=t.insertCell(),o=document.createElement("TABLE");r.className="inner_table",o.className="inner_table";const l=o.insertRow();c(l,A("Stat Mass")),c(l,A("Stat Cost")),c(l,A("Stat Drag")),c(l,A("Stat Reliability")),c(l,A("Stat Lateral Stability")),c(l,A("Derived Is Flammable Question"));const u=o.insertRow();this.c_mass=u.insertCell(),this.c_cost=u.insertCell(),this.c_drag=u.insertCell(),this.c_rely=u.insertCell(),this.c_lstb=u.insertCell(),this.c_flam=u.insertCell(),r.appendChild(o)}UpdateRadiator(t){this.radiator=t}UpdateDisplay(){const t=this.radiator.CanType();for(let e=0;e<t.length;e++)this.type_select.options[e].disabled=!t[e];this.type_select.selectedIndex=this.radiator.GetTypeIndex(),this.mount_select.selectedIndex=this.radiator.GetMountIndex();const e=this.radiator.CanMount();for(let t=0;t<e.length;t++)this.mount_select.options[t].disabled=!e[t];this.coolant_select.selectedIndex=this.radiator.GetCoolantIndex(),this.harden_input.checked=this.radiator.GetHarden();const s=this.radiator.PartStats();E(this.c_mass,s.mass.toString(),!1),E(this.c_cost,s.cost.toString(),!1),E(this.c_drag,s.drag.toString(),!1),E(this.c_rely,s.reliability.toString(),!0),E(this.c_lstb,s.latstab.toString(),!0),this.radiator.GetIsFlammable()?E(this.c_flam,A("Yes")):E(this.c_flam,A("No"))}}class lt extends n{constructor(t){super(),this.eng=t,this.engines=[],this.radiators=[],document.getElementById("lbl_engines").textContent=A("Engines Section Title"),this.tbl=document.getElementById("table_engine");var e=document.createDocumentFragment(),s=w(e);c(s,A("Engines Engine Type")),c(s,A("Engines Options")),c(s,A("Engines Options 2")),c(s,A("Engines Engine Stats")),this.tbl.appendChild(e),e=document.createDocumentFragment(),this.tblR=document.getElementById("table_radiator"),c(s=w(e),A("Radiators Radiator Type")),c(s,A("Radiators Mounting")),c(s,A("Radiators Coolant")),c(s,A("Radiators Radiator Stats")),this.tblR.appendChild(e),document.getElementById("lbl_num_engines").textContent=A("Engines Num Engines"),this.num_engines=document.getElementById("num_engines"),this.num_engines.onchange=()=>{this.eng.SetNumberOfEngines(this.num_engines.valueAsNumber)},this.num_engines.valueAsNumber=this.eng.GetNumberOfItems(),document.getElementById("lbl_num_radiators").textContent=A("Engines Num Radiators"),this.num_radiators=document.getElementById("num_radiators"),this.num_radiators.onchange=()=>{this.eng.SetNumberOfRadiators(this.num_radiators.valueAsNumber)},this.num_radiators.valueAsNumber=this.eng.GetNumberOfRadiators(),document.getElementById("lbl_asymmetric").textContent=A("Engines Asymmetric Plane"),this.is_asymmetric=document.getElementById("asymmetric"),this.is_asymmetric.onchange=()=>{this.eng.SetAsymmetry(this.is_asymmetric.checked)},this.is_asymmetric.checked=this.eng.GetAsymmetry()}UpdateDisplay(){const t=this.eng.GetNumberOfItems();for(this.tbl.style.display=0==t?"none":"",this.num_engines.valueAsNumber=t;this.engines.length>t;)this.engines.pop(),this.tbl.deleteRow(this.engines.length+1);for(var e=document.createDocumentFragment();this.engines.length<t;){let t=this.eng.GetEngine(this.engines.length),s=new rt(t,w(e));this.engines.push(s)}this.tbl.appendChild(e);for(let e=0;e<t;e++)this.engines[e].UpdateEngine(this.eng.GetEngine(e));const s=this.eng.GetNumberOfRadiators();for(this.num_radiators.valueAsNumber=s,0==s?(this.tblR.style.display="none",this.num_radiators.disabled=!0):(this.tblR.style.display="",this.num_radiators.disabled=!1);this.radiators.length>s;)this.radiators.pop(),this.tblR.deleteRow(this.radiators.length+1);for(e=document.createDocumentFragment();this.radiators.length<s;){let t=new ot(w(e),this.eng.GetRadiator(this.radiators.length));this.radiators.push(t)}this.tblR.appendChild(e);for(let t=0;t<s;t++)this.radiators[t].UpdateRadiator(this.eng.GetRadiator(t));this.is_asymmetric.checked=this.eng.GetAsymmetry();for(let t of this.engines)t.UpdateDisplay();for(let t of this.radiators)t.UpdateDisplay()}}class ht extends n{constructor(t){super(),this.c_sec=[],this.t_sec=[],this.frames=t,document.getElementById("lbl_frames").textContent=A("Frames Frames and Covering"),this.table=document.getElementById("table_frames");const e=document.createDocumentFragment();var s=w(e);this.all_frame=document.createElement("SELECT"),this.all_skin=document.createElement("SELECT"),c(s,A("Frames Frame Type")).append(document.createElement("BR"),this.all_frame),c(s,A("Frames Skin Type")).append(document.createElement("BR"),this.all_skin),c(s,A("Frames Frame Options")),c(s,A("Frames Frame Stats")),s=w(e),this.c_frame=s.insertCell(),this.c_skin=s.insertCell(),this.c_options=s.insertCell(),this.c_stats=s.insertCell(),this.c_stats.className="inner_table",this.c_stats.rowSpan=0;const i=document.createElement("TABLE");i.className="inner_table";const a=i.insertRow();c(a,A("Stat Mass")),c(a,A("Stat Drag")),c(a,A("Stat Cost"));const n=i.insertRow();this.d_mass=n.insertCell(),this.d_drag=n.insertCell(),this.d_cost=n.insertCell();const r=i.insertRow();c(r,A("Stat Structure")),c(r,A("Stat Toughness")),c(r,A("Stat Visibility"));const o=i.insertRow();this.d_strc=o.insertCell(),this.d_tugh=o.insertCell(),this.d_visi=o.insertCell();const l=i.insertRow();c(l,A("Stat Wing Area")),c(l,A("Derived Is Flammable Question")),c(l,A("Stat Pitch Stability"));const h=i.insertRow();this.d_area=h.insertCell(),this.d_flammable=h.insertCell(),this.d_pstb=h.insertCell();const u=i.insertRow();c(u,A("Stat Raw Strain")),c(u,A("Stat Lift Bleed")),c(u,"");const _=i.insertRow();this.d_strn=_.insertCell(),this.d_lift=_.insertCell(),_.insertCell(),this.c_stats.appendChild(i);const m=w(e);c(m,A("Frames Tail Frame Type")),c(m,A("Frames Tail Skin Type")),c(m,A("Frames Tail Frame Options"));const p=w(e);this.t_frame=p.insertCell(),this.t_skin=p.insertCell(),this.t_options=p.insertCell(),document.getElementById("lbl_tail").textContent=A("Frames Tail Section Title"),document.getElementById("lbl_tail_type").textContent=A("Frames Tail Type"),this.t_select=document.getElementById("tail_type"),document.getElementById("lbl_tail_farman").textContent=A("Frames Tail Farman"),this.t_farman=document.getElementById("tail_farman"),document.getElementById("lbl_tail_boom").textContent=A("Frames Tail Boom"),this.t_boom=document.getElementById("tail_boom"),document.getElementById("lbl_flying_wing").textContent=A("Frames Flying Wing"),this.t_fwing=document.getElementById("flying_wing");const d=this.frames.GetFrameList();for(let t of d){let e=document.createElement("OPTION");e.text=A(t.name),t.basestruct<=0&&(e.disabled=!0),this.all_frame.add(e)}this.all_frame.onchange=()=>{this.frames.SetAllFrame(this.all_frame.selectedIndex)};const g=this.frames.GetSkinList();for(let t of g){let e=document.createElement("OPTION");e.text=A(t.name),this.all_skin.add(e)}this.all_skin.onchange=()=>{this.frames.SetAllSkin(this.all_skin.selectedIndex)};for(let t of this.frames.GetTailList()){let e=document.createElement("OPTION");e.text=A(t.name),this.t_select.add(e)}this.t_select.onchange=()=>{this.frames.SetTailType(this.t_select.selectedIndex)},this.t_farman.onchange=()=>{this.frames.SetUseFarman(this.t_farman.checked)},this.t_boom.onchange=()=>{this.frames.SetUseBoom(this.t_boom.checked)},this.t_fwing.onchange=()=>{this.frames.SetFlyingWing(this.t_fwing.checked)},this.table.appendChild(e)}UpdateDisplay(){const t=document.createDocumentFragment();for(;this.table.children.length;)t.append(this.table.children[0]);const e=this.frames.GetSectionList(),s=this.frames.GetTailSectionList();for(;e.length>this.c_sec.length;){let t=this.c_sec.length;this.CreateSection(t,e[t])}for(;e.length<this.c_sec.length;)this.RemoveSection();for(;s.length>this.t_sec.length;){let t=this.t_sec.length;this.CreateTailSection(t,s[t])}for(;s.length<this.t_sec.length;)this.RemoveTailSection();const i=this.frames.GetSkinList()[this.frames.GetSkin()].flammable;for(let t=0;t<e.length;t++){let s=e[t];this.UpdateSection(t,s)}this.t_select.selectedIndex=this.frames.GetTailType(),this.t_farman.disabled=this.frames.GetUseBoom()||this.frames.GetIsTailless(),this.t_farman.checked=this.frames.GetUseFarman(),this.t_boom.disabled=this.frames.GetUseFarman()||this.frames.GetIsTailless(),this.t_boom.checked=this.frames.GetUseBoom(),this.t_fwing.disabled=!this.frames.CanFlyingWing(),this.t_fwing.checked=this.frames.GetFlyingWing(),this.all_frame.selectedIndex=-1,this.all_skin.selectedIndex=this.frames.GetSkin();for(let t=0;t<s.length;t++){let e=s[t];this.UpdateTailSection(t,e)}E(this.d_flammable,A(i?"Yes":"No"));const a=this.frames.PartStats();E(this.d_mass,a.mass.toString(),!1),E(this.d_drag,a.drag.toString(),!1),E(this.d_cost,a.cost.toString(),!1),E(this.d_strc,a.structure.toString(),!0),E(this.d_tugh,a.toughness.toString(),!0),E(this.d_visi,a.visibility.toString(),!0),E(this.d_area,a.wingarea.toString(),!0),E(this.d_pstb,a.pitchstab.toString(),!0),E(this.d_strn,a.maxstrain.toString(),!0),E(this.d_lift,a.liftbleed.toString(),!1),this.table.appendChild(t)}CreateSection(t,e){const s={fspan:document.createElement("SPAN"),rem:document.createElement("BUTTON"),add:document.createElement("BUTTON"),fsel:document.createElement("SELECT"),sspan:document.createElement("SPAN"),ssel:document.createElement("LABEL"),ospan:document.createElement("SPAN"),geo:document.createElement("INPUT"),mono:document.createElement("INPUT"),int:document.createElement("INPUT"),lb:document.createElement("INPUT")};s.rem.textContent="-",s.rem.onclick=()=>{this.frames.DeleteSection(t)},s.add.textContent="+",s.add.onclick=()=>{this.frames.DuplicateSection(t)};const i=this.frames.GetFrameList();for(let t of i){let e=document.createElement("OPTION");e.text=A(t.name),s.fsel.add(e)}s.fsel.onchange=()=>{this.frames.SetFrame(t,s.fsel.selectedIndex)},s.fspan.appendChild(s.rem),s.fspan.appendChild(s.add),s.fspan.appendChild(s.fsel),s.fspan.appendChild(document.createElement("BR")),this.c_frame.appendChild(s.fspan),s.sspan.appendChild(s.ssel),s.sspan.appendChild(document.createElement("BR")),this.c_skin.appendChild(s.sspan),d(A("Frames Geodesic"),s.geo,s.ospan,!1),s.geo.onchange=()=>{this.frames.SetGeodesic(t,s.geo.checked)},d(A("Frames Monocoque"),s.mono,s.ospan,!1),s.mono.onchange=()=>{this.frames.SetMonocoque(t,s.mono.checked)},d(A("Frames Internal Bracing"),s.int,s.ospan,!1),s.int.onchange=()=>{this.frames.SetInternalBracing(t,s.int.checked)},d(A("Frames Lifting Body"),s.lb,s.ospan,!0),s.lb.onchange=()=>{this.frames.SetLiftingBody(t,s.lb.checked)},this.c_options.appendChild(s.ospan),this.c_sec.push(s),this.UpdateSection(t,e)}RemoveSection(){const t=this.c_sec.pop();this.c_frame.removeChild(t.fspan),this.c_skin.removeChild(t.sspan),this.c_options.removeChild(t.ospan)}UpdateSection(t,e){const s=this.c_sec[t];s.rem.disabled=!e.internal_bracing&&!this.frames.PossibleRemoveSections(),s.add.disabled=e.internal_bracing&&!this.frames.PossibleInternalBracing();const i=this.frames.GetFrameList();for(let t=0;t<i.length;t++){let a=i[t],n=s.fsel.options[t];n.text=A(a.name),n.disabled=!1,e.geodesic&&!a.geodesic&&(n.disabled=!0),e.internal_bracing||0!=a.basestruct||(n.disabled=!0)}if(s.fsel.selectedIndex=e.frame,e.internal_bracing)s.ssel.textContent=A("Frames No Skin");else{const t=this.frames.GetSkinList();s.ssel.textContent=A(t[this.frames.GetSkin()].name)}s.geo.checked=e.geodesic,s.geo.disabled=!this.frames.PossibleGeodesic(t),s.mono.checked=e.monocoque,s.mono.disabled=!this.frames.PossibleMonocoque(t),s.int.checked=e.internal_bracing,e.internal_bracing||this.frames.PossibleInternalBracing(!0)&&this.frames.PossibleRemoveSections()?s.int.disabled=!1:s.int.disabled=!0,s.lb.checked=e.lifting_body,s.lb.disabled=!this.frames.PossibleLiftingBody(t)}CreateTailSection(t,e){const s={fspan:document.createElement("SPAN"),fsel:document.createElement("SELECT"),sspan:document.createElement("SPAN"),ssel:document.createElement("LABEL"),ospan:document.createElement("SPAN"),geo:document.createElement("INPUT"),mono:document.createElement("INPUT"),lb:document.createElement("INPUT")},i=this.frames.GetFrameList();for(let t of i){let e=document.createElement("OPTION");e.text=A(t.name),s.fsel.add(e)}s.fsel.onchange=()=>{this.frames.SetTailFrame(t,s.fsel.selectedIndex)},s.fspan.appendChild(s.fsel),s.fspan.appendChild(document.createElement("BR")),this.t_frame.appendChild(s.fspan),s.sspan.appendChild(s.ssel),s.sspan.appendChild(document.createElement("BR")),this.t_skin.appendChild(s.sspan),d(A("Frames Geodesic"),s.geo,s.ospan,!1),s.geo.onchange=()=>{this.frames.SetTailGeodesic(t,s.geo.checked)},d(A("Frames Monocoque"),s.mono,s.ospan,!1),s.mono.onchange=()=>{this.frames.SetTailMonocoque(t,s.mono.checked)},d(A("Frames Lifting Body"),s.lb,s.ospan,!0),s.lb.onchange=()=>{this.frames.SetTailLiftingBody(t,s.lb.checked)},this.t_options.appendChild(s.ospan),this.t_sec.push(s),this.UpdateTailSection(t,e)}RemoveTailSection(){const t=this.t_sec.pop();this.t_frame.removeChild(t.fspan),this.t_skin.removeChild(t.sspan),this.t_options.removeChild(t.ospan)}UpdateTailSection(t,e){const s=this.t_sec[t],i=this.frames.GetFrameList();for(let t=0;t<i.length;t++){let a=i[t],n=s.fsel.options[t];n.text=A(a.name),n.disabled=!1,e.geodesic&&!a.geodesic&&(n.disabled=!0),e.internal_bracing||0!=a.basestruct||(n.disabled=!0)}s.fsel.selectedIndex=e.frame;const a=this.frames.GetSkinList();var n=this.frames.GetSkin();this.frames.GetUseFarman()&&(n=0),s.ssel.textContent=A(a[n].name),s.geo.checked=e.geodesic,s.geo.disabled=!this.frames.PossibleTailGeodesic(t),s.mono.checked=e.monocoque,s.mono.disabled=!this.frames.PossibleTailMonocoque(t),s.lb.checked=e.lifting_body,s.lb.disabled=!this.frames.PossibleTailLiftingBody(t)}}class ct extends n{constructor(t){super(),this.stab=t,document.getElementById("lbl_stab").textContent=A("Stabilizers Section Title");const e=document.getElementById("stab_table"),s=document.createDocumentFragment();var i=w(s);c(i,A("Stabilizers Horizontal Stabilizers")),c(i,A("Stabilizers Vertical Stabilizers")),c(i,A("Stabilizers Stabilizer Stats"));const a=(i=w(s)).insertCell(),n=i.insertCell();this.h_type=document.createElement("SELECT"),this.h_count=document.createElement("INPUT"),a.appendChild(this.h_type),a.append(document.createElement("BR")),u(A("Stabilizers # of Stabilizers"),this.h_count,a),this.h_count.min="0",this.h_count.max="20",this.h_count.onchange=()=>{this.stab.SetHStabCount(this.h_count.valueAsNumber)},this.h_type.onchange=()=>{this.stab.SetHStabType(this.h_type.selectedIndex)};for(let e of t.GetHStabList()){let t=document.createElement("OPTION");t.text=A(e.name),this.h_type.add(t)}this.v_type=document.createElement("SELECT"),this.v_count=document.createElement("INPUT"),n.appendChild(this.v_type),n.appendChild(document.createElement("BR")),u(A("Stabilizers # of Stabilizers"),this.v_count,n),this.v_count.min="0",this.v_count.max="20",this.v_count.onchange=()=>{this.stab.SetVStabCount(this.v_count.valueAsNumber)},this.v_type.onchange=()=>{this.stab.SetVStabType(this.v_type.selectedIndex)};for(let e of t.GetVStabList()){let t=document.createElement("OPTION");t.text=A(e.name),this.v_type.add(t)}const r=i.insertCell();r.rowSpan=0,this.InitStatDisplay(r),e.appendChild(s)}InitStatDisplay(t){t.className="inner_table";const e=document.createElement("TABLE");e.className="inner_table",t.appendChild(e);const s=e.insertRow();c(s,A("Stat Drag")),c(s,A("Stat Control")),c(s,A("Stat Cost"));const i=e.insertRow();this.d_drag=i.insertCell(),this.d_cont=i.insertCell(),this.d_cost=i.insertCell();const a=e.insertRow();c(a,A("Stat Pitch Stability")),c(a,A("Stat Lateral Stability")),c(a,A("Stat Lift Bleed"));const n=e.insertRow();this.d_pstb=n.insertCell(),this.d_lstb=n.insertCell(),this.d_lift=n.insertCell()}SetCollapse(){P("stabilizer_collapse",!this.stab.IsDefault())}UpdateDisplay(){this.h_type.selectedIndex=this.stab.GetHStabType(),this.v_type.selectedIndex=this.stab.GetVStabType();var t=this.stab.GetHValidList();for(let e=0;e<t.length;e++)this.h_type.options[e].disabled=!t[e];t=this.stab.GetVValidList();for(let e=0;e<t.length;e++)this.v_type.options[e].disabled=!t[e];this.h_count.valueAsNumber=this.stab.GetHStabCount(),this.h_count.step=this.stab.GetHStabIncrement().toString(),this.v_count.valueAsNumber=this.stab.GetVStabCount(),this.v_count.step=this.stab.GetVStabIncrement().toString();const e=this.stab.PartStats();E(this.d_drag,e.drag.toString(),!1),E(this.d_cont,e.control.toString(),!0),E(this.d_cost,e.cost.toString(),!1),E(this.d_pstb,e.pitchstab.toString(),!0),E(this.d_lstb,e.latstab.toString(),!0),E(this.d_lift,e.liftbleed.toString(),!1)}}class ut extends n{constructor(t){super(),this.rf=t,this.ext_wood_inp=[],this.ext_steel_inp=[],this.cant_inp=[],document.getElementById("lbl_reinforcements").textContent=A("Reinforcement Section Title");const e=document.getElementById("tbl_reinforcements"),s=document.createDocumentFragment();var i=w(s);c(i,A("Reinforcement External Reinforcements")),c(i,A("Reinforcement Internal Reinforcements")),c(i,A("Reinforcement Reinforcement Stats")),i=w(s),this.InitExternal(i.insertCell()),this.InitInternal(i.insertCell()),this.InitStatDisplay(i.insertCell()),e.appendChild(s)}InitExternal(t){const e=h(t),s=h(e.div2),i=h(s.div1),a=h(s.div2),n=this.rf.GetExternalList();for(let t=0;t<n.length;t++){let s=n[t],r=document.createElement("INPUT"),o=document.createElement("INPUT");y(A(s.name),e.div1),_(A("Reinforcement Wood"),r,i),_(A("Reinforcement Steel"),o,a),r.min="0",o.min="0",r.onchange=()=>{this.rf.SetExternalWoodCount(t,r.valueAsNumber)},o.onchange=()=>{this.rf.SetExternalSteelCount(t,o.valueAsNumber)},this.ext_wood_inp.push(r),this.ext_steel_inp.push(o)}this.cabane=document.createElement("SELECT"),p(A("Reinforcement Cabane"),this.cabane,e);for(let t of this.rf.GetCabaneList()){let e=document.createElement("OPTION");e.text=A(t.name),this.cabane.add(e)}this.cabane.onchange=()=>{this.rf.SetCabane(this.cabane.selectedIndex)},this.cabane.selectedIndex=0,this.wires=document.createElement("INPUT"),f(A("Reinforcement Wires"),this.wires,e),this.wires.onchange=()=>{this.rf.SetWires(this.wires.checked)}}InitInternal(t){const e=h(t),s=this.rf.GetCantileverList();for(let t=0;t<s.length;t++){let i=s[t],a=document.createElement("INPUT");_(A(i.name),a,e),a.min="0",a.onchange=()=>{this.rf.SetCantileverCount(t,a.valueAsNumber)},this.cant_inp.push(a)}this.wing_blades=document.createElement("INPUT"),f(A("Reinforcement Wing Blades"),this.wing_blades,e),this.wing_blades.onchange=()=>{this.rf.SetWingBlade(this.wing_blades.checked)}}InitStatDisplay(t){t.className="inner_table";const e=document.createElement("TABLE");e.className="inner_table",t.appendChild(e);const s=e.insertRow();c(s,A("Stat Drag")),c(s,A("Stat Mass")),c(s,A("Stat Cost"));const i=e.insertRow();this.d_drag=i.insertCell(),this.d_mass=i.insertCell(),this.d_cost=i.insertCell();const a=e.insertRow();c(a,A("Stat Structure")),c(a,A("Stat Raw Strain")),c(a,A("Reinforcement Aircraft Max Strain"));const n=e.insertRow();this.d_strc=n.insertCell(),this.d_maxs=n.insertCell(),this.d_amax=n.insertCell(),this.d_amax.className="part_local"}UpdateDisplay(){this.cabane.selectedIndex=this.rf.GetCabane(),this.wires.checked=this.rf.GetWires();const t=this.rf.GetExternalWoodCount(),e=this.rf.CanExternalWood();for(let s=0;s<t.length;s++)this.ext_wood_inp[s].valueAsNumber=t[s],this.ext_wood_inp[s].disabled=!e[s];const s=this.rf.GetExternalSteelCount(),i=this.rf.CanExternalWood();for(let t=0;t<s.length;t++)this.ext_steel_inp[t].valueAsNumber=s[t],this.ext_steel_inp[t].disabled=!i[t];const a=this.rf.GetCantileverCount();for(let t=0;t<a.length;t++)this.cant_inp[t].valueAsNumber=a[t];this.wing_blades.disabled=!this.rf.CanWingBlade(),this.wing_blades.checked=this.rf.GetWingBlade();const n=this.rf.PartStats();E(this.d_drag,n.drag.toString(),!1),E(this.d_mass,n.mass.toString(),!1),E(this.d_cost,n.cost.toString(),!1),E(this.d_strc,n.structure.toString(),!0),E(this.d_maxs,n.maxstrain.toString(),!0)}UpdateMaxStrain(t){E(this.d_amax,t.toString(),!0)}}class _t extends n{constructor(t,e,s){super(),this.fuel=t,this.boom=e,this.cargo=s,this.fuel_list=[],document.getElementById("lbl_load").textContent=A("Load Section Title");const i=document.getElementById("tbl_load"),a=document.createDocumentFragment();var n=w(a);c(n,A("Load Fuel")),c(n,A("Load Munitions")),c(n,A("Load Cargo and Passengers")),c(n,A("Load Load Stats")),n=w(a),this.InitFuel(n.insertCell()),this.InitMunitions(n.insertCell()),this.InitCargoAndPassengers(n.insertCell()),this.InitStats(n.insertCell()),i.appendChild(a)}InitFuel(t){const e=this.fuel.GetTankList(),s=h(t);for(let t=0;t<e.length;t++){let i=document.createElement("INPUT");_(A(e[t].name),i,s),i.onchange=()=>{this.fuel.SetTankCount(t,i.valueAsNumber)},this.fuel_list.push(i)}this.seal=document.createElement("INPUT"),f(A("Load Self-Sealing Gas Tank"),this.seal,s),this.seal.onchange=()=>{this.fuel.SetSelfSealing(this.seal.checked)},this.extinguish=document.createElement("INPUT"),f(A("Load Remote Fire Extinguisher"),this.extinguish,s),this.extinguish.onchange=()=>{this.fuel.SetExtinguisher(this.extinguish.checked)}}InitMunitions(t){const e=h(t);this.bombs=document.createElement("INPUT"),_(A("Load Bombs"),this.bombs,e),this.bombs.onchange=()=>{this.boom.SetBombCount(this.bombs.valueAsNumber)},this.rockets=document.createElement("INPUT"),_(A("Load Rockets"),this.rockets,e),this.rockets.onchange=()=>{this.boom.SetRocketCount(this.rockets.valueAsNumber)},this.bay_count=document.createElement("INPUT"),_(A("Load Internal Bay Count"),this.bay_count,e),this.bay_count.onchange=()=>{this.boom.SetBayCount(this.bay_count.valueAsNumber)},this.bay1=document.createElement("INPUT"),f(A("Load Widen Internal Bay 1"),this.bay1,e),this.bay1.onchange=()=>{this.boom.SetUseBays(this.bay1.checked,this.bay2.checked)},this.bay2=document.createElement("INPUT"),f(A("Load Widen Internal Bay 2"),this.bay2,e),this.bay2.onchange=()=>{this.boom.SetUseBays(this.bay1.checked,this.bay2.checked)}}InitCargoAndPassengers(t){this.carg=document.createElement("SELECT"),t.appendChild(this.carg);const e=this.cargo.GetSpaceList();for(let t of e){let e=document.createElement("OPTION");e.text=A(t.name),this.carg.add(e)}this.carg.onchange=()=>{this.cargo.SetSpace(this.carg.selectedIndex)}}InitStats(t){t.className="inner_table";const e=document.createElement("TABLE");e.className="inner_table",t.appendChild(e);const s=e.insertRow();c(s,A("Stat Drag")),c(s,A("Stat Mass")),c(s,A("Stat Wet Mass"));const i=e.insertRow();this.d_drag=i.insertCell(),this.d_mass=i.insertCell(),this.d_wmas=i.insertCell();var a=e.insertRow();c(a,A("Stat Required Sections")),c(a,A("Stat Fuel")),c(a,A("Stat Cost"));var n=e.insertRow();this.d_rsec=n.insertCell(),this.d_fuel=n.insertCell(),this.d_cost=n.insertCell(),c(a=e.insertRow(),""),c(a,A("Derived Fuel Uses")),c(a,""),(n=e.insertRow()).insertCell(),this.d_fuse=n.insertCell(),n.insertCell()}UpdateFuelUses(t){var e=Math.floor(1e-6+10*t)/10;isFinite(e)||(e=0),E(this.d_fuse,e.toString(),!1)}UpdateDisplay(){const t=this.fuel.GetTankCount(),e=this.fuel.GetTankEnabled();for(let s=0;s<t.length;s++)this.fuel_list[s].valueAsNumber=t[s],this.fuel_list[s].disabled=!e[s];this.seal.checked=this.fuel.GetSelfSealing(),this.seal.disabled=!this.fuel.GetSealingEnabled(),this.extinguish.checked=this.fuel.GetExtinguisher(),this.bombs.valueAsNumber=this.boom.GetBombCount(),this.rockets.valueAsNumber=this.boom.GetRocketCount(),this.bay_count.valueAsNumber=this.boom.GetBayCount(),this.bay1.checked=this.boom.GetBay1(),this.bay2.checked=this.boom.GetBay2(),this.boom.GetBayCount()>0?(this.bay1.disabled=!1,this.bay1.checked?this.bay2.disabled=!1:this.bay2.disabled=!0):(this.bay1.disabled=!0,this.bay2.disabled=!0),this.carg.selectedIndex=this.cargo.GetSpace();var s=this.fuel.PartStats();s=(s=s.Add(this.boom.PartStats())).Add(this.cargo.PartStats()),E(this.d_drag,s.drag.toString(),!1),E(this.d_mass,s.mass.toString(),!1),E(this.d_wmas,s.wetmass.toString(),!1),E(this.d_rsec,s.reqsections.toString(),!1),E(this.d_fuel,s.fuel.toString(),!0),E(this.d_cost,s.cost.toString(),!1)}}class mt extends n{constructor(t){super(),this.gear=t,document.getElementById("lbl_landing_gear").textContent=A("Landing Gear Section Title");const e=document.getElementById("tbl_gear"),s=document.createDocumentFragment();var i=w(s);c(i,A("Landing Gear Landing Gear")),c(i,A("Landing Gear Extras")),c(i,A("Landing Gear Gear Stats")),i=w(s),this.InitGear(i.insertCell()),this.InitExtras(i.insertCell()),this.InitStats(i.insertCell()),e.appendChild(s)}InitGear(t){const e=this.gear.GetGearList(),s=h(t);this.sel=document.createElement("SELECT"),p("Type",this.sel,s);for(let t=0;t<e.length;t++){let s=document.createElement("OPTION");s.text=A(e[t].name),this.sel.add(s)}this.sel.onchange=()=>{this.gear.SetGear(this.sel.selectedIndex)},this.retract=document.createElement("INPUT"),f(A("Landing Gear Retractable"),this.retract,s),this.retract.onchange=()=>{this.gear.SetRetract(this.retract.checked)}}InitExtras(t){this.extras=[];const e=this.gear.GetExtraList(),s=h(t);for(let t=0;t<e.length;t++){let i=document.createElement("INPUT");f(A(e[t].name),i,s),i.onchange=()=>{this.gear.SetExtraSelected(t,i.checked)},this.extras.push(i)}}InitStats(t){t.className="inner_table";const e=document.createElement("TABLE");e.className="inner_table",t.appendChild(e);const s=e.insertRow();c(s,A("Stat Drag")),c(s,A("Stat Mass")),c(s,A("Stat Cost"));const i=e.insertRow();this.d_drag=i.insertCell(),this.d_mass=i.insertCell(),this.d_cost=i.insertCell();const a=e.insertRow();c(a,A("Stat Structure")),c(a,A("Stat Crash Safety")),c(a,"");const n=e.insertRow();this.d_strc=n.insertCell(),this.d_crsh=n.insertCell(),n.insertCell()}SetCollapse(){P("gear_collapse",!this.gear.IsDefault())}UpdateDisplay(){this.sel.selectedIndex=this.gear.GetGear();const t=this.gear.CanGear();for(let e=0;e<t.length;e++)this.sel.options[e].disabled=!t[e];this.retract.checked=this.gear.GetRetract(),this.retract.disabled=!this.gear.CanRetract();const e=this.gear.GetExtraSelected();for(let t=0;t<e.length;t++)this.extras[t].checked=e[t];const s=this.gear.PartStats();E(this.d_drag,s.drag.toString(),!1),E(this.d_mass,s.mass.toString(),!1),E(this.d_cost,s.cost.toString(),!1),E(this.d_strc,s.structure.toString(),!0),E(this.d_crsh,s.crashsafety.toString(),!0)}}class pt extends n{constructor(t){super(),this.acc=t,document.getElementById("lbl_accessories").textContent=A("Accessories Section Title");const e=document.getElementById("tbl_accessories"),s=document.createDocumentFragment();var i=w(s);c(i,A("Accessories Climate")),c(i,A("Accessories Armour Coverage")),c(i,A("Accessories Visibility")),c(i,A("Accessories Additional Part Stats")),i=w(s),this.InitClimate(i.insertCell()),this.InitArmour(i.insertCell()),this.InitVisibility(i.insertCell()),this.InitStats(i.insertCell()),c(i=w(s),A("Accessories Information")),c(i,A("Accessories Electrical")),c(i,A("Accessories Control")),i=w(s),this.InitInformation(i.insertCell()),this.InitElectrical(i.insertCell()),this.InitControl(i.insertCell()),e.appendChild(s)}InitArmour(t){const e=h(t),s=h(e.div1),i=h(e.div2);this.a_AP=[];const a=this.acc.GetArmourCoverageForDisplay().length;for(let t=0;t<a;t++)this.a_AP.push(document.createElement("INPUT"));for(let t=0;t<a/2;t++){let e=t+1;_("Thickness "+e.toString(),this.a_AP[t],s),this.a_AP[t].onchange=()=>{this.acc.SetArmourCoverage(t,this.a_AP[t].valueAsNumber)};let n=t+a/2;e=n+1,_("Thickness "+e.toString(),this.a_AP[n],i),this.a_AP[n].onchange=()=>{this.acc.SetArmourCoverage(n,this.a_AP[n].valueAsNumber)}}}InitElectrical(t){const e=h(t);this.radio=document.createElement("SELECT"),p(A("Accessories Radio"),this.radio,e);const s=this.acc.GetRadioList();for(let t=0;t<s.length;t++){let e=document.createElement("OPTION");e.text=A(s[t].name),this.radio.add(e)}this.radio.onchange=()=>{this.acc.SetRadioSel(this.radio.selectedIndex)},this.elect=[];const i=this.acc.GetElectricalList();for(let t=0;t<i.length;t++){let s=document.createElement("INPUT");_(A(i[t].name),s,e),s.onchange=()=>{this.acc.SetElectricalCount(t,s.valueAsNumber)},this.elect.push(s)}}InitInformation(t){const e=h(t),s=this.acc.GetReconList();this.recon=[];for(let t=0;t<s.length;t++){let i=document.createElement("INPUT");_(A(s[t].name),i,e),i.min="0",i.onchange=()=>{this.acc.SetReconSel(t,i.valueAsNumber)},this.recon.push(i)}}InitVisibility(t){const e=h(t),s=this.acc.GetVisibilityList();this.visi=[];for(let t=0;t<s.length;t++){let i=document.createElement("INPUT");f(A(s[t].name),i,e),i.onchange=()=>{this.acc.SetVisibilitySel(t,i.checked)},this.visi.push(i)}}InitClimate(t){const e=h(t),s=this.acc.GetClimateList();this.clim=[];for(let t=0;t<s.length;t++){let i=document.createElement("INPUT");f(A(s[t].name),i,e),i.onchange=()=>{this.acc.SetClimateSel(t,i.checked)},this.clim.push(i)}}InitControl(t){const e=h(t);this.auto=document.createElement("SELECT");const s=this.acc.GetAutopilotList();p(A("Accessories Autopilot"),this.auto,e);for(let t=0;t<s.length;t++){let e=document.createElement("OPTION");e.text=A(s[t].name),this.auto.add(e)}this.auto.onchange=()=>{this.acc.SetAutopilotSel(this.auto.selectedIndex)};const i=this.acc.GetControlList();this.cont=document.createElement("SELECT"),p(A("Accessories Control Aids"),this.cont,e);for(let t=0;t<i.length;t++){let e=document.createElement("OPTION");e.text=A(i[t].name),this.cont.add(e)}this.cont.onchange=()=>{this.acc.SetControlSel(this.cont.selectedIndex)}}InitStats(t){t.rowSpan=3,t.className="inner_table";const e=document.createElement("TABLE");e.className="inner_table",t.appendChild(e);const s=e.insertRow();c(s,A("Stat Drag")),c(s,A("Stat Mass")),c(s,A("Stat Cost"));const i=e.insertRow();this.d_drag=i.insertCell(),this.d_mass=i.insertCell(),this.d_cost=i.insertCell();const a=e.insertRow();c(a,A("Stat Structure")),c(a,A("Stat Charge")),c(a,A("Stat Lift Bleed"));const n=e.insertRow();this.d_strc=n.insertCell(),this.d_chgh=n.insertCell(),this.d_lift=n.insertCell();const r=e.insertRow();c(r,A("Stat Visibility")),c(r,A("Stat Flight Stress")),c(r,A("Stat Required Sections"));const o=e.insertRow();this.d_visi=o.insertCell(),this.d_strs=o.insertCell(),this.d_rsec=o.insertCell()}UpdateDisplay(){const t=this.acc.GetArmourCoverageForDisplay();for(let e=0;e<t.length;e++)this.a_AP[e].valueAsNumber=t[e];this.radio.selectedIndex=this.acc.GetRadioSel();const e=this.acc.GetElectricalCount();for(let t=0;t<e.length;t++)this.elect[t].valueAsNumber=e[t];const s=this.acc.GetReconSel();for(let t=0;t<s.length;t++)this.recon[t].valueAsNumber=s[t];const i=this.acc.GetVisibilitySel(),a=this.acc.GetCanVisibility();for(let t=0;t<i.length;t++)this.visi[t].checked=i[t],this.visi[t].disabled=!a[t];const n=this.acc.GetClimateSel(),r=this.acc.GetClimateEnable();for(let t=0;t<i.length;t++)this.clim[t].checked=n[t],this.clim[t].disabled=!r[t];this.auto.selectedIndex=this.acc.GetAutopilotSel(),this.cont.selectedIndex=this.acc.GetControlSel();const o=this.acc.PartStats();E(this.d_drag,o.drag.toString(),!1),E(this.d_mass,o.mass.toString(),!1),E(this.d_cost,o.cost.toString(),!1),E(this.d_strc,o.structure.toString(),!0),E(this.d_chgh,o.charge.toString(),!0),E(this.d_lift,o.liftbleed.toString(),!1),E(this.d_visi,o.visibility.toString(),!0),E(this.d_strs,o.flightstress.toString(),!1),E(this.d_rsec,o.reqsections.toString(),!1)}}class dt extends n{constructor(t){super(),this.opt=t,document.getElementById("lbl_optimization").textContent=A("Optimization Section Title"),document.getElementById("lbl_num_opt").textContent=A("Optimization Num Free Optimizations"),this.free_inp=document.getElementById("num_opt"),this.free_inp.onchange=()=>{this.opt.SetFreeDots(this.free_inp.valueAsNumber)};const e=document.getElementById("tbl_optimization"),s=document.createDocumentFragment(),i=w(s);c(i,A("Optimization Negative")),c(i,A("Optimization Effect")),c(i,A("Optimization Positive")),c(i,A("Optimization Optimization Stats"));const a=w(s);this.cost_cbx=this.InitRow(a,A("Optimization Cost"),(t=>this.opt.SetCost(t))),this.bleed_cbx=this.InitRow(w(s),A("Optimization Lift Bleed"),(t=>this.opt.SetBleed(t))),this.escape_cbx=this.InitRow(w(s),A("Optimization Leg Room"),(t=>this.opt.SetEscape(t))),this.mass_cbx=this.InitRow(w(s),A("Optimization Mass"),(t=>this.opt.SetMass(t))),this.toughness_cbx=this.InitRow(w(s),A("Optimization Toughness"),(t=>this.opt.SetToughness(t))),this.maxstrain_cbx=this.InitRow(w(s),A("Optimization Max Strain"),(t=>this.opt.SetMaxStrain(t))),this.reliability_cbx=this.InitRow(w(s),A("Optimization Reliability"),(t=>this.opt.SetReliability(t))),this.drag_cbx=this.InitRow(w(s),A("Optimization Drag"),(t=>this.opt.SetDrag(t))),this.InitStatDisplay(a.insertCell()),e.appendChild(s)}InitRow(t,e,s){const i=[];for(let t=0;t<6;t++)i.push(document.createElement("INPUT")),i[t].setAttribute("type","checkbox"),i[t].onchange=t<3?()=>{i[t].checked?s(t-3):s(t-2)}:()=>{i[t].checked?s(t-2):s(t-3)};const a=t.insertCell(),n=t.insertCell(),r=t.insertCell();return a.appendChild(i[0]),a.appendChild(i[1]),a.appendChild(i[2]),n.textContent=e,r.appendChild(i[3]),r.appendChild(i[4]),r.appendChild(i[5]),i}InitStatDisplay(t){t.rowSpan=0,t.className="inner_table";const e=document.createElement("TABLE");e.className="inner_table",t.appendChild(e);const s=e.insertRow();c(s,A("Stat Cost")),c(s,A("Stat Lift Bleed")),c(s,A("Stat Escape"));const i=e.insertRow();this.d_cost=i.insertCell(),this.d_lift=i.insertCell(),this.d_escp=i.insertCell();const a=e.insertRow();c(a,A("Stat Visibility")),c(a,A("Stat Mass")),c(a,A("Stat Toughness"));const n=e.insertRow();this.d_visi=n.insertCell(),this.d_mass=n.insertCell(),this.d_tugh=n.insertCell();const r=e.insertRow();c(r,A("Stat Max Strain")),c(r,A("Stat Reliability")),c(r,A("Stat Drag"));const o=e.insertRow();this.d_mstr=o.insertCell(),this.d_reli=o.insertCell(),this.d_drag=o.insertCell()}SetCollapse(){P("optimization_collapse",!this.opt.IsDefault())}UpdateChecked(t,e){for(let t=0;t<e.length;t++)e[t].checked=!1;t<0?(e[2].checked=!0,t<-1&&(e[1].checked=!0,t<-2&&(e[0].checked=!0))):t>0&&(e[3].checked=!0,t>1&&(e[4].checked=!0,t>2&&(e[5].checked=!0)))}UpdateEnabled(t,e){var s=0;for(let i=3;i<e.length;i++)e[i].checked||s++,e[i].disabled=s>t}UpdateDisplay(){this.free_inp.valueAsNumber=this.opt.GetFreeDots(),this.UpdateChecked(this.opt.GetCost(),this.cost_cbx),this.UpdateChecked(this.opt.GetBleed(),this.bleed_cbx),this.UpdateChecked(this.opt.GetEscape(),this.escape_cbx),this.UpdateChecked(this.opt.GetMass(),this.mass_cbx),this.UpdateChecked(this.opt.GetToughness(),this.toughness_cbx),this.UpdateChecked(this.opt.GetMaxStrain(),this.maxstrain_cbx),this.UpdateChecked(this.opt.GetReliabiilty(),this.reliability_cbx),this.UpdateChecked(this.opt.GetDrag(),this.drag_cbx);const t=this.opt.GetUnassignedCount();this.UpdateEnabled(t,this.cost_cbx),this.UpdateEnabled(t,this.bleed_cbx),this.UpdateEnabled(t,this.escape_cbx),this.UpdateEnabled(t,this.mass_cbx),this.UpdateEnabled(t,this.toughness_cbx),this.UpdateEnabled(t,this.maxstrain_cbx),this.UpdateEnabled(t,this.reliability_cbx),this.UpdateEnabled(t,this.drag_cbx);const e=this.opt.PartStats();E(this.d_cost,e.cost.toString(),!1),E(this.d_lift,e.liftbleed.toString(),!1),E(this.d_escp,e.escape.toString(),!0),E(this.d_visi,e.visibility.toString(),!0),E(this.d_mass,e.mass.toString(),!1),E(this.d_tugh,e.toughness.toString(),!0),E(this.d_mstr,this.opt.final_ms.toString(),!0),E(this.d_reli,e.reliability.toString(),!0),E(this.d_drag,e.drag.toString(),!1)}}var gt,ft,yt,bt,St;!function(t){t[t.AIRPLANE=0]="AIRPLANE",t[t.HELICOPTER=1]="HELICOPTER",t[t.AUTOGYRO=2]="AUTOGYRO",t[t.ORNITHOPTER_BASIC=3]="ORNITHOPTER_BASIC",t[t.ORNITHOPTER_FLUTTER=4]="ORNITHOPTER_FLUTTER",t[t.ORNITHOPTER_BUZZER=5]="ORNITHOPTER_BUZZER"}(gt||(gt={}));class wt{FormatEquipment(t,e,s){return Math.abs(s)>.5?t.push({source:A(e),charge:s.toString()}):s>0&&s<1e-6&&t.push({source:A(e),charge:"-"}),t}}function Ct(t,e){for(let s=0;s<e.equipment.length;s++){let i=!1;for(let a=0;a<t.equipment.length;a++)if(t.equipment[a].source==e.equipment[s].source&&!isNaN(parseInt(t.equipment[a].charge))){t.equipment[a].charge=(parseInt(t.equipment[a].charge)+parseInt(e.equipment[s].charge)).toString(),i=!0;break}i||t.equipment.push(e.equipment[s])}return{storage:t.storage+e.storage,equipment:t.equipment}}!function(t){t[t.NONE=-1]="NONE",t[t.INTERRUPT=0]="INTERRUPT",t[t.SYNCH=1]="SYNCH",t[t.SPINNER=2]="SPINNER",t[t.DEFLECT=3]="DEFLECT",t[t.NO_INTERFERENCE=4]="NO_INTERFERENCE",t[t.ENUM_MAX=5]="ENUM_MAX"}(ft||(ft={})),function(t){t[t.BULLETS=0]="BULLETS",t[t.HEATRAY=1]="HEATRAY",t[t.PNEUMATIC=2]="PNEUMATIC",t[t.ENUM_MAX=3]="ENUM_MAX",t[t.GYROJETS=4]="GYROJETS"}(yt||(yt={})),function(t){t[t.STANDARD=0]="STANDARD",t[t.MECHANICAL=1]="MECHANICAL",t[t.GAST=2]="GAST",t[t.ROTARY=3]="ROTARY",t[t.ENUM_MAX=4]="ENUM_MAX"}(bt||(bt={}));class Gt extends wt{constructor(t,e,s,i=!1){super(),this.weapon_type=t,this.fixed=i,this.wing=!0,this.covered=!1,this.accessible=!1,this.free_accessible=!1,this.synchronization=i?ft.NONE:ft.INTERRUPT,this.w_count=1,this.repeating=!1,this.wing_reinforcement=!1}toJSON(){return{fixed:this.fixed,wing:this.wing,covered:this.covered,accessible:this.accessible,free_accessible:this.free_accessible,synchronization:this.synchronization,w_count:this.w_count}}fromJSON(t,e){this.fixed=t.fixed,this.wing=t.wing,this.covered=t.covered,this.accessible=t.accessible,this.free_accessible=t.free_accessible,this.synchronization=t.synchronization,this.w_count=t.w_count,e<10.95&&(this.repeating=t.repeating)}serialize(t){t.PushBool(this.fixed),t.PushBool(this.wing),t.PushBool(this.covered),t.PushBool(this.accessible),t.PushBool(this.free_accessible),t.PushNum(this.synchronization),t.PushNum(this.w_count)}deserialize(t){this.fixed=t.GetBool(),this.wing=t.GetBool(),this.covered=t.GetBool(),this.accessible=t.GetBool(),this.free_accessible=t.GetBool(),this.synchronization=t.GetNum(),this.w_count=t.GetNum(),t.version<10.95&&(this.repeating=t.GetBool())}SetWeaponType(t,e,s){this.weapon_type=t,this.action=e,16==this.weapon_type.size&&(this.w_count=1),this.SetCount(this.w_count,!1)}GetFixed(){return this.fixed}SetFixed(t){t!=this.fixed&&(t?this.fixed=!0:(this.fixed=!1,this.synchronization=ft.NONE))}SetCanWing(t){this.canwing=t,this.wing&&!t&&(this.wing=!1)}GetWing(){return this.wing}CanWing(){return this.weapon_type.size<=16&&this.canwing}SetWing(t){t&&this.CanWing()?(this.wing=!0,this.free_accessible=!1,this.synchronization=ft.NONE):this.wing=!1,this.CalculateStats()}CanCovered(){return this.wing?this.has_cantilever&&!(16==this.weapon_type.size&&!this.fixed):!(this.GetArty()&&!this.fixed)}GetCovered(){return this.covered}SetCovered(t){this.covered=t,this.CalculateStats()}GetAccessible(){return this.accessible||this.free_accessible}SetAccessible(t){t&&this.free_accessible&&(t=!1),this.accessible=t,this.CalculateStats()}GetFreeAccessible(){return this.free_accessible}SetFreeAccessible(t){t&&!this.wing&&this.can_free_accessible?(this.free_accessible=!0,this.accessible=!1):this.free_accessible=!1,this.CalculateStats()}CanSynchronization(){const t=[];for(let e=-1;e<ft.ENUM_MAX;e++)t.push(this.CanSynch(e));return t}CanSynch(t){return this.fixed||this.wing?!(this.can_synchronize&&t==ft.NONE||!this.can_synchronize&&t!=ft.NONE||"Fliergerflammenwerfer"==this.weapon_type.name&&t!=ft.NONE&&t!=ft.SPINNER&&t!=ft.NO_INTERFERENCE||!(this.action!=bt.MECHANICAL||t==ft.NONE||t==ft.SYNCH||t==ft.SPINNER&&this.CanSpinner())||this.action==bt.GAST&&t==ft.SPINNER||!(t!=ft.INTERRUPT&&t!=ft.SYNCH||this.weapon_type.synched)||t==ft.SPINNER&&!this.CanSpinner()||t==ft.DEFLECT&&this.GetArty()):this.can_synchronize?(t==ft.NONE||t==ft.DEFLECT||t==ft.NO_INTERFERENCE)&&(t!=ft.NONE&&t!=ft.DEFLECT||!this.GetArty()):t==ft.NONE}GetSynchronization(){return this.synchronization}SetSynchronization(t){this.CanSynch(t)?this.synchronization=t:this.synchronization=ft.NONE,this.synchronization==ft.SPINNER&&(this.w_count=1),this.CalculateStats()}GetCount(){return this.w_count}SetCount(t,e=!0){for(t!=t&&(t=1),t=Math.max(1,t),this.synchronization==ft.SPINNER&&(t=1),"Precision Rifle"==this.weapon_type.name&&(t=1);t*this.weapon_type.size>16;)t-=1;this.w_count=t,e&&this.CalculateStats()}CanRepeating(){return!this.weapon_type.rapid||this.weapon_type.reload>0}GetRepeating(){return this.repeating}SetRepeating(t){t&&this.CanRepeating()?this.repeating=!0:this.repeating=!1,this.CalculateStats()}ResolveSynch(){const t=this.synchronization;if(this.synchronization=ft.ENUM_MAX,this.CanSynch(t))this.action==bt.MECHANICAL&&t!=ft.SPINNER?this.synchronization=ft.SYNCH:this.synchronization=t;else{for(let t=-1;t<ft.ENUM_MAX;t++)if(this.CanSynch(t)){this.synchronization=t;break}this.synchronization==ft.ENUM_MAX&&this.SetWing(!0)}this.wing&&(this.synchronization=ft.NONE),this.synchronization==ft.SPINNER&&(this.w_count=1,this.covered=!0),this.IsLightningArc()&&(this.synchronization=ft.NO_INTERFERENCE)}GetArty(){return 16==this.weapon_type.size}CanSpinner(){return this.GetArty()?this.can_spinner&&this.can_arty_spinner:this.can_spinner}GetJam(){if(this.weapon_type.rapid){const t=this.weapon_type.jam.split("/"),e=[parseInt(t[0]),parseInt(t[1])];return this.synchronization==ft.INTERRUPT&&(e[0]++,e[1]++),this.repeating&&(e[0]++,e[1]++),e}var t=parseInt(this.weapon_type.jam);return this.synchronization==ft.INTERRUPT&&(t+=1),this.repeating&&(t+=1),t}IsLightningArc(){return"Lightning Arc"==this.weapon_type.name}SetTurret(t){this.turret=t}SetCalculateStats(t){this.CalculateStats=t}PartStats(){var t=new D;this.ResolveSynch(),!this.CanCovered()&&this.covered&&(this.covered=!1),16==this.weapon_type.size&&(this.covered=this.fixed);var e=0;for(let s=0;s<this.w_count;s++)t=t.Add(this.weapon_type.stats),e+=this.weapon_type.size;if(this.covered){var s=0;this.weapon_type.size<=1?s=0:this.weapon_type.size<=2?s=1:this.weapon_type.size<=4?s=2:this.weapon_type.size<=8?s=5:this.weapon_type.size<=16&&(s=0),s*=this.w_count,this.fixed||(s*=2),this.synchronization!=ft.SPINNER&&(t.cost+=s),t.drag*=0}if(this.wing&&!this.covered&&(t.drag+=this.w_count),(this.turret&&e>8||16==this.weapon_type.size)&&(t.reqsections+=1),this.accessible&&(t.cost+=Math.max(1,Math.floor(1e-6+this.w_count/2))),!this.fixed)if(e<=2);else if(e<=4)t.cost+=1;else if(e<=8)t.mass+=1,t.cost+=3;else{if(!(e<=16))throw"Weapon size screwup in Turret size cost.";t.mass+=2,t.cost+=5}return this.synchronization==ft.INTERRUPT?(t.cost+=2*this.w_count,"Light Machine Cannon"==this.weapon_type.name&&(t.cost+=2*this.w_count),t.era.push({name:A("Interruptor Gear"),era:A("WWI")})):this.synchronization==ft.SYNCH&&this.action!=bt.MECHANICAL?(t.cost+=3*this.w_count,"Light Machine Cannon"==this.weapon_type.name&&(t.cost+=3*this.w_count),t.era.push({name:A("Synchronization Gear"),era:A("Roaring 20s")})):this.synchronization==ft.DEFLECT?(t.cost+=1,t.warnings.push({source:A(this.weapon_type.name),warning:A("Deflector Plate Warning"),color:q.WHITE})):this.synchronization!=ft.NO_INTERFERENCE||this.IsLightningArc()||t.warnings.push({source:A(this.weapon_type.name)+" "+A("No Interference"),warning:A("No Interference Warning"),color:q.YELLOW}),this.wing_reinforcement&&(t.mass+=2),t.Round(),t}GetElectrics(){return{storage:0,equipment:[]}}}class vt extends n{constructor(t){super(),this.weap=t,document.getElementById("lbl_weapons").textContent=A("Weapons Section Title"),document.getElementById("lbl_num_wsets").textContent=A("Weapons Number of Weapon Sets"),this.inp_w_count=document.getElementById("num_wsets"),this.inp_w_count.onchange=()=>{this.weap.SetWeaponSetCount(this.inp_w_count.valueAsNumber)},document.getElementById("lbl_num_wbraces").textContent=A("Weapons Number of Weapon Braces"),this.inp_w_brace=document.getElementById("num_wbraces"),this.inp_w_brace.onchange=()=>{this.weap.SetBraceCount(this.inp_w_brace.valueAsNumber)},this.tbl=document.getElementById("table_weapons"),this.wrow=[]}CreateWSetRow(){const t=document.createDocumentFragment(),e=this.tbl.insertRow(),s=function(t,e){const s=document.createElement("TD");return s.innerHTML="",t.appendChild(s),s}(e),i=document.createElement("SPAN");c(e,A("Weapons Weapons")),c(e,A("Weapons Weapon Stats"));const a=w(t),n=a.insertCell(),r={plus:document.createElement("BUTTON"),minus:document.createElement("BUTTON"),type:document.createElement("SELECT"),dirs:[],count:document.createElement("INPUT"),action:document.createElement("SELECT"),projectile:document.createElement("SELECT"),fixed:document.createElement("INPUT"),wcell:null,weaps:[],ammo:document.createElement("INPUT"),stats:{mass:null,drag:null,cost:null,sect:null,mounting:null,jams:null,hits:null,damg:null,shots:null,shots_header:null},repeating:document.createElement("INPUT"),seat:document.createElement("SELECT")},o=this.weap.GetWeaponList();for(const t of o){const e=document.createElement("OPTION");e.text=A(t.name)+" ("+A(t.era)+")",r.type.add(e)}r.type.required=!0;const l=this.weap.GetSeatList();for(const t of l){const e=document.createElement("OPTION");e.text=t,r.seat.add(e)}const u=this.weap.GetActionList();for(const t of u){const e=document.createElement("OPTION");e.text=A(t.name),r.action.add(e)}r.action.required=!0;const m=this.weap.GetProjectileList();for(const t of m){const e=document.createElement("OPTION");e.text=A(t.name),r.projectile.add(e)}r.projectile.required=!0,r.plus.textContent="+",r.minus.textContent="-";const d=h(n);i.appendChild(r.minus),i.appendChild(r.plus);const g=c(i,A("Weapons Weapon Set"));g.style.border="none",g.style.width="100%",g.style.padding="0",i.style.display="inline-flex",i.style.width="100%",s.appendChild(i),p(A("Weapons Type"),r.type,d),p(A("Seat Location"),r.seat,d);const y=h(d.div1),b=h(d.div2);_(A("Weapons Number of Mounts"),r.count,y),_(A("Weapons Ammunition"),r.ammo,b),p(A("Weapons Action"),r.action,y),p(A("Weapons Projectile"),r.projectile,b),f(A("Weapons Belt Fed"),r.repeating,y),S(b),f(A("Fixed"),r.fixed,y),S(b);const C=this.weap.GetDirectionList();for(let t=0;t<C.length;t+=2){const e=A(C[t]);var G=document.createElement("INPUT");f(e,G,y),r.dirs.push(G),f(A(C[t+1]),G=document.createElement("INPUT"),b),r.dirs.push(G)}r.wcell=a.insertCell();const v=a.insertCell();v.classList.toggle("inner_table");const E=document.createElement("TABLE");E.classList.toggle("inner_table"),v.appendChild(E);const P=E.insertRow();c(P,A("Stat Mass")),c(P,A("Stat Drag")),c(P,A("Stat Cost"));const R=E.insertRow();r.stats.mass=R.insertCell(),r.stats.drag=R.insertCell(),r.stats.cost=R.insertCell();const x=E.insertRow();c(x,A("Stat Required Sections")),c(x,A("Weapons Stat Mounting")),c(x,A("Weapons Stat Jam"));const I=E.insertRow();r.stats.sect=I.insertCell(),r.stats.mounting=I.insertCell(),r.stats.jams=I.insertCell();const M=E.insertRow();c(M,A("Weapons Stat Hits")),c(M,A("Weapons Stat Damage")),r.stats.shots_header=c(M,A("Weapons Stat Shots"));const N=E.insertRow();return r.stats.hits=N.insertCell(),r.stats.damg=N.insertCell(),r.stats.shots=N.insertCell(),this.tbl.appendChild(t),r}CreateWRow(t){const e={span:document.createElement("SPAN"),wing:document.createElement("INPUT"),covered:document.createElement("INPUT"),accessible:document.createElement("INPUT"),free_access:document.createElement("INPUT"),synch:document.createElement("SELECT"),count:document.createElement("INPUT")};d(A("Weapons Wing Mount"),e.wing,e.span,!1),d(A("Weapons Accessible"),e.accessible,e.span,!1),d(A("Weapons Free Accessible"),e.free_access,e.span,!1),d(A("Weapons Covered"),e.covered,e.span,!0),u(A("Weapons # Weapons at Mount"),e.count,e.span,!1),function(t,e,s,i=!0){const a=document.createElement("SPAN"),n=document.createElement("LABEL");e.id=l(),n.htmlFor=e.id,n.style.marginLeft="0.25em",n.style.marginRight="0.5em",n.textContent=t,a.appendChild(n),a.appendChild(e),s.appendChild(a),i&&s.appendChild(document.createElement("BR"))}(A("Weapons Synchronization"),e.synch,e.span,!1),e.span.appendChild(document.createElement("HR"));const s=this.weap.GetSynchronizationList();for(const t of s){const s=document.createElement("OPTION");s.text=A(t),e.synch.add(s)}return t.appendChild(e.span),e}UpdateWSet(t,e){e.type.selectedIndex=t.GetWeaponSelected(),e.type.onchange=()=>{t.SetWeaponSelected(e.type.selectedIndex)};const s=this.weap.GetSeatList();if(e.seat.options.length!=s.length){for(;e.seat.options.length>0;)e.seat.options.remove(e.seat.options.length-1);for(const t of s){const s=document.createElement("OPTION");s.text=t,e.seat.add(s)}}e.seat.selectedIndex=t.GetSeat(),e.seat.onchange=()=>{t.SetSeat(e.seat.selectedIndex)},e.count.valueAsNumber=t.GetMountingCount(),e.count.onchange=()=>{t.SetMountingCount(e.count.valueAsNumber)},e.action.selectedIndex=t.GetAction();const i=t.GetCanAction();for(let t=0;t<i.length;t++)e.action.options[t].disabled=!i[t];e.action.onchange=()=>{t.SetAction(e.action.selectedIndex)},e.projectile.selectedIndex=t.GetProjectile();const a=t.GetCanProjectile();for(let t=0;t<a.length;t++)e.projectile.options[t].disabled=!a[t];e.projectile.onchange=()=>{t.SetProjectile(e.projectile.selectedIndex)},e.repeating.checked=t.GetRepeating(),e.repeating.onchange=()=>{t.SetRepeating(e.repeating.checked)},e.repeating.disabled=!t.CanRepeating(),e.fixed.checked=t.GetFixed(),e.fixed.onchange=()=>{t.SetFixed(e.fixed.checked)};const n=t.GetDirection(),r=t.CanDirection();for(let s=0;s<n.length;s++)e.dirs[s].checked=n[s],e.dirs[s].onchange=()=>{t.SetDirection(s,e.dirs[s].checked)},e.dirs[s].disabled=!r[s];e.ammo.valueAsNumber=t.GetAmmo(),e.ammo.onchange=()=>{t.SetAmmo(e.ammo.valueAsNumber)};const o=t.GetWeapons();for(;e.weaps.length<o.length;)e.weaps.push(this.CreateWRow(e.wcell));for(;e.weaps.length>o.length;){const t=e.weaps.pop();e.wcell.removeChild(t.span)}for(let t=0;t<o.length;t++){e.weaps[t].wing.checked=o[t].GetWing(),e.weaps[t].wing.onchange=()=>{o[t].SetWing(e.weaps[t].wing.checked)},e.weaps[t].wing.disabled=!o[t].CanWing(),e.weaps[t].covered.checked=o[t].GetCovered(),e.weaps[t].covered.onchange=()=>{o[t].SetCovered(e.weaps[t].covered.checked)},e.weaps[t].covered.disabled=!o[t].CanCovered(),e.weaps[t].accessible.checked=o[t].GetAccessible(),e.weaps[t].accessible.onchange=()=>{o[t].SetAccessible(e.weaps[t].accessible.checked)},e.weaps[t].free_access.checked=o[t].GetFreeAccessible(),e.weaps[t].free_access.onchange=()=>{o[t].SetFreeAccessible(e.weaps[t].free_access.checked)},e.weaps[t].free_access.disabled=!(o[t].can_free_accessible||o[t].GetFreeAccessible()),e.weaps[t].count.valueAsNumber=o[t].GetCount(),e.weaps[t].count.onchange=()=>{o[t].SetCount(e.weaps[t].count.valueAsNumber)},e.weaps[t].synch.selectedIndex=o[t].GetSynchronization()+1,e.weaps[t].synch.onchange=()=>{o[t].SetSynchronization(e.weaps[t].synch.selectedIndex-1)},e.weaps[t].synch.disabled=!o[t].can_synchronize;const s=o[t].CanSynchronization();for(let i=0;i<s.length;i++)e.weaps[t].synch.options[i].disabled=!s[i]}const l=t.PartStats();E(e.stats.mass,l.mass.toString(),!1),E(e.stats.drag,l.drag.toString(),!1),E(e.stats.cost,l.cost.toString(),!1),E(e.stats.sect,l.reqsections.toString(),!1);const h=t.GetHits(),c=h[0].toString()+"/"+h[1].toString()+"/"+h[2].toString()+"/"+h[3].toString();if(t.GetFixed()?E(e.stats.mounting,A("Fixed")):t.GetDirectionCount()<=2?E(e.stats.mounting,A("Flexible")):E(e.stats.mounting,A("Turret")),E(e.stats.jams,t.GetJam()),E(e.stats.hits,c),E(e.stats.damg,t.GetDamage().toString()),t.GetProjectile()==yt.HEATRAY||t.IsLightningArc()){const s=t.GetHRCharges();e.stats.shots_header.textContent=A("Weapons Stat Charges"),E(e.stats.shots,R.Join("/",s))}else e.stats.shots_header.textContent=A("Weapons Stat Shots"),E(e.stats.shots,t.GetShots().toString())}UpdateWSets(){const t=this.weap.GetWeaponSets();for(0==t.length?this.tbl.style.display="none":this.tbl.style.display="",this.inp_w_count.valueAsNumber=t.length;t.length>this.wrow.length;)this.wrow.push(this.CreateWSetRow());for(;t.length<this.wrow.length;)this.tbl.deleteRow(2*this.wrow.length-1),this.tbl.deleteRow(2*this.wrow.length-2),this.wrow.pop();for(let e=0;e<t.length;e++)this.wrow[e].plus.onclick=()=>{this.weap.DuplicateSet(e)},this.wrow[e].minus.onclick=()=>{this.weap.RemoveSet(e)},this.UpdateWSet(t[e],this.wrow[e])}UpdateDisplay(){this.UpdateWSets(),this.inp_w_count.valueAsNumber=this.weap.GetWeaponSets().length,this.inp_w_brace.valueAsNumber=this.weap.GetBraceCount()}}function Et(t,e){const s=t.GetDirection();let i=0;for(const t of s)t&&i++;let a="";return 1==i&&t.GetFixed()?a+=A("Fixed")+" ":a+=i<=2?A("Flexible")+" ":A("Turreted")+" ",t.GetAction()==bt.MECHANICAL?a+=A("Weapon Tag Mechanical Action")+" ":t.GetAction()==bt.GAST?a+=A("Weapon Tag Gast Principle")+" ":t.GetAction()==bt.ROTARY&&(a+=A("Weapon Tag Rotary")+" "),t.GetProjectile()==yt.HEATRAY?a+=A("Weapon Tag Heat Ray")+" ":t.GetProjectile()==yt.GYROJETS?a+=A("Weapon Tag Gyrojet")+" ":t.GetProjectile()==yt.PNEUMATIC&&(a+=A("Weapon Tag Pneumatic")+" "),a+=e[t.GetWeaponSelected()].abrv,a}function Pt(t){const e=[A("Weapon Tag Jam",t.GetJam())],s=t.GetFinalWeapon();return t.GetReload()>0&&(1==t.GetReload()?e.push(A("Weapon Tag Manual")):e.push(A("Weapon Tag Reload",t.GetReload()))),s.rapid&&e.push(A("Weapon Tag Rapid Fire")),s.shells&&e.push(A("Weapon Tag Shells")),s.ap>0&&e.push(A("Weapon Tag AP",s.ap)),t.GetIsFullyAccessible()?e.push(A("Weapon Tag Fully Accessible")):t.GetIsPartlyAccessible()?e.push(A("Weapon Tag Partly Accessible")):e.push(A("Weapon Tag Inaccessible")),s.deflection&&e.push(A("Weapon Tag Awkward",s.deflection)),e}function Rt(t,e,s){var i="";const a=t.GetDirection(),n=[];for(let t=0;t<s.length;t++)a[t]&&n.push(A(s[t]));const r=t.GetHits(),o=Pt(t);if(t.GetProjectile()==yt.HEATRAY){const s=t.GetHRCharges();i+=A("Weapon Description Heat Ray",A("Seat #",t.GetSeat()+1),t.GetWeaponCount(),Et(t,e),R.Join(" ",n),e[t.GetWeaponSelected()].damage,R.Join("/",r),R.Join("/",s),R.Join(", ",o))}else i+=A("Weapon Description",A("Seat #",t.GetSeat()+1),t.GetWeaponCount(),Et(t,e),R.Join(" ",n),e[t.GetWeaponSelected()].damage,R.Join("/",r),t.GetShots(),R.Join(", ",o));return i}class xt extends n{constructor(t){super(),this.used=t,document.getElementById("lbl_used").textContent=A("Used Section Title"),this.tbl=document.getElementById("tbl_used");const e=document.createDocumentFragment(),s=w(e);c(s,A("Used Effect")),c(s,A("Used Description")),c(s,A("Used Penalties(+) <br/> Benefits(-)")),this.InitTable(e),this.tbl.appendChild(e)}InitTable(t){this.burnt_out=document.createElement("INPUT"),this.ragged=document.createElement("INPUT"),this.hefty=document.createElement("INPUT"),this.sticky_guns=document.createElement("INPUT"),this.weak=document.createElement("INPUT"),this.fragile=document.createElement("INPUT"),this.leaky=document.createElement("INPUT"),this.sluggish=document.createElement("INPUT");var e=w(t);e.insertCell().textContent=A("Used Burnt Out"),e.insertCell().textContent=A("Used Burnt Out Description");var s=e.insertCell();u("",this.burnt_out,s,!1),(e=w(t)).insertCell().textContent=A("Used Ragged"),e.insertCell().textContent=A("Used Ragged Description"),s=e.insertCell(),u("",this.ragged,s,!1),(e=w(t)).insertCell().textContent=A("Used Hefty"),e.insertCell().textContent=A("Used Hefty Description"),s=e.insertCell(),u("",this.hefty,s,!1),(e=w(t)).insertCell().textContent=A("Used Sticky Guns"),e.insertCell().textContent=A("Used Sticky Guns Description"),s=e.insertCell(),u("",this.sticky_guns,s,!1),(e=w(t)).insertCell().textContent=A("Used Weak"),e.insertCell().textContent=A("Used Weak Description"),s=e.insertCell(),u("",this.weak,s,!1),(e=w(t)).insertCell().textContent=A("Used Fragile"),e.insertCell().textContent=A("Used Fragile Description"),s=e.insertCell(),u("",this.fragile,s,!1),(e=w(t)).insertCell().textContent=A("Used Leaky"),e.insertCell().textContent=A("Used Leaky Description"),s=e.insertCell(),u("",this.leaky,s,!1),(e=w(t)).insertCell().textContent=A("Used Sluggish"),e.insertCell().textContent=A("Used Sluggish Description"),s=e.insertCell(),u("",this.sluggish,s,!1),this.burnt_out.onchange=()=>{this.used.burnt_out=this.burnt_out.valueAsNumber,this.used.TriggerCS()},this.ragged.onchange=()=>{this.used.ragged=this.ragged.valueAsNumber,this.used.TriggerCS()},this.hefty.onchange=()=>{this.used.hefty=this.hefty.valueAsNumber,this.used.TriggerCS()},this.sticky_guns.onchange=()=>{this.used.sticky_guns=this.sticky_guns.valueAsNumber,this.used.TriggerCS()},this.weak.onchange=()=>{this.used.weak=this.weak.valueAsNumber,this.used.TriggerCS()},this.fragile.onchange=()=>{this.used.fragile=this.fragile.valueAsNumber,this.used.TriggerCS()},this.leaky.onchange=()=>{this.used.leaky=this.leaky.valueAsNumber,this.used.TriggerCS()},this.sluggish.onchange=()=>{this.used.sluggish=this.sluggish.valueAsNumber,this.used.TriggerCS()},this.burnt_out.min="-1",this.burnt_out.max="1",this.ragged.min="-1",this.ragged.max="1",this.hefty.min="-1",this.hefty.max="1",this.sticky_guns.min="-1",this.sticky_guns.max="1",this.weak.min="-1",this.weak.max="1",this.fragile.min="-1",this.fragile.max="1",this.leaky.min="-1",this.leaky.max="1",this.sluggish.min="-1",this.sluggish.max="1"}SetCollapse(){P("used_collapse",!this.used.IsDefault())}UpdateDisplay(){this.burnt_out.valueAsNumber=this.used.burnt_out,this.ragged.valueAsNumber=this.used.ragged,this.hefty.valueAsNumber=this.used.hefty,this.sticky_guns.valueAsNumber=this.used.sticky_guns,this.weak.valueAsNumber=this.used.weak,this.fragile.valueAsNumber=this.used.fragile,this.leaky.valueAsNumber=this.used.leaky,this.sluggish.valueAsNumber=this.used.sluggish}}class It extends n{constructor(t){super(),this.rotor=t,document.getElementById("lbl_rotor").textContent=A("Rotor Section Title"),this.div=document.getElementById("Rotors"),this.wing_div=document.getElementById("Wings"),this.reinforce_div=document.getElementById("Reinforcements"),this.control_div=document.getElementById("ControlSurfaces");const e=document.getElementById("rotor_table"),s=document.createDocumentFragment();this.InitAutogyro(s),this.InitHelicopter(s),e.appendChild(s)}InitAutogyro(t){this.auto_header=w(t),c(this.auto_header,A("Rotor Rotor")),c(this.auto_header,A("Rotor Material")),c(this.auto_header,A("Rotor Accessories")),c(this.auto_header,A("Rotor Stats")),this.auto_row=w(t);const e=h(this.auto_row.insertCell());this.auto_min=document.createElement("LABEL"),m(A("Rotor Minimum Span"),this.auto_min,e),this.auto_span=document.createElement("INPUT"),_(A("Rotor Span"),this.auto_span,e),this.auto_span.onchange=()=>{this.rotor.SetRotorSpan(this.auto_span.valueAsNumber)};const s=h(this.auto_row.insertCell());this.auto_mat=document.createElement("SELECT"),p(A("Rotor Material"),this.auto_mat,s);for(let t of this.rotor.GetCantileverList()){let e=document.createElement("OPTION");e.text=A(t.name),this.auto_mat.add(e)}this.auto_mat.onchange=()=>{this.rotor.SetCantilever(this.auto_mat.selectedIndex)};const i=h(this.auto_row.insertCell());this.auto_clutch=document.createElement("INPUT"),f(A("Rotor Clutched Rotor"),this.auto_clutch,i),this.auto_clutch.onchange=()=>{this.rotor.SetAccessory(this.auto_clutch.checked)},this.InitAutogyroStats(this.auto_row.insertCell())}InitAutogyroStats(t){t.className="inner_table";const e=document.createElement("TABLE");e.className="inner_table",t.appendChild(e);const s=e.insertRow();c(s,A("Stat Drag")),c(s,A("Stat Mass")),c(s,A("Stat Cost"));const i=e.insertRow();this.a_drag=i.insertCell(),this.a_mass=i.insertCell(),this.a_cost=i.insertCell();const a=e.insertRow();c(a,A("Rotor Area")),c(a,""),c(a,"");const n=e.insertRow();this.a_area=n.insertCell(),n.insertCell(),n.insertCell()}UpdateAutogyroStats(){this.auto_span.valueAsNumber=this.rotor.GetRotorSpan(),this.auto_mat.selectedIndex=this.rotor.GetCantilever(),this.auto_min.innerText=""+this.rotor.GetSizingSpan(),this.auto_clutch.checked=this.rotor.GetAccessory();const t=this.rotor.PartStats();E(this.a_drag,t.drag.toString(),!1),E(this.a_mass,t.mass.toString(),!1),E(this.a_cost,t.cost.toString(),!1),E(this.a_area,t.wingarea.toString(),!0)}InitHelicopter(t){this.heli_header=w(t),c(this.heli_header,A("Rotor Rotor")),c(this.heli_header,A("Rotor Material")),c(this.heli_header,A("Rotor Accessories")),c(this.heli_header,A("Rotor Stats")),this.heli_row=w(t);const e=h(this.heli_row.insertCell());this.heli_count=document.createElement("INPUT"),_(A("Rotor Number of Rotors"),this.heli_count,e),this.heli_count.onchange=()=>{this.rotor.SetRotorCount(this.heli_count.valueAsNumber)},this.heli_min=document.createElement("LABEL"),m(A("Rotor Ideal Rotor Span"),this.heli_min,e),this.heli_span=document.createElement("INPUT"),_(A("Rotor Span"),this.heli_span,e),this.heli_span.min="",this.heli_span.onchange=()=>{this.rotor.SetRotorSpan(this.heli_span.valueAsNumber)},this.heli_stagger=document.createElement("SELECT"),p(A("Rotor Stagger"),this.heli_stagger,e);const s=this.rotor.GetStaggerList();for(let t of s){let e=document.createElement("OPTION");e.text=A(t.name),this.heli_stagger.add(e)}this.heli_stagger.onchange=()=>{this.rotor.SetStagger(this.heli_stagger.selectedIndex)},this.heli_blade_count=document.createElement("SELECT"),p(A("Rotor Blade Count"),this.heli_blade_count,e);const i=this.rotor.GetBladeList();for(let t of i){let e=document.createElement("OPTION");e.textContent=t.name,this.heli_blade_count.add(e)}this.heli_blade_count.onchange=()=>{this.rotor.SetBladeCount(this.heli_blade_count.selectedIndex)};const a=h(this.heli_row.insertCell());this.heli_mat=document.createElement("SELECT"),p(A("Rotor Rotor Material"),this.heli_mat,a);for(let t of this.rotor.GetCantileverList()){let e=document.createElement("OPTION");e.text=A(t.name),this.heli_mat.add(e)}this.heli_mat.onchange=()=>{this.rotor.SetCantilever(this.heli_mat.selectedIndex)},this.heli_blade_thickness=document.createElement("INPUT"),_(A("Rotor Thickness"),this.heli_blade_thickness,a),this.heli_blade_thickness.onchange=()=>{this.rotor.SetRotorThickness(this.heli_blade_thickness.valueAsNumber)};const n=h(this.heli_row.insertCell());this.heli_shafts=document.createElement("INPUT"),f(A("Rotor Motor Cross-link"),this.heli_shafts,n),this.heli_shafts.onchange=()=>{this.rotor.SetAccessory(this.heli_shafts.checked)},this.InitHelicopterStats(this.heli_row.insertCell())}InitHelicopterStats(t){t.className="inner_table";const e=document.createElement("TABLE");e.className="inner_table",t.appendChild(e);const s=e.insertRow();c(s,A("Stat Drag")),c(s,A("Stat Mass")),c(s,A("Stat Cost"));const i=e.insertRow();this.h_drag=i.insertCell(),this.h_mass=i.insertCell(),this.h_cost=i.insertCell();const a=e.insertRow();c(a,A("Rotor Area")),c(a,A("Stat Reliability")),c(a,A("Reinforcement Aircraft Max Strain"));const n=e.insertRow();this.h_area=n.insertCell(),this.h_rely=n.insertCell(),this.h_strn=n.insertCell();const r=e.insertRow();c(r,""),c(r,A("Power")),c(r,"");const o=e.insertRow();o.insertCell(),this.h_powr=o.insertCell(),o.insertCell()}UpdateHelicopterStats(){this.heli_count.valueAsNumber=this.rotor.GetRotorCount(),1==this.rotor.GetRotorCount()?this.heli_count.step="1":this.heli_count.step="2",this.heli_min.innerText=""+this.rotor.GetSizingSpan(),this.heli_span.valueAsNumber=this.rotor.GetRotorSpan();const t=this.rotor.CanStagger();for(let e=0;e<t.length;e++)this.heli_stagger.options[e].disabled=!t[e];this.heli_stagger.selectedIndex=this.rotor.GetStagger(),this.heli_mat.selectedIndex=this.rotor.GetCantilever(),this.heli_shafts.checked=this.rotor.GetAccessory(),this.heli_blade_count.selectedIndex=this.rotor.GetBladeCountIdx(),this.heli_blade_thickness.valueAsNumber=this.rotor.GetRotorThickness();const e=this.rotor.PartStats();E(this.h_drag,e.drag.toString(),!1),E(this.h_mass,e.mass.toString(),!1),E(this.h_cost,e.cost.toString(),!1),E(this.h_area,e.wingarea.toString(),!0),E(this.h_rely,e.reliability.toString(),!0),E(this.h_powr,e.power.toString(),!0)}UpdateMaxStrain(t){E(this.h_strn,t.toString(),!0)}UpdateDisplay(){switch(this.rotor.GetType()){case gt.AIRPLANE:this.div.hidden=!0,this.wing_div.hidden=!1,this.reinforce_div.hidden=!1,this.control_div.hidden=!1;break;case gt.AUTOGYRO:this.div.hidden=!1,this.wing_div.hidden=!1,this.reinforce_div.hidden=!1,this.control_div.hidden=!1,this.heli_header.hidden=!0,this.heli_row.hidden=!0,this.auto_header.hidden=!1,this.auto_row.hidden=!1,this.UpdateAutogyroStats();break;case gt.HELICOPTER:this.div.hidden=!1,this.wing_div.hidden=!0,this.reinforce_div.hidden=!0,this.control_div.hidden=!0,this.auto_header.hidden=!0,this.auto_row.hidden=!0,this.heli_header.hidden=!1,this.heli_row.hidden=!1,this.UpdateHelicopterStats()}}}class Mt extends n{constructor(t){super(),this.alter=t;let e=document.getElementById("alter_table").insertRow();this.add_cell=e.insertCell(),this.edit_cell=e.insertCell(),this.InitAddCell(),this.InitEditCell()}InitAddCell(){this.add_list=[],this.add_fs=h(this.add_cell);let t=document.createElement("LABEL");t.textContent=A("Alter Select Part"),this.add_fs.div1.appendChild(t);let e=document.createElement("LABEL");e.textContent=A("Alter Quantity"),this.add_fs.div2.appendChild(e),t.style.marginLeft="0.25em",t.style.marginRight="0.5em",e.style.marginLeft="0.25em",e.style.marginRight="0.5em"}InitEditCell(){this.name=document.createElement("INPUT"),this.drag=document.createElement("INPUT"),this.mass=document.createElement("INPUT"),this.wmas=document.createElement("INPUT"),this.bmas=document.createElement("INPUT"),this.cost=document.createElement("INPUT"),this.upkp=document.createElement("INPUT"),this.lfbd=document.createElement("INPUT"),this.area=document.createElement("INPUT"),this.ctrl=document.createElement("INPUT"),this.pstb=document.createElement("INPUT"),this.lstb=document.createElement("INPUT"),this.rstn=document.createElement("INPUT"),this.strc=document.createElement("INPUT"),this.tugh=document.createElement("INPUT"),this.powr=document.createElement("INPUT"),this.fcon=document.createElement("INPUT"),this.fuel=document.createElement("INPUT"),this.chrg=document.createElement("INPUT"),this.sfty=document.createElement("INPUT"),this.visi=document.createElement("INPUT"),this.escp=document.createElement("INPUT"),this.rely=document.createElement("INPUT"),this.sprl=document.createElement("INPUT");const t=h(this.edit_cell),e=h(t.div1);!function(t,e,s){const i=document.createElement("LABEL");e.id=l(),i.htmlFor=e.id,i.style.marginLeft="0.25em",i.style.marginRight="0.5em",i.textContent=t,e.setAttribute("type","text"),e.value="Default",i.classList.add("flex-item"),e.classList.add("flex-item"),s.div1.appendChild(i),s.div2.appendChild(e)}(A("Alter Part Name"),this.name,e);const s=h(e.div1),i=h(e.div2),a=h(t.div2);_("Cost",this.cost,a),_("Mass",this.mass,s),_("Wet Mass",this.wmas,i),_("Bomb Mass",this.bmas,a),_("Drag",this.drag,s),_("Lift Bleed",this.lfbd,i),_("Wing Area",this.area,a),_("Control",this.ctrl,s),_("Pitch Stability",this.pstb,i),_("Lateral Stability",this.lstb,a),_("Raw Strain",this.rstn,s),_("Structure",this.strc,i),_("Toughness",this.tugh,a),_("Power",this.powr,s),_("Fuel Consumption",this.fcon,i),_("Fuel",this.fuel,a),_("Visibility",this.visi,s),_("Crash Safety",this.sfty,i),_("Escape",this.escp,a),_("Charge",this.chrg,s),_("Upkeep",this.upkp,i),_("Reliability",this.rely,a),function(t,e,s,i=!0){const a=document.createElement("SPAN"),n=document.createElement("LABEL");e.id=l(),n.htmlFor=e.id,n.style.marginLeft="0.25em",n.style.marginRight="0.5em",n.textContent=t,e.setAttribute("type","text"),e.value="Default",a.appendChild(n),a.appendChild(e),s.appendChild(a),i&&s.appendChild(document.createElement("BR"))}(A("Alter Part Special Rules"),this.sprl,this.edit_cell,!1),this.drag.min="",this.mass.min="",this.wmas.min="",this.bmas.min="",this.cost.min="",this.upkp.min="",this.lfbd.min="",this.area.min="",this.ctrl.min="",this.pstb.min="",this.lstb.min="",this.rstn.min="",this.strc.min="",this.tugh.min="",this.powr.min="",this.fcon.min="",this.fuel.min="",this.chrg.min="",this.sfty.min="",this.visi.min="",this.escp.min="",this.rely.min="",this.sprl.size=47;const n=document.createElement("SPAN");this.sel=document.createElement("SELECT"),n.appendChild(this.sel),this.sel.selectedIndex=-1,this.add=document.createElement("BUTTON"),g("Add Part",this.add,n,!1),this.rem=document.createElement("BUTTON"),g("Remove Part",this.rem,n,!1),this.edit_cell.appendChild(document.createElement("BR")),this.edit_cell.appendChild(n),this.add.onclick=()=>{let t=new D;t.drag=this.drag.valueAsNumber,t.mass=this.mass.valueAsNumber,t.wetmass=this.wmas.valueAsNumber,t.bomb_mass=this.bmas.valueAsNumber,t.cost=this.cost.valueAsNumber,t.upkeep=this.upkp.valueAsNumber,t.liftbleed=this.lfbd.valueAsNumber,t.wingarea=this.area.valueAsNumber,t.control=this.ctrl.valueAsNumber,t.pitchstab=this.pstb.valueAsNumber,t.latstab=this.lstb.valueAsNumber,t.maxstrain=this.rstn.valueAsNumber,t.structure=this.strc.valueAsNumber,t.toughness=this.tugh.valueAsNumber,t.power=this.powr.valueAsNumber,t.fuelconsumption=this.fcon.valueAsNumber,t.fuel=this.fuel.valueAsNumber,t.charge=this.chrg.valueAsNumber,t.crashsafety=this.sfty.valueAsNumber,t.visibility=this.visi.valueAsNumber,t.escape=this.escp.valueAsNumber,t.reliability=this.rely.valueAsNumber,this.sprl.value=this.sprl.value.trim(),this.sprl.value.length>0&&t.warnings.push({source:this.name.value,warning:this.sprl.value,color:q.WHITE}),this.alter.AddPart(this.name.value,t),this.UpdateSelect(),this.sel.selectedIndex=-1},this.rem.onclick=()=>{this.alter.RemovePart(this.name.value),this.ResetInputs(),this.UpdateSelect(),this.sel.selectedIndex=-1},this.sel.onchange=()=>{let t=this.alter.GetParts()[this.sel.selectedIndex];this.name.value=t.name,this.drag.valueAsNumber=t.stats.drag,this.mass.valueAsNumber=t.stats.mass,this.wmas.valueAsNumber=t.stats.wetmass,this.bmas.valueAsNumber=t.stats.bomb_mass,this.cost.valueAsNumber=t.stats.cost,this.upkp.valueAsNumber=t.stats.upkeep,this.lfbd.valueAsNumber=t.stats.liftbleed,this.area.valueAsNumber=t.stats.wingarea,this.ctrl.valueAsNumber=t.stats.control,this.pstb.valueAsNumber=t.stats.pitchstab,this.lstb.valueAsNumber=t.stats.latstab,this.rstn.valueAsNumber=t.stats.maxstrain,this.strc.valueAsNumber=t.stats.structure,this.tugh.valueAsNumber=t.stats.toughness,this.powr.valueAsNumber=t.stats.power,this.fcon.valueAsNumber=t.stats.fuelconsumption,this.fuel.valueAsNumber=t.stats.fuel,this.chrg.valueAsNumber=t.stats.charge,this.sfty.valueAsNumber=t.stats.crashsafety,this.visi.valueAsNumber=t.stats.visibility,this.escp.valueAsNumber=t.stats.escape,this.rely.valueAsNumber=t.stats.reliability;const e=[];for(let s of t.stats.warnings)e.push(s.warning);this.sprl.value=R.Join("   ",e),this.sel.selectedIndex=-1},this.ResetInputs(),this.UpdateSelect()}ResetInputs(){this.name.value="Default",this.drag.valueAsNumber=0,this.mass.valueAsNumber=0,this.wmas.valueAsNumber=0,this.bmas.valueAsNumber=0,this.cost.valueAsNumber=0,this.upkp.valueAsNumber=0,this.lfbd.valueAsNumber=0,this.area.valueAsNumber=0,this.ctrl.valueAsNumber=0,this.pstb.valueAsNumber=0,this.lstb.valueAsNumber=0,this.rstn.valueAsNumber=0,this.strc.valueAsNumber=0,this.tugh.valueAsNumber=0,this.powr.valueAsNumber=0,this.fcon.valueAsNumber=0,this.fuel.valueAsNumber=0,this.chrg.valueAsNumber=0,this.sfty.valueAsNumber=0,this.visi.valueAsNumber=0,this.escp.valueAsNumber=0,this.rely.valueAsNumber=0,this.sprl.value=""}UpdateSelect(){for(;this.sel.options.length;)this.sel.remove(this.sel.options.length-1);const t=this.alter.GetParts();for(let e of t){let t=document.createElement("OPTION");t.textContent=e.name,this.sel.add(t)}this.sel.selectedIndex=-1}SetCollapse(){P("alter_collapse",!this.alter.IsDefault())}UpdateDisplay(){this.UpdateSelect();const t=this.alter.GetParts();for(let e=0;e<t.length;e++){if(this.add_list.length<=e){let t={lbl:document.createElement("LABEL"),qty:document.createElement("INPUT")};t.lbl.style.marginLeft="0.25em",t.lbl.style.marginRight="0.5em",t.qty.type="number",t.qty.min="0",t.qty.step="1",t.qty.valueAsNumber=0,t.qty.onchange=()=>{this.alter.SetUsedPart(e,t.qty.valueAsNumber)},this.add_fs.div1.appendChild(t.lbl),this.add_fs.div2.appendChild(t.qty),this.add_list.push(t)}this.add_list[e].lbl.textContent=t[e].name,this.add_list[e].qty.valueAsNumber=t[e].qty}for(;this.add_list.length>t.length;)this.add_list[this.add_list.length-1].lbl.remove(),this.add_list[this.add_list.length-1].qty.remove(),this.add_list.pop()}}!function(t){t[t.SINGLE=0]="SINGLE",t[t.PUSHER=1]="PUSHER",t[t.PULLER=2]="PULLER"}(St||(St={}));class At{constructor(){this.dash_canvas=document.createElement("CANVAS"),this.dash_canvas.width=1122,this.dash_canvas.height=786,this.dash_image=document.getElementById("dash_img"),this.dash_image.width=1122,this.dash_image.height=786,this.weap_canvas=document.createElement("CANVAS"),this.weap_canvas.width=483,this.weap_canvas.height=291,this.weap_image=document.getElementById("weap_img"),this.weap_image.width=483,this.weap_image.height=291,this.eng_canvas=document.createElement("CANVAS"),this.eng_canvas.width=600,this.eng_canvas.height=360,this.eng_image=document.getElementById("eng_img"),this.eng_image.width=600,this.eng_image.height=360,this.rad_canvas=document.createElement("CANVAS"),this.rad_canvas.width=479,this.rad_canvas.height=290,this.rad_image=document.getElementById("rad_img"),this.rad_image.width=479,this.rad_image.height=290,this.npc_canvas=document.createElement("CANVAS"),this.npc_canvas.width=482,this.npc_canvas.height=290,this.npc_image=document.getElementById("npc_img"),this.npc_image.width=482,this.npc_image.height=290,this.acft_data={full_bomb_boost:0,half_bomb_boost:0,full_boost:0,half_boost:0,empty_boost:0,full_bomb_hand:0,half_bomb_hand:0,full_hand:0,half_hand:0,empty_hand:0,full_bomb_climb:0,half_bomb_climb:0,full_climb:0,half_climb:0,empty_climb:0,full_bomb_stall:0,half_bomb_stall:0,full_stall:0,half_stall:0,empty_stall:0,full_bomb_speed:0,half_bomb_speed:0,full_speed:0,half_speed:0,empty_speed:0,fuel:0,dropoff:0,ordinance:[""],escape:0,crash:0,visibility:0,energy_loss:0,turn_bleed:0,stability:0,stress:0,toughness:0,max_strain:0,vital_parts:[""],armour:[],warnings:[{source:"",warning:""}]},this.weap_data={type:"",abrv:"",ammo:0,ap:0,jam:"",hits:[],damage:[],tags:[],reload:0,gyrojet:!1},this.eng_data={reliability:"0",min_IAF:0,altitude:0,overspeed:0,radiator:0,notes:[]},this.rad_data={mount_type:"",coolant_type:""}}SaveDash(){var t=this.dash_canvas.getContext("2d");t.clearRect(0,0,this.dash_canvas.width,this.dash_canvas.height),t.textAlign="center",t.drawImage(this.dash_image,0,0),t.font="35px Balthazar",t.fillText(this.acft_data.full_bomb_boost.toString(),493,94,80),t.fillText(this.acft_data.full_bomb_hand.toString(),555,94,80),t.fillText(this.acft_data.full_bomb_climb.toString(),617,94,80),t.fillText(this.acft_data.full_bomb_stall.toString(),679,94,80),t.fillText(this.acft_data.full_bomb_speed.toString(),741,94,80),t.fillText(this.acft_data.half_bomb_boost.toString(),493,134,80),t.fillText(this.acft_data.half_bomb_hand.toString(),555,134,80),t.fillText(this.acft_data.half_bomb_climb.toString(),617,134,80),t.fillText(this.acft_data.half_bomb_stall.toString(),679,134,80),t.fillText(this.acft_data.half_bomb_speed.toString(),741,134,80),t.fillText(this.acft_data.full_boost.toString(),493,174,80),t.fillText(this.acft_data.full_hand.toString(),555,174,80),t.fillText(this.acft_data.full_climb.toString(),617,174,80),t.fillText(this.acft_data.full_stall.toString(),679,174,80),t.fillText(this.acft_data.full_speed.toString(),741,174,80),t.fillText(this.acft_data.half_boost.toString(),493,214,80),t.fillText(this.acft_data.half_hand.toString(),555,214,80),t.fillText(this.acft_data.half_climb.toString(),617,214,80),t.fillText(this.acft_data.half_stall.toString(),679,214,80),t.fillText(this.acft_data.half_speed.toString(),741,214,80),t.fillText("0",493,254,80),t.fillText(this.acft_data.empty_hand.toString(),555,254,80),t.fillText("0",617,254,80),t.fillText(this.acft_data.empty_stall.toString(),679,254,80),t.fillText("0",741,254,80),t.fillText(Math.floor(this.acft_data.fuel).toString(),417,310,35),t.fillText(this.acft_data.dropoff.toString(),1048,375,35),t.fillText(this.acft_data.escape.toString(),85,640,35),t.fillText(this.acft_data.crash.toString(),85,720,35),t.fillText(this.acft_data.visibility.toString(),135,460,35),t.fillText(this.acft_data.stability.toString(),135,550,35),t.fillText(this.acft_data.energy_loss.toString(),70,505,35),t.fillText(this.acft_data.turn_bleed.toString(),195,505,35),t.fillText(this.acft_data.stress.toString(),285,495,35),t.fillText(this.acft_data.toughness.toString(),250,645,35),t.fillText(this.acft_data.max_strain.toString(),250,720,35),t.font="20px Balthazar",t.textAlign="left";var e=Math.min(this.acft_data.ordinance.length,2),s=Math.ceil(this.acft_data.ordinance.length/e-1e-6),i=0;for(let a=0;a<e;a++){let e=612+27*a,n="";for(let t=0;t<s;t++)i<this.acft_data.ordinance.length&&(0!=t&&(n+=", "),n+=this.acft_data.ordinance[i]),i++;t.fillText(n,335,e,370)}e=Math.min(this.acft_data.vital_parts.length,5),s=Math.ceil(this.acft_data.vital_parts.length/e-1e-6),i=0;for(let a=0;a<e;a++){let e=392+27*a,n="";for(let t=0;t<s;t++)i<this.acft_data.vital_parts.length&&(0!=t&&(n+=", "),n+=this.acft_data.vital_parts[i]),i++;t.fillText(n,335,e,370)}var a="";for(let t=0;t<this.acft_data.armour.length;++t){let e=t+1;this.acft_data.armour[t]>0&&(a+=""!=a?", ":A("Armour")+" ",a+=e.toString()+"/+"+(11-this.acft_data.armour[t]).toString())}t.fillText(a,335,558,375),t.font="14px Balthazar",i=1;for(let e=0;e<this.acft_data.warnings.length;++e){if(this.acft_data.warnings[e].source==A("Armour"))continue;let s=this.acft_data.warnings[e].source+": "+this.acft_data.warnings[e].warning;6==i&&this.acft_data.warnings.length>e+1?t.fillText(A("Cards Too Many Warnings Warning"),335,673+14*i,370):i>6||t.fillText(s,335,673+14*i,370),i++}this.download(this.name+"_Dashboard",this.dash_canvas)}SaveWeapon(t){t++;var e=this.weap_canvas.getContext("2d");e.clearRect(0,0,this.weap_canvas.width,this.weap_canvas.height),e.textAlign="center",e.drawImage(this.weap_image,0,0),e.font="25px Balthazar",e.fillText(this.weap_data.type,150,112,215),e.font="15px Balthazar";var s="";this.weap_data.reload>0?(s+=A("Cards Gun String Reload",(this.weap_data.ammo/this.weap_data.reload).toString(),this.weap_data.reload.toString()),this.weap_data.tags.push(A("Weapon Tag Reload",this.weap_data.reload.toString()))):s+=A("Cards Gun String No Reload",this.weap_data.ammo),e.fillText(s,95,158,105),e.fillText(this.weap_data.ap.toString(),172,158,23),e.fillText(this.weap_data.jam,230,158,65),e.fillText(this.weap_data.hits[0].toString(),157,208,80),e.fillText(this.weap_data.hits[1].toString(),237,208,80),e.fillText(this.weap_data.hits[2].toString(),317,208,80),e.fillText(this.weap_data.hits[3].toString(),397,208,80),e.fillText(Math.floor(1e-6+this.weap_data.damage[0]).toString(),157,231,80),e.fillText(Math.floor(1e-6+this.weap_data.damage[1]).toString(),237,231,80),e.fillText(Math.floor(1e-6+this.weap_data.damage[2]).toString(),317,231,80),e.fillText(Math.floor(1e-6+this.weap_data.damage[3]).toString(),397,231,80),e.textAlign="left",e.fillText(this.weap_data.tags[0],90,256,350);var i="";for(let t=1;t<this.weap_data.tags.length;t++)1!=t&&(i+=", "),i+=this.weap_data.tags[t];e.fillText(i,90,276,350),this.download(this.name+"_Weapon_"+t.toString(),this.weap_canvas)}SaveEngine(t,e=St.SINGLE){t++;var s=this.eng_canvas.getContext("2d");s.clearRect(0,0,this.eng_canvas.width,this.eng_canvas.height),s.drawImage(this.eng_image,0,0),s.textAlign="center",s.font="18px Balthazar",s.fillStyle="#000",s.strokeStyle="#000",s.fillText(this.eng_data.reliability,235,75,110);var i=this.eng_data.min_IAF.toString()+"-"+(this.eng_data.min_IAF+this.eng_data.altitude).toString();s.fillText(i,347,75,110),s.fillText(this.eng_data.overspeed.toString(),480,75,110);var a="";for(let t=0;t<this.eng_data.notes.length;t++)0!=t&&(a+=", "),a+=this.eng_data.notes[t];switch(s.fillText(a,365,105,306),this.eng_data.radiator>=0&&s.fillText(A("Cards Uses Radiator",this.eng_data.radiator+1),109,340,270),s.textAlign="right",s.font="30px Balthazar",s.fillStyle="#fff",s.strokeStyle="#fff",s.fillText("#"+t.toString(),37,67,35),e){case St.SINGLE:this.download(this.name+"_Engine_"+t.toString(),this.eng_canvas);break;case St.PUSHER:this.download(this.name+"_Engine_"+t.toString()+"_Pusher",this.eng_canvas);break;case St.PULLER:this.download(this.name+"_Engine_"+t.toString()+"_Puller",this.eng_canvas)}}SaveRadiator(t){t++;var e=this.rad_canvas.getContext("2d");e.clearRect(0,0,this.rad_canvas.width,this.rad_canvas.height),e.drawImage(this.rad_image,0,0),e.textAlign="center",e.font="25px Balthazar",e.fillStyle="#000",e.strokeStyle="#000",e.fillText(this.rad_data.mount_type,162,141,230),e.fillText(this.rad_data.coolant_type,162,217,230),e.textAlign="right",e.font="25px Balthazar",e.fillStyle="#fff",e.strokeStyle="#fff",e.fillText("#"+t.toString(),37,56,35),this.download(this.name+"_Radiator_"+t.toString(),this.rad_canvas)}SaveNPC(){var t=this.npc_canvas.getContext("2d");t.clearRect(0,0,this.npc_canvas.width,this.npc_canvas.height),t.drawImage(this.npc_image,0,0),t.font="20px Balthazar",t.textAlign="center",t.fillStyle="#000",t.strokeStyle="#000",t.fillText(this.name,100,100,145),t.fillText(""+this.lowest_overspeed,70,158,40),t.fillText(""+this.acft_data.full_speed,126,158,40);var e=this.acft_data.full_speed-this.acft_data.turn_bleed-Math.floor(1e-6+.1*this.acft_data.full_speed);t.fillText(""+e,187,158,40),t.fillText(""+this.acft_data.full_stall,245,158,40);var s,i=this.acft_data.toughness+this.acft_data.max_strain;if(t.fillText(""+i,70,236,40),t.fillText(""+this.acft_data.full_hand,123,236,40),this.all_weapons[0]){s=this.all_weapons[0],t.font="12px Avenir",t.fillText(s.abrv,232,71,91),t.font="20px Balthazar";var a=R.Join("/",[s.hits[0],s.hits[1],s.hits[2],s.hits[3]]),n=R.Join("/",[Math.floor(1e-6+s.damage[0]),Math.floor(1e-6+s.damage[1]),Math.floor(1e-6+s.damage[2]),Math.floor(1e-6+s.damage[3])]);t.fillText(a,320,71,80),t.fillText(n,401,71,80)}this.all_weapons[1]&&(s=this.all_weapons[1],t.font="12px Avenir",t.fillText(s.abrv,232,103,91),t.font="20px Balthazar",a=R.Join("/",[s.hits[0],s.hits[1],s.hits[2],s.hits[3]]),n=R.Join("/",[Math.floor(1e-6+s.damage[0]),Math.floor(1e-6+s.damage[1]),Math.floor(1e-6+s.damage[2]),Math.floor(1e-6+s.damage[3])]),t.fillText(a,320,103,80),t.fillText(n,401,103,80)),this.download(this.name+"_NPC",this.npc_canvas)}download(t,e){var s=document.createElement("a");if(s.download=t+".png",s.href=e.toDataURL(),document.createEvent){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(i)}}}class Nt{constructor(t){var e=document.createDocumentFragment(),s=w(e),i=s.insertCell();i.colSpan=2,this.name_inp=document.createElement("INPUT"),this.name_inp.defaultValue=A("Derived Aircraft Name"),i.appendChild(this.name_inp),c(s,A("Stat Cost")),this.cost_cell=s.insertCell(),c(s,A("Stat Upkeep")),this.upkeep_cell=s.insertCell(),c(s,A("Derived Era Report")),this.version_cell=s.insertCell();var a=w(e);c(a,A("Derived Mass Variations")),c(a,A("Derived Boost")),c(a,A("Derived Handling")),c(a,A("Derived Rate of Climb")),c(a,A("Derived Stall Speed")),c(a,A("Derived Top Speed")),c(a,A("Derived Vital Components")).colSpan=2,this.bomb_row2=w(e),c(this.bomb_row2,A("Derived Full Fuel with Bombs")),this.boost_fullwB=this.bomb_row2.insertCell(),this.hand_fullwB=this.bomb_row2.insertCell(),this.roc_fullwB=this.bomb_row2.insertCell(),this.ss_fullwB=this.bomb_row2.insertCell(),this.ts_fullwB=this.bomb_row2.insertCell(),this.vital_components=this.bomb_row2.insertCell(),this.vital_components.rowSpan=3,this.vital_components.colSpan=3,this.bomb_row1=w(e),c(this.bomb_row1,A("Derived Half Fuel with Bombs")),this.boost_halfwB=this.bomb_row1.insertCell(),this.hand_halfwB=this.bomb_row1.insertCell(),this.roc_halfwB=this.bomb_row1.insertCell(),this.ss_halfwB=this.bomb_row1.insertCell(),this.ts_halfwB=this.bomb_row1.insertCell(),this.full_row=w(e),c(this.full_row,A("Derived Full Fuel")),this.boost_full=this.full_row.insertCell(),this.hand_full=this.full_row.insertCell(),this.roc_full=this.full_row.insertCell(),this.ss_full=this.full_row.insertCell(),this.ts_full=this.full_row.insertCell();var n=w(e);c(n,A("Derived Half Fuel")),this.boost_half=n.insertCell(),this.hand_half=n.insertCell(),this.roc_half=n.insertCell(),this.ss_half=n.insertCell(),this.ts_half=n.insertCell();var r=w(e);c(r,A("Derived Empty Fuel")),this.boost_empty=r.insertCell(),this.hand_empty=r.insertCell(),this.roc_empty=r.insertCell(),this.ss_empty=r.insertCell(),this.ts_empty=r.insertCell();var o=w(e);c(o,A("Derived Propulsion")).colSpan=2,c(o,A("Derived Aerodynamics")).colSpan=2,c(o,A("Derived Survivability")).colSpan=2,c(o,A("Derived Crew Members")).colSpan=2;var l=w(e);c(l,A("Derived Dropoff")),this.dropoff_cell=l.insertCell(),c(l,A("Derived Stability")),this.stability_cell=l.insertCell(),c(l,A("Derived Crash Safety")),this.crashsafety_cell=l.insertCell(),c(l,A("Derived Crew/Passengers")),this.crew_cell=l.insertCell();var h=w(e);c(h,A("Derived Overspeed")),this.overspeed_cell=h.insertCell(),c(h,A("Derived Energy Loss")),this.eloss_cell=h.insertCell(),c(h,A("Stat Toughness")),this.toughness_cell=h.insertCell(),c(h,A("Stat Visibility")),this.visibility_cell=h.insertCell();var u=w(e);c(u,A("Derived Fuel Uses")),this.maxfuel_cell=u.insertCell(),this.turnbleed_label=c(u,A("Derived Turn Bleed")),this.turnbleed_cell=u.insertCell(),c(u,A("Stat Max Strain")),this.mxstrain_cell=u.insertCell(),c(u,A("Derived Attack Modifier")),this.attack_cell=u.insertCell();var _=w(e);c(_,A("Stat Reliability")),this.reliability_cell=_.insertCell(),c(_,A("Derived Landing Gear")),this.landing_cell=_.insertCell(),c(_,A("Derived Communications")),this.communications_cell=_.insertCell(),c(_,A("Derived Escape")),this.escape_cell=_.insertCell();var m=w(e);c(m,A("Derived Ideal Engine Altitude")),this.maxalt_cell=m.insertCell(),c(m,A("Derived Is Flammable Question")),this.flammable_cell=m.insertCell(),this.desc_cell=m.insertCell(),this.desc_cell.colSpan=2,c(m,A("Stat Flight Stress")),this.flightstress_cell=m.insertCell();var p=w(e),d=w(e);this.weapon_head=c(p,A("Derived Weapon Systems")),this.weapon_head.colSpan=6,this.weapon_cell=d.insertCell(),this.weapon_cell.colSpan=6,this.warning_head=c(w(e),A("Derived Special Rules")),this.warning_head.colSpan=6,this.warning_cell=w(e).insertCell(),this.warning_cell.colSpan=6,c(p,A("Derived Electrics")).colSpan=2,this.electric_cell=d.insertCell(),this.electric_cell.colSpan=2,this.electric_cell.rowSpan=3,t.appendChild(e),this.tbl=t}UpdateDisplay(t,e,s){for(this.name_inp.value=t.name;this.version_cell.children.length>0;)this.version_cell.removeChild(this.version_cell.children[0]);this.version_cell.className="tooltip";var i=document.createElement("DIV");i.className="tooltiptext";let a=document.createElement("P");a.textContent=A("Derived Problematic Parts"),i.appendChild(a);var n=z(t.GetEra().GetSelectedText()),r=0;for(let t of e.era){var o=z(t.era);if(o>n){r+=o-n;let e=document.createElement("P");e.textContent=t.name+": "+t.era,i.appendChild(e)}}if(0==r){let t=document.createElement("P");t.textContent=A("None"),i.appendChild(t)}var l=document.createElement("P");for(l.textContent=A(t.GetEra().GetSelectedText()),l.className=0==r?"green":r>2?"red":"yellow",this.version_cell.appendChild(l),this.version_cell.appendChild(i),this.cost_cell.textContent=e.cost.toString()+" ",t.GetUsed().IsDefault()||(this.cost_cell.textContent+=" ("+Math.floor(1e-6+e.cost/2).toString()+" "+A("Price Word Used")+")"),this.upkeep_cell.textContent=e.upkeep.toString()+"",this.ts_empty.textContent=(0).toString(),this.ss_empty.textContent=s.StallSpeedEmpty.toString(),this.hand_empty.textContent=s.HandlingEmpty.toString(),this.boost_empty.textContent=(0).toString(),this.roc_empty.textContent=(0).toString(),this.ts_half.textContent=Math.floor(1e-6+(s.MaxSpeedEmpty+s.MaxSpeedFull)/2).toString(),this.ss_half.textContent=Math.floor(1e-6+(s.StallSpeedEmpty+s.StallSpeedFull)/2).toString(),this.hand_half.textContent=Math.floor(1e-6+(s.HandlingEmpty+s.HandlingFull)/2).toString(),this.boost_half.textContent=Math.floor(1e-6+(s.BoostEmpty+s.BoostFull)/2).toString(),this.roc_half.textContent=Math.floor(1e-6+(s.RateOfClimbEmpty+s.RateOfClimbFull)/2).toString(),this.ts_full.textContent=Math.floor(1e-6+s.MaxSpeedFull).toString(),this.ss_full.textContent=s.StallSpeedFull.toString(),this.hand_full.textContent=s.HandlingFull.toString(),this.boost_full.textContent=s.BoostFull.toString(),this.roc_full.textContent=s.RateOfClimbFull.toString(),e.bomb_mass>0||this.show_bombs?(this.bomb_row1.hidden=!1,this.bomb_row2.hidden=!1,this.bomb_row2.appendChild(this.vital_components),this.vital_components.rowSpan=5,this.ts_halfwB.textContent=Math.floor(1e-6+(s.MaxSpeedEmpty+s.MaxSpeedwBombs)/2).toString(),this.ss_halfwB.textContent=Math.floor(1e-6+(s.StallSpeedEmpty+s.StallSpeedFullwBombs)/2).toString(),this.hand_halfwB.textContent=Math.floor(1e-6+(s.HandlingEmpty+s.HandlingFullwBombs)/2).toString(),this.boost_halfwB.textContent=Math.floor(1e-6+(s.BoostEmpty+s.BoostFullwBombs)/2).toString(),this.roc_halfwB.textContent=Math.floor(1e-6+(s.RateOfClimbEmpty+s.RateOfClimbwBombs)/2).toString(),this.ts_fullwB.textContent=Math.floor(1e-6+s.MaxSpeedwBombs).toString(),this.ss_fullwB.textContent=s.StallSpeedFullwBombs.toString(),this.hand_fullwB.textContent=s.HandlingFullwBombs.toString(),this.boost_fullwB.textContent=s.BoostFullwBombs.toString(),this.roc_fullwB.textContent=s.RateOfClimbwBombs.toString(),this.turnbleed_label.textContent=A("Derived Turn Bleed wB"),this.turnbleed_cell.textContent=R.Format("{0} ({1})",s.TurnBleed,s.TurnBleedwBombs)):(this.bomb_row1.hidden=!0,this.bomb_row2.hidden=!0,this.full_row.appendChild(this.vital_components),this.vital_components.rowSpan=3,this.turnbleed_label.textContent=A("Derived Turn Bleed"),this.turnbleed_cell.textContent=R.Format("{0}",s.TurnBleed)),this.dropoff_cell.textContent=s.Dropoff.toString(),this.overspeed_cell.textContent=s.Overspeed.toString(),this.maxfuel_cell.textContent=(Math.floor(1e-6+10*s.FuelUses)/10).toString(),t.GetIsFlammable()?this.flammable_cell.textContent=A("Yes"):this.flammable_cell.textContent=A("No"),this.stability_cell.textContent=s.Stabiilty.toString(),this.eloss_cell.textContent=s.EnergyLoss.toString(),this.landing_cell.textContent=t.GetGearName(),this.maxalt_cell.textContent=t.GetMinAltitude().toString()+"-"+t.GetMaxAltitude().toString(),this.reliability_cell.textContent=R.Join(", ",t.GetReliabilityList()),this.toughness_cell.textContent=s.Toughness.toString(),this.mxstrain_cell.textContent=s.MaxStrain.toString(),this.escape_cell.textContent=R.Join(", ",t.GetEscapeList()),this.crashsafety_cell.textContent=e.crashsafety.toString(),this.crew_cell.textContent=t.GetCockpits().GetNumberOfCockpits().toString()+"/"+(t.GetPassengers().GetSeats()+t.GetPassengers().GetBeds()).toString(),this.flightstress_cell.textContent=this.Stress2Str(t.GetStressList()),this.visibility_cell.textContent=R.Join(", ",t.GetVisibilityList()),this.attack_cell.textContent=R.Join(", ",t.GetAttackList()),this.communications_cell.textContent=t.GetCommunicationName();this.electric_cell.childElementCount>0;)this.electric_cell.removeChild(this.electric_cell.firstChild);var c=t.GetElectrics(),u=h(this.electric_cell);c.storage>0&&b(A("Derived Battery"),c.storage.toString(),u);for(let t of c.equipment)b(t.source,t.charge,u);var _="",m=t.VitalComponentList();for(let t of m)_+=t+"<br/>";this.vital_components.innerHTML=_;var p=t.GetWeapons().GetWeaponList(),d=t.GetWeapons().GetDirectionList(),g=t.GetMunitions().GetBombCount(),f=t.GetMunitions().GetRocketCount(),y=t.GetMunitions().GetInternalBombCount(),S="";if(g>0){var w=Math.min(g,y),C=Math.max(0,g-w);w>0&&(S+=A(" Bomb Mass Internally.",w)),C>0&&(S+=A(" Bomb Mass Externally.",C)),w>0&&(S+=A("Largest Internal Bomb",Math.min(w,t.GetMunitions().GetMaxBombSize()).toString())),y-=w,S+="<br/>"}if(f>0){var G=Math.min(f,y),v=Math.max(0,f-G);G>0&&(S+=A(" Rocket Mass Internally.",G)),v>0&&(S+=A(" Rocket Mass Externally.",v)),S+="<br/>"}for(let e of t.GetWeapons().GetWeaponSets())S+=Rt(e,p,d),S+="<br>";this.weapon_cell.innerHTML=S,e.warnings.sort(((t,e)=>t.color-e.color));var E="";for(let t of e.warnings){switch(t.color){case q.RED:E+='<div style="color:#FF0000;">';break;case q.YELLOW:E+='<div style="color:#FFFF00;">';break;case q.WHITE:default:E+='<div style="color:var(--inp_txt_color);;">'}E+=t.source+":  "+t.warning+"</div>"}this.warning_cell.innerHTML=E,this.desc_cell.textContent="Helicopter"}GetName(){return this.name_inp.value}SetName(t){this.name_inp.value=t}SetShowBombs(t){this.show_bombs=t}Stress2Str(t){var e="";for(let s=0;s<t.length-1;s++)2==t[s].length&&t[s][0]!=t[s][1]?e+=t[s][0].toString()+"("+t[s][1].toString()+"), ":e+=t[s][0].toString()+", ";if(t.length>0){var s=t.length-1;2==t[s].length&&t[s][0]!=t[s][1]?e+=t[s][0].toString()+"("+t[s][1].toString()+")":e+=t[s][0].toString()}return e}}class Tt extends wt{constructor(t){super(),this.selected=0,this.vals=[];for(const e of t.options){const t={name:e.name,maxbomb:e.maxbomb,cant_lift:e.cant_lift,stats:new D(e)};this.vals.push(t)}}toJSON(){return{selected:this.selected}}fromJSON(t,e){this.selected=t.selected,e<10.35&&this.selected>2&&this.selected++}serialize(t){t.PushNum(this.selected)}deserialize(t){this.selected=t.GetNum()}GetSelected(){return this.selected}GetSelectedText(){return this.vals[this.selected].name}SetSelected(t){this.selected=t,this.CalculateStats()}GetEraOptions(){return this.vals}GetLiftBleed(){return this.vals[this.selected].stats.liftbleed}GetMaxBomb(){return this.vals[this.selected].maxbomb}GetCantLift(){return this.vals[this.selected].cant_lift}PartStats(){var t=new D;return t.Add(this.vals[this.selected].stats)}SetCalculateStats(t){this.CalculateStats=t}GetElectrics(){return{storage:0,equipment:[]}}}class kt extends wt{constructor(t,e,s,i){super(),this.stats=new D,this.types=t,this.upgrades=e,this.safety=s,this.gunsights=i,this.selected_type=0,this.selected_upgrades=[...Array(this.upgrades.length).fill(!1)],this.selected_safety=[...Array(this.safety.length).fill(!1)],this.selected_gunsights=[...Array(this.gunsights.length).fill(!1)],this.total_stress=[0,0],this.total_escape=0,this.total_visibility=0,this.seat_index=0,this.bombsight=0,this.is_armed=!1}toJSON(){return{type:this.selected_type,upgrades:this.selected_upgrades,safety:this.selected_safety,sights:this.selected_gunsights,bombsight:this.bombsight}}fromJSON(t,e){this.selected_type=t.type,this.selected_upgrades=O(t.upgrades,this.selected_upgrades.length),this.selected_safety=O(t.safety,this.selected_safety.length),this.selected_gunsights=O(t.sights,this.selected_gunsights.length),this.IsPrimary()&&(this.selected_upgrades[0]=!1),e>10.35&&(this.bombsight=t.bombsight)}serialize(t){t.PushNum(this.selected_type),t.PushBoolArr(this.selected_upgrades),t.PushBoolArr(this.selected_safety),t.PushBoolArr(this.selected_gunsights),t.PushNum(this.bombsight)}deserialize(t){this.selected_type=t.GetNum(),this.selected_upgrades=t.GetBoolArr(this.selected_upgrades.length),this.selected_safety=t.GetBoolArr(this.selected_safety.length),this.selected_gunsights=t.GetBoolArr(this.selected_gunsights.length),this.IsPrimary()&&(this.selected_upgrades[0]=!1),t.version>10.35&&(this.bombsight=t.GetNum())}GetTypeList(){return this.types}GetUpgradeList(){return this.upgrades}GetSafetyList(){return this.safety}GetGunsightList(){return this.gunsights}GetType(){return this.selected_type}SetType(t){if(t>=this.types.length)throw"Selected type is not in range of actual types.";this.selected_type=t,this.CalculateStats()}GetSelectedUpgrades(){return this.selected_upgrades}SetUpgrade(t,e){if(t>=this.upgrades.length)throw"Selected type is not in range of actual upgrades.";this.selected_upgrades[t]=e,this.CalculateStats()}GetSelectedSafety(){return this.selected_safety}CanSafety(){const t=Array(this.safety.length).fill(!0);return t[5]=!this.types[this.selected_type].exposed,t}SetSafety(t,e){if(t>=this.safety.length)throw"Selected type is not in range of actual safties.";this.selected_safety[t]=e,this.CalculateStats()}GetSelectedGunsights(){return this.selected_gunsights}SetGunsight(t,e){if(t>=this.safety.length)throw"Selected type is not in range of actual gunsights.";this.selected_gunsights[t]=e,this.CalculateStats()}GetVisibility(){return this.types[this.selected_type].stats.visibility<-10?-1/0:this.total_visibility}GetFlightStress(){return this.total_stress}GetEscape(){return this.total_escape}GetCrash(){return this.total_crash}GetAttack(){var t=0;for(let e=0;e<this.gunsights.length;e++)this.selected_gunsights[e]&&(t=Math.max(t,this.gunsights[e].attack));return t}SetSeatIndex(t){this.seat_index=t}IsPrimary(){return 0==this.seat_index}CanUpgrades(){const t=[...Array(this.upgrades.length).fill(!0)];return this.IsPrimary()&&(t[0]=!1),t}IsOpen(){return"Open"==this.types[this.selected_type].name||"Windscreen"==this.types[this.selected_type].name}GetBombsightQuality(){return this.bombsight}SetBombsightQuality(t){t!=t&&(t=0),t==this.bombsight-1&&(t=this.bombsight-3),t==this.bombsight+1&&(t=this.bombsight+3),t<2&&(t=0),t>0&&(t=t-t%3+1),this.bombsight=t,this.CalculateStats()}SetHasRotary(t){this.has_rotary=t}IsElectrics(){return 0!=this.stats.charge}IsCopilot(){return this.selected_upgrades[0]}SetArmed(t){this.is_armed=t}GetName(){return this.IsPrimary()?"Crew Pilot":this.bombsight>0?"Crew Bombadier":this.IsCopilot()?"Crew Co-Pilot":this.is_armed?"Crew Gunner":"Crew Aircrew"}PartStats(){let t=new D;t.reqsections=1,t=t.Add(this.types[this.selected_type].stats);for(let e=0;e<this.selected_upgrades.length;e++)this.selected_upgrades[e]&&(t=t.Add(this.upgrades[e].stats));const e=this.CanSafety();for(let s=0;s<this.selected_safety.length;s++)e[s]||(this.selected_safety[s]=!1),this.selected_safety[s]&&(t=t.Add(this.safety[s].stats));for(let e=0;e<this.selected_gunsights.length;e++)this.selected_gunsights[e]&&(t=t.Add(this.gunsights[e].stats));return this.bombsight>0&&(t.cost+=Math.floor(2.000001+(this.bombsight-4)/3),t.warnings.push({source:A("Bombsight"),warning:A("Bombsight Warning 1")+this.bombsight.toString()+A("Bombsight Warning 2"),color:q.WHITE}),this.IsCopilot()&&t.warnings.push({source:A("Bombadier Controls"),warning:A("Bombadier Controls Warning"),color:q.WHITE})),this.stats=t.Clone(),this.selected_upgrades[0]?(t.flightstress=this.upgrades[0].stats.flightstress,this.stats.flightstress-=t.flightstress):t.flightstress=0,t}CrewUpdate(t,e,s,i,a,n){this.total_escape=this.stats.escape+t;let r=this.stats.flightstress,o=this.stats.flightstress;(this.IsPrimary()||this.selected_upgrades[0])&&(r+=e,o+=e-2*i),r=Math.max(0,r),o=Math.max(0,o),r+=s,o+=s,this.IsOpen()&&this.has_rotary&&(r+=1,o+=1),r=Math.max(0,r),o=Math.max(0,o),this.total_stress=[r,o],this.total_visibility=this.stats.visibility+a,this.total_crash=this.stats.crashsafety+n}SetCalculateStats(t){this.CalculateStats=t}GetElectrics(){var t=[];for(let e=0;e<this.upgrades.length;e++)if(this.selected_upgrades[e]){const s=this.upgrades[e];t=this.FormatEquipment(t,s.name,s.stats.charge)}for(let e=0;e<this.safety.length;e++)if(this.selected_safety[e]){const s=this.safety[e];t=this.FormatEquipment(t,s.name,s.stats.charge)}for(let e=0;e<this.gunsights.length;e++)if(this.selected_gunsights[e]){const s=this.gunsights[e];t=this.FormatEquipment(t,s.name,s.stats.charge)}return{storage:0,equipment:t}}}class Lt extends wt{constructor(t){super(),this.positions=[],this.types=[];for(const e of t.options){let t={name:e.name,exposed:e.exposed,stats:new D(e)};this.types.push(t)}this.upgrades=[];for(const e of t.upgrades){let t={name:e.name,stats:new D(e)};this.upgrades.push(t)}this.safety=[];for(const e of t.safety){let t={name:e.name,stats:new D(e)};this.safety.push(t)}this.gunsights=[];for(const e of t.gunsights){let t={name:e.name,attack:e.attack,stats:new D(e)};this.gunsights.push(t)}}toJSON(){const t=[];for(const e of this.positions)t.push(e.toJSON());return{positions:t}}fromJSON(t,e){this.positions=[];for(const s of t.positions){let t=new kt(this.types,this.upgrades,this.safety,this.gunsights);t.SetSeatIndex(this.positions.length),t.fromJSON(s,e),t.SetCalculateStats(this.CalculateStats),this.positions.push(t)}}serialize(t){t.PushNum(this.positions.length);for(const e of this.positions)e.serialize(t)}deserialize(t){const e=t.GetNum();this.positions=[];for(let s=0;s<e;s++){let e=new kt(this.types,this.upgrades,this.safety,this.gunsights);e.SetSeatIndex(this.positions.length),e.deserialize(t),e.SetCalculateStats(this.CalculateStats),this.positions.push(e)}}GetAttackList(){const t=[];for(const e of this.positions)t.push(e.GetAttack());return t}GetVisibilityList(){const t=[];for(const e of this.positions)t.push(e.GetVisibility());return t}GetStressList(){const t=[];for(const e of this.positions)t.push(e.GetFlightStress());return t}GetEscapeList(){const t=[];for(const e of this.positions)t.push(e.GetEscape());return t}GetCrashList(){const t=[];for(const e of this.positions)t.push(e.GetCrash());return t}SetNumberOfCockpits(t){for((t!=t||t<1)&&(t=1),t=Math.floor(1e-6+t);this.positions.length>t;)this.positions.pop();var e=null;for(this.positions.length>0&&(e=JSON.stringify(this.positions[this.positions.length-1].toJSON()));this.positions.length<t;){let t=new kt(this.types,this.upgrades,this.safety,this.gunsights);t.SetSeatIndex(this.positions.length),e&&t.fromJSON(JSON.parse(e),1e3),t.SetCalculateStats(this.CalculateStats),this.positions.push(t)}this.CalculateStats()}GetNumberOfCockpits(){return this.positions.length}GetCockpit(t){return this.positions[t]}SetHasRotary(t){for(const e of this.positions)e.SetHasRotary(t)}IsElectrics(){for(const t of this.positions)if(t.IsElectrics())return!0;return!1}PartStats(){var t=new D;let e=new Map;for(let s=0;s<this.positions.length;s++){let i=this.positions[s].PartStats();t=t.Add(i);for(const t of i.warnings){let i=e.get(t.source);i?(i.push(s+1),e.set(t.source,i)):e.set(t.source,[s+1])}}for(const s of t.warnings)s.source=A("Seats #",R.Join(",",e.get(s.source)))+" "+s.source;return t.escape=0,t.visibility=0,t.crashsafety=0,t}SetArmed(t){for(let e=0;e<this.positions.length;e++)this.positions[e].SetArmed(t[e])}UpdateCrewStats(t,e,s,i,a){let n=0;for(const t of this.positions)t.IsCopilot()&&(n+=1);for(const r of this.positions)r.CrewUpdate(t,e,s,n,i,a)}SetCalculateStats(t){this.CalculateStats=t}GetElectrics(){let t={storage:0,equipment:[]};for(const e of this.positions)t=Ct(t,e.GetElectrics());return t}}class Wt extends wt{constructor(t){super(),this.seats=0,this.beds=0,this.connected=!1}toJSON(){return{seats:this.seats,beds:this.beds,connected:this.connected}}fromJSON(t,e){this.seats=t.seats,this.beds=t.beds,this.connected=t.connected}serialize(t){t.PushNum(this.seats),t.PushNum(this.beds),t.PushBool(this.connected)}deserialize(t){this.seats=t.GetNum(),this.beds=t.GetNum(),this.connected=t.GetBool()}IsDefault(){return 0==this.seats&&0==this.beds&&!this.connected}GetSeats(){return this.seats}SetSeats(t){(t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.seats=t,this.CalculateStats()}GetBeds(){return this.beds}SetBeds(t){(t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.beds=t,this.CalculateStats()}PossibleConnection(){return this.seats+this.beds>0}GetConnected(){return this.connected}SetConnected(t){this.connected=t,this.CalculateStats()}PartStats(){const t=new D;return t.reqsections=2*Math.ceil((this.seats+2*this.beds)/5-1e-6),this.seats+this.beds>0&&this.connected&&(t.mass=1,t.warnings.push({source:A("Passengers Section Title"),warning:A("Passenger Connectivity Warning"),color:q.WHITE})),t.bomb_mass+=this.seats+this.beds,t.bomb_mass%5>0&&(t.bomb_mass+=5-t.bomb_mass%5),this.seats+this.beds>0&&t.warnings.push({source:A("Passengers Section Title"),warning:A("Passengers Count",this.seats,this.beds),color:q.WHITE}),t}SetCalculateStats(t){this.CalculateStats=t}GetElectrics(){return{storage:0,equipment:[]}}}class Bt extends wt{constructor(t,e){super();const s=at();if(this.elist_idx="Custom",this.etype_stats=s.get(this.elist_idx).get_stats(0),this.etype_inputs=s.get(this.elist_idx).get(0),this.cooling_count=this.etype_stats.stats.cooling,this.radiator_index=-1,this.cooling_count>0&&(this.radiator_index=0),this.num_radiators=0,this.mount_list=t,this.mount_sel=0,this.intake_fan=!1,this.use_pp=!1,this.torque_to_struct=!1,this.cowl_list=e,this.cowl_sel=0,this.use_ds=!1,this.outboard_prop=!1,this.gp_count=0,this.gpr_count=0,this.total_reliability=0,this.is_generator=!1,this.has_alternator=!1,s.get(this.elist_idx).length<=0)throw"No Engine Stats Found.  Should be at least one."}toJSON(){return{selected_stats:this.etype_stats.toJSON(),selected_inputs:this.etype_inputs.toJSON(),cooling_count:this.cooling_count,radiator_index:this.radiator_index,selected_mount:this.mount_sel,use_pushpull:this.use_pp,pp_torque_to_struct:this.torque_to_struct,use_driveshafts:this.use_ds,geared_propeller_ratio:this.gp_count,geared_propeller_reliability:this.gpr_count,cowl_sel:this.cowl_sel,is_generator:this.is_generator,has_alternator:this.has_alternator,intake_fan:this.intake_fan,outboard_prop:this.outboard_prop}}oldJSON(t,e){const s=t.selected_stats;if(this.etype_stats.fromJSON(s,e),this.etype_inputs=new tt,this.etype_stats.pulsejet&&s.input_pj){this.etype_inputs=new tt,this.etype_inputs.name=this.etype_stats.name,this.etype_inputs.engine_type=V.PULSEJET;const t=s.input_pj;this.etype_inputs.type=t.type,this.etype_inputs.power=t.power,this.etype_inputs.era_sel=t.era_sel,this.etype_inputs.quality_cost=t.quality_cost,this.etype_inputs.quality_rely=t.quality_rely,this.etype_inputs.starter=t.starter}else if(s.input_eb){this.etype_inputs.name=this.etype_stats.name,this.etype_inputs.engine_type=V.PROPELLER;const t=s.input_eb;this.etype_inputs.displacement=t.displacement,this.etype_inputs.compression=t.compression,this.etype_inputs.type=t.type,this.etype_inputs.cyl_per_row=t.cyl_per_row,this.etype_inputs.rows=t.rows,this.etype_inputs.RPM_boost=t.RPM_boost,this.etype_inputs.era_sel=t.era_sel,this.etype_inputs.material_fudge=t.material_fudge,this.etype_inputs.quality_fudge=t.quality_fudge,this.etype_inputs.upgrades=t.upgrades,6==this.etype_inputs.upgrades.length?(this.etype_stats.altitude=10*this.etype_stats.altitude-1,this.etype_inputs.upgrades[0]&&(this.etype_inputs.compressor_type=2,this.etype_inputs.compressor_count=1),this.etype_inputs.upgrades[1]&&(this.etype_inputs.compressor_type=3,this.etype_inputs.compressor_count=1),this.etype_inputs.upgrades.splice(0,2)):(this.etype_inputs.compressor_type=t.compressor_type,this.etype_inputs.compressor_count=t.compressor_count,this.etype_inputs.min_IdealAlt=t.min_IAF)}else this.etype_stats.altitude=10*this.etype_stats.altitude-1;return this.etype_inputs}fromJSON(t,e){const s=at();let i="";if(e>10.55){this.etype_stats.fromJSON(t.selected_stats,e);const a=new tt(t.selected_inputs);i=nt(this.etype_stats.name),""==i&&(i="Custom","Default"!=a.name&&s.get(i).push(a)),this.etype_stats=s.get(i).get_stats_name(this.etype_stats.name),this.etype_inputs=s.get(i).get_name(this.etype_stats.name)}else{const a=this.oldJSON(t,e);"Default"!=a.name&&(i=nt(this.etype_stats.name),""==i&&(i="Custom",s.get(i).push(a)),this.etype_stats=s.get(i).get_stats_name(this.etype_stats.name),this.etype_inputs=s.get(i).get_name(this.etype_stats.name))}this.elist_idx=i,this.cooling_count=t.cooling_count,this.radiator_index=t.radiator_index,this.mount_sel=t.selected_mount,this.use_pp=t.use_pushpull,this.torque_to_struct=t.pp_torque_to_struct,this.use_ds=t.use_driveshafts,this.gp_count=t.geared_propeller_ratio,this.gpr_count=t.geared_propeller_reliability,this.cowl_sel=t.cowl_sel,this.is_generator=t.is_generator,this.has_alternator=t.has_alternator,this.intake_fan=t.intake_fan,this.outboard_prop=e>=12.15&&t.outboard_prop}serialize(t){this.etype_stats.serialize(t),this.etype_inputs.serialize(t),t.PushNum(this.cooling_count),t.PushNum(this.radiator_index),t.PushNum(this.mount_sel),t.PushBool(this.use_pp),t.PushBool(this.torque_to_struct),t.PushBool(this.use_ds),t.PushNum(this.gp_count),t.PushNum(this.gpr_count),t.PushNum(this.cowl_sel),t.PushBool(this.is_generator),t.PushBool(this.has_alternator),t.PushBool(this.intake_fan),t.PushBool(this.outboard_prop)}oldDeserialize(t){return this.etype_stats.name=t.GetString(),this.etype_stats.overspeed=t.GetNum(),this.etype_stats.altitude=t.GetNum(),this.etype_stats.torque=t.GetNum(),this.etype_stats.rumble=t.GetNum(),this.etype_stats.oiltank=t.GetBool(),this.etype_stats.pulsejet=t.GetBool(),this.etype_inputs=new tt,t.version>10.45?(this.etype_inputs.name=this.etype_stats.name,this.etype_stats.pulsejet?(this.etype_inputs.engine_type=V.PULSEJET,this.etype_inputs.power=t.GetNum(),this.etype_inputs.type=t.GetNum(),this.etype_inputs.era_sel=t.GetNum(),this.etype_inputs.quality_cost=t.GetNum(),this.etype_inputs.quality_rely=t.GetNum(),this.etype_inputs.starter=t.GetBool()):(this.etype_inputs.displacement=t.GetNum(),this.etype_inputs.compression=t.GetNum(),this.etype_inputs.type=t.GetNum(),this.etype_inputs.cyl_per_row=t.GetNum(),this.etype_inputs.rows=t.GetNum(),this.etype_inputs.RPM_boost=t.GetNum(),this.etype_inputs.era_sel=t.GetNum(),this.etype_inputs.material_fudge=t.GetNum(),this.etype_inputs.quality_fudge=t.GetNum(),this.etype_inputs.upgrades=t.GetBoolArr(0),6==this.etype_inputs.upgrades.length?(this.etype_stats.altitude=10*this.etype_stats.altitude-1,this.etype_inputs.upgrades[0]&&(this.etype_inputs.compressor_type=2,this.etype_inputs.compressor_count=1),this.etype_inputs.upgrades[1]&&(this.etype_inputs.compressor_type=3,this.etype_inputs.compressor_count=1),this.etype_inputs.upgrades.splice(0,2)):(this.etype_inputs.compressor_type=t.GetNum(),this.etype_inputs.compressor_count=t.GetNum(),this.etype_inputs.min_IdealAlt=t.GetNum()))):this.etype_stats.altitude=10*this.etype_stats.altitude-1,this.etype_stats.stats.deserialize(t),this.etype_inputs}deserialize(t){const e=at();var s="";if(t.version>10.55){this.etype_stats.deserialize(t);const i=new tt;i.deserialize(t),""==(s=nt(this.etype_stats.name))&&(s="Custom","Default"!=i.name&&e.get(s).push(i)),this.etype_stats=e.get(s).get_stats_name(this.etype_stats.name),this.etype_inputs=e.get(s).get_name(this.etype_stats.name)}else{const i=this.oldDeserialize(t);"Default"!=i.name&&(""==(s=nt(this.etype_stats.name))&&(s="Custom",e.get(s).push(i)),this.etype_stats=e.get(s).get_stats_name(this.etype_stats.name),this.etype_inputs=e.get(s).get_name(this.etype_stats.name))}this.cooling_count=t.GetNum(),this.radiator_index=t.GetNum(),this.mount_sel=t.GetNum(),this.use_pp=t.GetBool(),this.torque_to_struct=t.GetBool(),this.use_ds=t.GetBool(),this.gp_count=t.GetNum(),this.gpr_count=t.GetNum(),this.cowl_sel=t.GetNum(),this.is_generator=t.GetBool(),this.has_alternator=t.GetBool(),this.intake_fan=t.GetBool(),t.version>=12.15?this.outboard_prop=t.GetBool():this.outboard_prop=!1,this.elist_idx=s}GetMinAltitude(){return this.etype_inputs.min_IdealAlt}GetMaxAltitude(){return this.GetMinAltitude()+this.etype_stats.altitude}GetMinIAF(){return Math.floor(1e-6+this.GetMinAltitude()/10)}GetMaxIAF(){return Math.floor(1e-6+this.GetMaxAltitude()/10)}CanSelectIndex(){const t=at().get(this.elist_idx),e=[...Array(t.length).fill(!0)];if(this.is_internal)for(let s=0;s<t.length;s++)t.get(s).engine_type!=V.PULSEJET&&(t.get(s).engine_type!=V.TURBOMACHINERY||1!=t.get(s).type&&2!=t.get(s).type)||(e[s]=!1);return e}SetSelectedIndex(t){const e=at();this.etype_stats=e.get(this.elist_idx).get_stats(t),this.etype_inputs=e.get(this.elist_idx).get(t),this.use_pp?this.cooling_count=2*this.etype_stats.stats.cooling:this.cooling_count=this.etype_stats.stats.cooling,this.radiator_index<0&&(this.radiator_index=0),this.PulseJetCheck(),this.VerifyCowl(this.cowl_sel),this.CalculateStats()}GetSelectedIndex(){return at().get(this.elist_idx).find_name(this.etype_stats.name)}GetCurrentStats(){return this.etype_stats.Clone()}NeedCooling(){return this.etype_stats.stats.cooling>0}WarnCoolingReliability(){return this.cooling_count<this.etype_stats.stats.cooling}SetCooling(t){(t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.cooling_count=t,this.NeedCooling()&&(this.cooling_count=Math.max(1,this.cooling_count)),this.cooling_count=Math.min(this.GetMaxCooling(),this.cooling_count),this.CalculateStats()}GetCooling(){return this.cooling_count}GetMaxCooling(){return this.use_pp?2*this.etype_stats.stats.cooling:this.etype_stats.stats.cooling}SetNumRadiators(t){this.num_radiators=t,this.radiator_index>=t&&(this.radiator_index=t-1),this.radiator_index<0&&t>0&&(this.radiator_index=0)}GetNumRadiators(){return this.num_radiators}SetRadiator(t){this.radiator_index=t,this.CalculateStats()}GetRadiator(){return this.radiator_index}CanIntakeFan(){return this.IsAirCooled()}SetIntakeFan(t){this.intake_fan=t,this.CalculateStats()}GetIntakeFan(){return this.intake_fan}CanOutboardProp(){return this.use_ds&&(this.IsTractor()||"Fuselage Push-Pull"==this.mount_list[this.mount_sel].name)}GetOutboardProp(){return this.outboard_prop}SetOutboardProp(t){t&&this.use_ds?this.outboard_prop=!0:this.outboard_prop=!1,this.CalculateStats()}SetSelectedList(t){t!=this.elist_idx&&(this.elist_idx=t,this.SetSelectedIndex(0))}GetSelectedList(){return this.elist_idx}GetListOfEngines(){return at().get(this.elist_idx)}RequiresExtendedDriveshafts(){return!this.is_internal&&this.mount_list[this.mount_sel].reqED}SetTailMods(t,e,s){!this.mount_list[this.mount_sel].reqTail||t||e||this.GetGenerator()||(this.use_ds=!0),!this.mount_list[this.mount_sel].reqED||this.GetGenerator()||s&&(t||e)||(this.use_ds=!0)}CanMountIndex(){var t=[...Array(this.mount_list.length).fill(!0)];if(this.is_internal)for(let e=0;e<t.length;++e)t[e]=this.mount_list[e].helicopter;else if(this.GetIsTurbine()&&!this.GetIsTurboprop())for(let e=0;e<t.length;++e)t[e]=this.mount_list[e].turbine;else if(this.is_generator)(t=[...Array(this.mount_list.length).fill(!1)])[0]=!0;else if(this.use_pp)for(let e=0;e<t.length;++e)"fuselage"==this.mount_list[e].mount_type&&"Fuselage Push-Pull"!=this.mount_list[e].name&&(t[e]=!1),this.mount_list[e].turbine&&(t[e]=!1);else for(let e=0;e<t.length;++e)"Fuselage Push-Pull"==this.mount_list[e].name&&(t[e]=!1),this.mount_list[e].turbine&&(t[e]=!1);return t}SetMountIndex(t){if(t>=this.mount_list.length)throw"Index outside of mount_list range.";this.mount_sel=t,this.mount_list[this.mount_sel].reqED?this.SetUseExtendedDriveshaft(!0):this.CalculateStats()}GetMountIndex(){return this.GetIsPulsejet()?-1:this.mount_sel}CanUsePushPull(){return!(this.is_generator||this.GetIsJet()||this.is_internal||this.mount_list[this.mount_sel].helicopter)}SetUsePushPull(t){this.use_pp=t,t?(this.cooling_count*=2,"fuselage"==this.mount_list[this.mount_sel].mount_type&&(this.mount_sel=8)):(this.cooling_count=Math.floor(1e-6+this.cooling_count/2),"Fuselage Push-Pull"==this.mount_list[this.mount_sel].name&&(this.mount_sel=0)),this.CalculateStats()}GetUsePushPull(){return this.use_pp}GetMountList(){return this.mount_list}CanUseExtendedDriveshaft(){return!(0==this.GetNumPropellers()||this.is_internal||this.GetGenerator()||this.mount_list[this.mount_sel].helicopter)}SetUseExtendedDriveshaft(t){this.GetGenerator()||this.is_internal?this.use_ds=!1:this.use_ds=t,this.CalculateStats()}GetUseExtendedDriveshaft(){return this.use_ds}CanUseGears(){return!(0==this.GetNumPropellers()||this.GetGenerator())}SetGearCount(t){(t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.gp_count=t,this.SetGearReliability(this.gpr_count)}GetGearCount(){return this.gp_count}SetGearReliability(t){(t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.gpr_count=Math.min(t,this.gp_count),this.CalculateStats()}GetGearReliability(){return this.gpr_count}SetTorqueToStruct(t){this.torque_to_struct=t,this.use_pp||(this.torque_to_struct=!1),this.CalculateStats()}GetTorqueToStruct(){return this.torque_to_struct}CanTorqueToStruct(){return this.use_pp&&this.etype_stats.torque>0&&"pod"!=this.mount_list[this.mount_sel].mount_type}UpdateReliability(t){this.total_reliability=this.etype_stats.stats.reliability,this.total_reliability-=this.gp_count-this.gpr_count,this.total_reliability+=this.cowl_list[this.cowl_sel].stats.reliability,this.NeedCooling()&&(this.total_reliability-=this.GetMaxCooling()-this.cooling_count),this.GetIntakeFan()&&(this.total_reliability+=6),this.total_reliability+=t}GetReliability(){return this.use_pp?this.outboard_prop?this.total_reliability.toString()+"/"+(this.total_reliability-2).toString():this.total_reliability.toString()+"/"+this.total_reliability.toString():this.outboard_prop?(this.total_reliability-2).toString():this.total_reliability.toString()}GetOverspeed(){return this.is_generator?1e3:this.etype_stats.overspeed+Math.floor(1e-6+this.gp_count*this.etype_stats.overspeed/2)}GetIsPulsejet(){return this.etype_stats.pulsejet}GetIsJet(){return this.GetIsPulsejet()||this.GetIsTurbine()&&!this.GetIsTurboprop()}PulseJetCheck(){this.GetIsPulsejet()&&(this.use_pp=!1,this.use_ds=!1,this.gp_count=0,this.gpr_count=0,this.cooling_count=0,this.has_alternator=!1,this.is_generator=!1,this.cowl_sel=0,this.radiator_index=-1)}GetIsTurbine(){return this.etype_inputs.engine_type==V.TURBOMACHINERY}GetIsTurboprop(){return this.etype_inputs.engine_type==V.TURBOMACHINERY&&3==this.etype_inputs.type}TurbineCheck(){this.GetIsTurbine()&&(0==this.GetNumPropellers()&&(this.use_ds=!1,this.gp_count=0,this.gpr_count=0),this.cooling_count=0,this.cowl_sel=0,this.radiator_index=-1)}GetNumPropellers(){return!(this.GetIsPulsejet()||this.GetIsTurbine()||this.GetGenerator())||this.GetIsTurboprop()||this.is_internal?this.use_pp?2:1:0}GetIsTractorNacelle(){return this.GetNumPropellers()>0&&!this.GetUsePushPull()&&.8==this.mount_list[this.mount_sel].powerfactor&&!this.is_internal}IsLiquidCooled(){return this.NeedCooling()}IsRotary(){return this.etype_stats.oiltank}IsContraRotary(){return!this.GetIsPulsejet()&&!this.GetIsTurbine()&&""!=this.elist_idx&&3==this.etype_inputs.type}IsAirCooled(){return!(this.GetIsPulsejet()||this.GetIsTurbine()||this.IsLiquidCooled()||this.IsRotary())}GetCowlList(){return this.cowl_list}GetCowl(){return this.cowl_sel}GetCowlEnabled(){const t=[];for(const e of this.cowl_list)this.GetIsPulsejet()||this.GetIsTurbine()?t.push(e.air&&e.rotary&&e.liquid):this.IsLiquidCooled()?t.push(e.liquid):this.IsRotary()?t.push(e.rotary):t.push(e.air);return t}GetHasOilTank(){return this.etype_stats.oiltank}GetHasOilCooler(){return this.etype_stats.stats.cooling>0}GetHasOilPan(){return this.IsAirCooled()}VerifyCowl(t){const e=this.GetCowlEnabled();e[t]&&(this.cowl_sel=t),e[this.cowl_sel]||(this.cowl_sel=0)}SetCowl(t){this.VerifyCowl(t),this.CalculateStats()}GetGeneratorEnabled(){return!(this.GetIsPulsejet()||this.use_pp||this.GetIsElectric())}GetGenerator(){return this.is_generator}SetGenerator(t){this.GetGeneratorEnabled()?this.is_generator=t:this.is_generator=!1,this.is_generator&&(this.gp_count=0,this.gpr_count=0,this.use_ds=!1,this.use_pp=!1),this.CalculateStats()}GetIsElectric(){return this.etype_inputs.engine_type==V.ELECTRIC}GetAlternatorEnabled(){return!(this.GetIsPulsejet()||this.is_generator||this.GetIsElectric())}GetAlternator(){return this.has_alternator}SetAlternator(t){this.GetAlternatorEnabled()?this.has_alternator=t:this.has_alternator=!1,this.CalculateStats()}GetRumble(){return this.etype_stats.rumble}IsTractor(){return!(this.is_internal||this.GetGenerator()||"Tractor"!=this.mount_list[this.mount_sel].name&&"Center-Mounted Tractor"!=this.mount_list[this.mount_sel].name&&"Fuselage Push-Pull"!=this.mount_list[this.mount_sel].name)}GetTractorSpinner(){return{has:this.IsTractor()&&!(this.outboard_prop&&!this.use_pp),spinner:this.GetSpinner()}}IsPusher(){return!(this.is_internal||this.GetGenerator()||"Rear-Mounted Pusher"!=this.mount_list[this.mount_sel].name&&"Center-Mounted Pusher"!=this.mount_list[this.mount_sel].name&&"Fuselage Push-Pull"!=this.mount_list[this.mount_sel].name)}GetPusherSpinner(){return{has:this.IsPusher()&&!this.outboard_prop,spinner:this.GetSpinner()}}GetSpinner(){if(this.gp_count>0&&!this.GetGenerator()){if(this.use_ds&&("Center-Mounted Tractor"==this.mount_list[this.mount_sel].name||"Center-Mounted Pusher"==this.mount_list[this.mount_sel].name||"Fuselage Push-Pull"==this.mount_list[this.mount_sel].name))return[!0,!0];if(!this.etype_stats.oiltank)return[!0,!1]}return[!1,!1]}IsElectrics(){return this.has_alternator||this.GetGenerator()}GetEngineHeight(){return this.GetGenerator()?5:"Pod"==this.mount_list[this.mount_sel].name||this.etype_stats.pulsejet||this.is_internal||this.outboard_prop?2:"Nacelle (Offset)"==this.mount_list[this.mount_sel].name?1:"Nacelle (Inside)"==this.mount_list[this.mount_sel].name||"Channel Tractor"==this.mount_list[this.mount_sel].name||"Wing Pod"==this.mount_list[this.mount_sel].name?0:-1}IsTractorRotary(){return!this.GetGenerator()&&this.IsRotary()&&("Tractor"==this.mount_list[this.mount_sel].name||"Fuselage Push-Pull"==this.mount_list[this.mount_sel].name)}IsDiesel(){return this.etype_inputs.upgrades[3]}SetCalculateStats(t){this.CalculateStats=t}SetInternal(t){this.is_internal=t,t&&(this.use_ds=!1)}VerifyMount(){if(this.GetIsTurbine()&&!this.GetIsTurboprop())for(;!this.mount_list[this.mount_sel].turbine;)this.mount_sel++;else if(this.GetIsPulsejet()){if("fuselage"==this.mount_list[this.mount_sel].mount_type)for(let t=0;t<this.mount_list.length&&(this.mount_sel=t,"fuselage"==this.mount_list[this.mount_sel].mount_type);t++);}else this.is_internal?this.CanMountIndex()[this.mount_sel]||(this.mount_sel=1):this.is_generator?this.mount_sel=0:this.mount_list[this.mount_sel].turbine&&(this.use_pp?this.mount_sel=8:this.mount_sel=0)}VerifyCooling(){this.NeedCooling()?(this.cooling_count=Math.max(1,this.cooling_count),this.radiator_index<0&&(this.radiator_index=0)):(this.cooling_count=0,this.radiator_index=-1)}ElectricCheck(){this.etype_inputs.engine_type==V.ELECTRIC&&(this.has_alternator=!1)}SetFirstPulsejet(t){this.is_first_pulsejet=t}PartStats(){this.VerifyMount(),this.VerifyCooling(),this.PulseJetCheck(),this.TurbineCheck(),this.ElectricCheck(),this.CanUsePushPull()||(this.use_pp=!1),this.CanUseExtendedDriveshaft()||(this.use_ds=!1),this.CanOutboardProp()||(this.outboard_prop=!1);let t=new D;t=t.Add(this.etype_stats.stats),t.upkeep=t.power/10,this.GetIsPulsejet()&&(t.upkeep+=1),this.etype_stats.oiltank&&(t.mass+=1);var e=this.etype_stats.torque;return this.mount_list[this.mount_sel].helicopter&&(e=this.IsRotary()?Math.floor(1e-6+e/2):0),this.torque_to_struct?t.structure-=this.etype_stats.torque:"wing"==this.mount_list[this.mount_sel].mount_type?t.maxstrain-=this.etype_stats.torque:"fuselage"==this.mount_list[this.mount_sel].mount_type&&(t.latstab-=this.etype_stats.torque),this.IsContraRotary()&&(this.gp_count=Math.max(1,this.gp_count)),t.cost+=this.gp_count+this.gpr_count,this.gp_count>0&&t.era.push({name:"Propeller Gearing",era:"WWI"}),this.gpr_count>0&&t.era.push({name:"Reliable Gearing",era:"Roaring 20s"}),this.use_ds&&(t.mass+=1),t=t.Add(this.cowl_list[this.cowl_sel].stats),t.mass+=Math.floor(1e-6+t.drag*this.cowl_list[this.cowl_sel].mpd),t.drag=Math.floor(1e-6+t.drag*this.cowl_list[this.cowl_sel].ed),this.use_pp&&(t.power*=2,t.mass*=2,t.cooling*=2,t.fuelconsumption*=2,t.cost*=2,t.latstab*=2,t.structure*=2,t.maxstrain*=2,t.upkeep*=2,t.reqsections*=2,t.charge*=2,t.power=Math.floor(1e-6+this.mount_list[this.mount_sel].powerfactor*t.power)),"No Cowling"==this.cowl_list[this.cowl_sel].name||"Sealed Cowl"==this.cowl_list[this.cowl_sel].name||"Rear-Mounted Pusher"!=this.mount_list[this.mount_sel].name&&"Center-Mounted Pusher"!=this.mount_list[this.mount_sel].name&&"Center-Mounted Tractor"!=this.mount_list[this.mount_sel].name&&"Fuselage Push-Pull"!=this.mount_list[this.mount_sel].name||(t.cost+=2),this.IsAirCooled()&&this.intake_fan?(t.mass+=3,t.latstab*=2,t.structure*=2,t.maxstrain*=2,t.cost+=4,t.era.push({name:"Air Cooling Fan",era:"WWII"})):this.intake_fan=!1,this.GetHasOilCooler()&&(t.drag+=Math.floor(t.power/15)),this.GetIsPulsejet()||(t=t.Add(this.mount_list[this.mount_sel].stats),t.maxstrain-=Math.floor(1e-6+this.mount_list[this.mount_sel].strainfactor*this.etype_stats.stats.mass),t.drag+=Math.floor(1e-6+this.mount_list[this.mount_sel].dragfactor*this.etype_stats.stats.mass)),this.is_generator?(t.charge=Math.floor(1e-6+2*t.power/10)+2,t.power=0,t.visibility=2):this.has_alternator&&(t.charge=Math.floor(1e-6+t.power/10)+1,t.mass+=1,t.cost+=2,this.use_pp&&"Fuselage Push-Pull"==this.mount_list[this.mount_sel].name&&(t.mass+=1,t.cost+=2)),this.outboard_prop&&(t.drag+=3,this.use_pp&&(t.escape+=2)),this.is_first_pulsejet&&(t.cost+=5),t.pitchspeed=0,t.reliability=0,t}GetElectrics(){return{storage:0,equipment:[]}}}class Ft extends wt{constructor(t,e,s){super(),this.need_cool=0,this.idx_type=1,this.idx_mount=1,this.idx_coolant=0,this.metal_area=0,this.engine_count=0,this.type_list=t,this.mount_list=e,this.coolant_list=s,this.harden_cool=!1}toJSON(){return{type:this.idx_type,mount:this.idx_mount,coolant:this.idx_coolant,harden_cool:this.harden_cool}}fromJSON(t,e){this.idx_type=t.type,this.idx_mount=t.mount,this.idx_coolant=t.coolant,e>10.85&&(this.harden_cool=t.harden_cool)}serialize(t){t.PushNum(this.idx_type),t.PushNum(this.idx_mount),t.PushNum(this.idx_coolant),t.PushBool(this.harden_cool)}derserialize(t){this.idx_type=t.GetNum(),this.idx_mount=t.GetNum(),this.idx_coolant=t.GetNum(),t.version>10.85&&(this.harden_cool=t.GetBool())}GetTypeList(){return this.type_list}GetMountList(){return this.mount_list}GetCoolantList(){return this.coolant_list}CanType(){const t=[...Array(this.type_list.length).fill(!0)];for(let e=0;e<this.type_list.length;e++)"Evaporation"==this.type_list[e].name&&this.metal_area<5*this.engine_count&&(t[e]=!1);return t}SetTypeIndex(t){this.idx_type=t,this.CalculateStats()}GetTypeIndex(){return this.idx_type}SetParasol(t){this.has_parasol=t,this.CanMount()[this.idx_mount]||(this.idx_mount=0)}CanMount(){const t=[...Array(this.mount_list.length).fill(!0)];for(let e=0;e<this.mount_list.length;e++)"High Offset"!=this.mount_list[e].name||this.has_parasol||(t[e]=!1);return t}SetMountIndex(t){this.CanMount()[t]&&(this.idx_mount=t,this.CalculateStats())}GetMountIndex(){return this.idx_mount}SetCoolantIndex(t){this.idx_coolant=t,this.CalculateStats()}GetCoolantIndex(){return this.idx_coolant}SetNeedCool(t,e){this.need_cool=t,this.engine_count=e}SetMetalArea(t){this.metal_area=t,this.CanType()[this.idx_type]||(this.idx_type=0)}GetHarden(){return this.harden_cool}SetHarden(t){this.harden_cool=t,this.CalculateStats()}VerifyHarden(){this.coolant_list[this.idx_coolant].harden&&(this.harden_cool=!0)}GetIsFlammable(){return this.coolant_list[this.idx_coolant].flammable}PartStats(){this.VerifyHarden();var t=new D;return t.mass=3,(t=(t=(t=t.Add(this.type_list[this.idx_type].stats)).Add(this.mount_list[this.idx_mount].stats)).Add(this.coolant_list[this.idx_coolant].stats)).drag+=Math.ceil(this.type_list[this.idx_type].dragpercool*(this.need_cool-t.cooling)-1e-6),this.harden_cool&&(t.cost+=2),t}SetCalculateStats(t){this.CalculateStats=t}GetElectrics(){return{storage:0,equipment:[]}}}class Ot extends wt{constructor(t){super(),this.engines=[],this.radiators=[],this.mount_list=[];for(const e of t.mounts){const t={name:e.name,stats:new D(e),strainfactor:e.strainfactor,dragfactor:e.dragfactor,mount_type:e.location,powerfactor:e.powerfactor,reqED:!1,reqTail:!1,helicopter:e.helicopter,turbine:e.turbine};e.reqED&&(t.reqED=!0),e.reqTail&&(t.reqTail=!0),this.mount_list.push(t)}this.is_asymmetric=!1,this.r_type_list=[];for(const e of t["radiator-type"])this.r_type_list.push({name:e.name,stats:new D(e),dragpercool:e.dragpercool});this.r_mount_list=[];for(const e of t["radiator-mount"])this.r_mount_list.push({name:e.name,stats:new D(e)});this.r_coolant_list=[];for(const e of t["radiator-coolant"])this.r_coolant_list.push({name:e.name,harden:e.harden,flammable:e.flammable,stats:new D(e)});this.cowl_list=[];for(const e of t.cowling)this.cowl_list.push({name:e.name,stats:new D(e),ed:e.ed,mpd:e.mpd,air:e.air,liquid:e.liquid,rotary:e.rotary})}toJSON(){const t=[];for(const e of this.engines)t.push(e.toJSON());const e=[];for(const t of this.radiators)e.push(t.toJSON());return{engines:t,radiators:e,is_asymmetric:this.is_asymmetric}}fromJSON(t,e){this.radiators=[];for(const s of t.radiators){const t=new Ft(this.r_type_list,this.r_mount_list,this.r_coolant_list);t.fromJSON(s,e),t.SetCalculateStats(this.CalculateStats),this.radiators.push(t)}this.engines=[];for(const s of t.engines){const t=new Bt(this.mount_list,this.cowl_list);t.fromJSON(s,e),t.SetCalculateStats(this.CalculateStats),this.engines.push(t),t.SetNumRadiators(this.GetNumberOfRadiators())}this.is_asymmetric=t.is_asymmetric}serialize(t){t.PushNum(this.engines.length);for(const e of this.engines)e.serialize(t);t.PushNum(this.radiators.length);for(const e of this.radiators)e.serialize(t);t.PushBool(this.is_asymmetric)}deserialize(t){const e=t.GetNum();this.engines=[];for(let s=0;s<e;s++){const e=new Bt(this.mount_list,this.cowl_list);e.deserialize(t),e.SetCalculateStats(this.CalculateStats),this.engines.push(e)}const s=t.GetNum();this.radiators=[];for(let e=0;e<s;e++){const e=new Ft(this.r_type_list,this.r_mount_list,this.r_coolant_list);e.derserialize(t),e.SetCalculateStats(this.CalculateStats),this.radiators.push(e)}this.is_asymmetric=t.GetBool();for(const t of this.engines)t.SetNumRadiators(this.GetNumberOfRadiators())}GetHasOilTank(){for(const t of this.engines)if(t.GetCurrentStats().oiltank)return!0;return!1}GetReliabilityList(){var t=[];for(const e of this.engines)t.push(e.GetReliability());return t}GetMinIAF(){var t=0;for(const e of this.engines)t=Math.max(t,e.GetMinIAF());return t}GetMaxIAF(){var t=100;for(const e of this.engines)t=Math.min(t,e.GetMaxIAF());return t}GetMinAltitude(){var t=0;for(const e of this.engines)t=Math.max(t,e.GetMinAltitude());return t}GetMaxAltitude(){var t=1e3;for(const e of this.engines)t=Math.min(t,e.GetMaxAltitude());return t}SetNumberOfEngines(t){for((t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),t=Math.min(20,t);this.engines.length>t;)this.engines.pop();var e=null;for(this.engines.length>0&&(e=JSON.stringify(this.engines[this.engines.length-1].toJSON()));this.engines.length<t;){const t=new Bt(this.mount_list,this.cowl_list);t.SetCalculateStats(this.CalculateStats),e&&t.fromJSON(JSON.parse(e),1e3),this.engines.push(t),t.SetNumRadiators(this.GetNumberOfRadiators())}this.CalculateStats()}GetNumberOfEngines(){let t=0;for(const e of this.engines)e.GetGenerator()||t++;return t}GetNumberOfItems(){return this.engines.length}GetEngine(t){return this.engines[t]}GetRadiator(t){return this.radiators[t]}SetNumberOfRadiators(t){for((t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t);this.radiators.length>t;)this.radiators.pop();for(;this.radiators.length<t;){const t=new Ft(this.r_type_list,this.r_mount_list,this.r_coolant_list);t.SetCalculateStats(this.CalculateStats),this.radiators.push(t)}for(const e of this.engines)e.SetNumRadiators(t);this.CalculateStats()}GetNumberOfRadiators(){return 0==this.radiators.length&&this.NeedCooling()?this.SetNumberOfRadiators(1):this.radiators.length>0&&!this.NeedCooling()&&this.SetNumberOfRadiators(0),this.radiators.length}NeedCooling(){let t=!1;for(const e of this.engines)t=t||e.NeedCooling();return t}UpdateReliability(t){for(const e of this.engines){let s=new D;e.GetRadiator()<this.radiators.length&&e.GetRadiator()>=0&&(s=this.radiators[e.GetRadiator()].PartStats()),e.UpdateReliability(t.reliability+s.reliability)}}SetAsymmetry(t){this.is_asymmetric=t,this.CalculateStats()}GetAsymmetry(){return this.is_asymmetric}GetNumPropellers(){var t=0;for(const e of this.engines)t+=e.GetNumPropellers();return t}GetOverspeed(){let t=100;for(const e of this.engines)t=Math.min(t,e.GetOverspeed());return t}GetRumble(){var t=0;for(const e of this.engines)t+=e.GetRumble();return t}GetMaxRumble(){var t=0;for(const e of this.engines)t=Math.max(t,e.GetRumble());return t}GetTractorSpinner(){const t={have:!1,spin_count:0,arty_spin_count:0};for(const e of this.engines){const s=e.GetTractorSpinner();s.has&&(t.have=!0,s.spinner[0]&&t.spin_count++,s.spinner[1]&&t.arty_spin_count++)}return t}GetPusherSpinner(){const t={have:!1,spin_count:0,arty_spin_count:0};for(const e of this.engines){const s=e.GetPusherSpinner();s.has&&(t.have=!0,s.spinner[0]&&t.spin_count++,s.spinner[1]&&t.arty_spin_count++)}return t}IsElectrics(){for(const t of this.engines)if(t.IsElectrics())return!0;return!1}HaveParasol(t){for(const e of this.radiators)e.SetParasol(t)}SetMetalArea(t){for(const e of this.radiators)e.SetMetalArea(t)}SetTailMods(t,e,s){for(const i of this.engines)i.SetTailMods(t,e,s)}GetEngineHeight(){var t=2;for(const e of this.engines)t=Math.min(t,e.GetEngineHeight());return t}HasTractorRotary(){for(const t of this.engines)if(t.IsTractorRotary())return!0;return!1}SetInternal(t){for(const e of this.engines)e.SetInternal(t);if(t)for(const t of this.radiators)t.SetMetalArea(0),t.SetParasol(!1)}HasPulsejet(){for(const t of this.engines)if(t.GetIsPulsejet())return!0;return!1}HasTurbineNoProp(){for(const t of this.engines)if(t.GetIsTurbine()&&0==t.GetNumPropellers())return!0;return!1}HasDiesel(){for(const t of this.engines)if(t.IsDiesel())return!0;return!1}GetEngineTypes(){var t=[];for(const e of this.engines)e.GetNumPropellers()>0?t.push({type:j.PROPELLER,num:e.GetNumPropellers()}):e.GetIsPulsejet()?t.push({type:j.PULSEJET,num:0}):e.GetIsTurbine()&&t.push({type:j.TURBINE,num:e.GetCurrentStats().stats.pitchspeed});return t}GetIsFlammable(){for(const t of this.radiators)if(t.GetIsFlammable())return!0;return!1}PartStats(){var t=new D;const e=new Array(this.GetNumberOfRadiators()).fill(null).map((()=>({cool:0,count:0})));var s=0,i=100,a=!1,n=2;for(let r of this.engines){!a&&r.GetIsPulsejet()?(a=!0,r.SetFirstPulsejet(!0)):r.SetFirstPulsejet(!1);const o=r.PartStats();n=Math.min(n,o.visibility),t=t.Add(o),r.NeedCooling()&&(e[r.GetRadiator()].cool+=r.GetCooling(),e[r.GetRadiator()].count+=1),s+=r.GetCurrentStats().stats.cost,o.pitchspeed>0&&(i=Math.min(i,o.pitchspeed))}t.visibility=n,i<100&&(t.pitchspeed=i),t.upkeep=Math.floor(1e-6+Math.min(t.upkeep,s));let r=new D;const o=new Map;for(let t=0;t<this.radiators.length;t++){const s=this.radiators[t];s.SetNeedCool(e[t].cool,e[t].count);const i=s.PartStats();r=r.Add(i);for(const e of i.warnings){const s=o.get(e.source);s?(s.push(t+1),o.set(e.source,s)):o.set(e.source,[t+1])}}for(const t of r.warnings)t.source=A("Radiators #",R.Join(",",o.get(t.source)))+" "+t.source;t=t.Add(r),this.is_asymmetric&&(t.latstab-=3),this.HasPulsejet()&&t.warnings.push({source:A("Pulsejets"),warning:A("Pulsejet Boost Warning"),color:q.WHITE}),this.HasTurbineNoProp()&&t.warnings.push({source:A("Turbine"),warning:A("Turbine Boost Warning"),color:q.WHITE}),this.HasDiesel()&&t.warnings.push({source:A("Diesel"),warning:A("Diesel Warning"),color:q.WHITE});var l=0;for(const t of this.engines)t.IsRotary()&&(t.GetUsePushPull()&&t.GetTorqueToStruct()||(t.GetUsePushPull()&&t.IsTractor()?l+=2:t.IsTractor()?l++:t.IsPusher()&&l--));return l>0?t.warnings.push({source:A("Rotary"),warning:A("Rotary Right Warning"),color:q.WHITE}):l<0&&t.warnings.push({source:A("Rotary"),warning:A("Rotary Left Warning"),color:q.WHITE}),t.reliability=0,t}SetCalculateStats(t){this.CalculateStats=t}GetHasTractorNacelles(){let t=0;for(const e of this.engines)e.GetIsTractorNacelle()&&t++;return t>1}GetElectrics(){let t={storage:0,equipment:[]};for(let e=0;e<this.engines.length;e++){const s=this.engines[e].PartStats();0!=s.charge&&t.equipment.push({source:A("Vital Part Engine",e+1),charge:s.charge.toString()})}for(const e of this.radiators)t=Ct(t,e.GetElectrics());return t}}class qt extends wt{constructor(t){super(),this.engines=[],this.idx_prop=2,this.prop_list=[];for(const e of t.props)this.prop_list.push({name:e.name,stats:new D(e),energy:e.energy,turn:e.turn});this.idx_upg=0,this.upg_list=[];for(const e of t.upgrades)this.upg_list.push({name:e.name,stats:new D(e),energy:e.energy,turn:e.turn})}toJSON(){return{type:this.idx_prop,upgrade:this.idx_upg}}fromJSON(t,e){this.idx_prop=t.type,e<11.35?(this.idx_upg=0,t.use_variable&&(this.idx_upg=1),5==this.idx_prop&&(this.idx_upg=2,this.idx_prop=2)):this.idx_upg=t.upgrade}serialize(t){t.PushNum(this.idx_prop),t.PushNum(this.idx_upg)}deserialize(t){this.idx_prop=t.GetNum(),t.version<11.35?(this.idx_upg=0,t.GetBool()&&(this.idx_upg=1),5==this.idx_prop&&(this.idx_upg=2,this.idx_prop=2)):this.idx_upg=t.GetNum()}GetPropList(){return this.prop_list}GetUpgradeList(){return this.upg_list}SetPropIndex(t){this.idx_prop=t,this.CalculateStats()}GetPropIndex(){return this.idx_prop}SetUpgradeIndex(t){this.idx_upg=t,this.CalculateStats()}GetUpgradeIndex(){return this.idx_upg}SetEngineTypes(t){this.engines=t}GetNumPropellers(){var t=0;for(const e of this.engines)e.type==j.PROPELLER&&(t+=e.num);return t}GetEnergy(){if(this.acft_type==gt.HELICOPTER)return 2.5;if(this.acft_type==gt.ORNITHOPTER_BASIC)return 6;if(this.acft_type==gt.ORNITHOPTER_FLUTTER)return 8;if(this.acft_type==gt.ORNITHOPTER_BUZZER)return 5;if(0==this.engines.length)return 2.5;var t=999;for(const e of this.engines)switch(e.type){case j.PROPELLER:t=Math.min(t,this.prop_list[this.idx_prop].energy+this.upg_list[this.idx_upg].energy);break;case j.PULSEJET:t=Math.min(t,5);break;case j.TURBINE:t=Math.min(t,9);break;default:throw"Not a known Engine Type."}return t}GetTurn(){if(this.acft_type==gt.HELICOPTER)return 6;if(this.acft_type==gt.ORNITHOPTER_BASIC)return 7;if(this.acft_type==gt.ORNITHOPTER_FLUTTER)return 8;if(this.acft_type==gt.ORNITHOPTER_BUZZER)return 5;if(0==this.engines.length)return 6;var t=999;for(const e of this.engines)switch(e.type){case j.PROPELLER:t=Math.min(t,this.prop_list[this.idx_prop].turn+this.upg_list[this.idx_upg].turn);break;case j.PULSEJET:t=Math.min(t,2.5);break;case j.TURBINE:t=Math.min(t,4);break;default:throw"Not a known Engine Type."}return t}SetAcftType(t){this.acft_type=t}PartStats(){var t=new D;if(0!=this.GetNumPropellers()&&(t=(t=t.Add(this.prop_list[this.idx_prop].stats.Multiply(this.GetNumPropellers()))).Add(this.upg_list[this.idx_upg].stats.Multiply(this.GetNumPropellers()))),this.acft_type==gt.HELICOPTER)t.pitchboost=.6,t.pitchspeed=1;else if(this.acft_type==gt.ORNITHOPTER_BASIC)t.pitchboost=.6,t.pitchspeed=.8;else if(this.acft_type==gt.ORNITHOPTER_FLUTTER)t.pitchboost=.8,t.pitchspeed=.8;else if(this.acft_type==gt.ORNITHOPTER_BUZZER)t.pitchboost=1,t.pitchspeed=.6;else if(0==this.engines.length)t.pitchboost=.6,t.pitchspeed=1;else{t.pitchboost=999,t.pitchspeed=999;for(const e of this.engines)switch(e.type){case j.PROPELLER:t.pitchboost=Math.min(t.pitchboost,this.prop_list[this.idx_prop].stats.pitchboost+this.upg_list[this.idx_upg].stats.pitchboost),t.pitchspeed=Math.min(t.pitchspeed,this.prop_list[this.idx_prop].stats.pitchspeed+this.upg_list[this.idx_upg].stats.pitchspeed);break;case j.PULSEJET:t.pitchboost=Math.min(t.pitchboost,.6),t.pitchspeed=Math.min(t.pitchspeed,1.3);break;case j.TURBINE:t.pitchboost=Math.min(t.pitchboost,.2),t.pitchspeed=Math.min(t.pitchspeed,e.num);break;default:throw"Not a known Engine Type."}}return t}SetCalculateStats(t){this.CalculateStats=t}GetElectrics(){return{storage:0,equipment:[]}}}class Dt extends wt{constructor(t){super(),this.frame_list=[];for(const e of t.frames)this.frame_list.push({name:e.name,stats:new D(e),basestruct:e.basestructure,basecost:e.basecost,geodesic:e.geodesic});this.sel_skin=0,this.skin_list=[];for(const e of t.skin)this.skin_list.push({name:e.name,stats:new D(e),monocoque:e.monocoque,monocoque_structure:e.monocoque_structure,flammable:e.flammable,dragfactor:e.dragfactor,massfactor:e.massfactor});this.farman=!1,this.boom=!1,this.has_tractor_nacelles=!1,this.sel_tail=2,this.tail_list=[];for(const e of t.tail)this.tail_list.push({name:e.name,stats:new D(e)});this.flying_wing=!1,this.is_tandem=!1,this.section_list=[],this.tail_section_list=[],this.interal_bracing_count=0,this.SetRequiredSections(1)}toJSON(){return{sections:this.section_list,tail_sections:this.tail_section_list,tail_index:this.sel_tail,use_farman:this.farman,use_boom:this.boom,flying_wing:this.flying_wing,sel_skin:this.sel_skin}}fromJSON(t,e){this.section_list=[];for(const i of t.sections)(s={frame:i.frame,geodesic:i.geodesic,monocoque:i.monocoque,lifting_body:i.lifting_body,internal_bracing:i.internal_bracing}).monocoque&&s.lifting_body&&(s.monocoque=!1),this.section_list.push(s),e<10.25&&(this.sel_skin=i.skin);this.tail_section_list=[];for(const i of t.tail_sections){var s;(s={frame:i.frame,geodesic:i.geodesic,monocoque:i.monocoque,lifting_body:i.lifting_body,internal_bracing:i.internal_bracing}).monocoque&&s.lifting_body&&(s.monocoque=!1),this.tail_section_list.push(s),e<10.25&&(this.sel_skin=i.skin)}this.farman=t.use_farman,this.boom=t.use_boom,this.sel_tail=t.tail_index,this.flying_wing=t.flying_wing,e>10.25&&(this.sel_skin=t.sel_skin),this.interal_bracing_count=this.CountInternalBracing()}serialize(t){t.PushNum(this.section_list.length);for(let e=0;e<this.section_list.length;e++){const s=this.section_list[e];t.PushNum(s.frame),t.PushBool(s.geodesic),t.PushBool(s.monocoque),t.PushBool(s.lifting_body),t.PushBool(s.internal_bracing)}t.PushNum(this.tail_section_list.length);for(let e=0;e<this.tail_section_list.length;e++){const s=this.tail_section_list[e];t.PushNum(s.frame),t.PushBool(s.geodesic),t.PushBool(s.monocoque),t.PushBool(s.lifting_body),t.PushBool(s.internal_bracing)}t.PushNum(this.sel_tail),t.PushBool(this.farman),t.PushBool(this.boom),t.PushBool(this.flying_wing),t.PushNum(this.sel_skin)}deserialize(t){const e=t.GetNum();this.section_list=[];for(let s=0;s<e;s++){let e={frame:0,skin:0,geodesic:!1,monocoque:!1,lifting_body:!1,internal_bracing:!1};e.frame=t.GetNum(),t.version<10.25&&(this.sel_skin=t.GetNum()),e.geodesic=t.GetBool(),e.monocoque=t.GetBool(),e.lifting_body=t.GetBool(),e.internal_bracing=t.GetBool(),e.monocoque&&e.lifting_body&&(e.monocoque=!1),this.section_list.push(e)}const s=t.GetNum();this.tail_section_list=[];for(let e=0;e<s;e++){let e={frame:0,skin:0,geodesic:!1,monocoque:!1,lifting_body:!1,internal_bracing:!1};e.frame=t.GetNum(),t.version<10.25&&(this.sel_skin=t.GetNum()),e.geodesic=t.GetBool(),e.monocoque=t.GetBool(),e.lifting_body=t.GetBool(),e.internal_bracing=t.GetBool(),e.monocoque&&e.lifting_body&&(e.monocoque=!1),this.tail_section_list.push(e)}this.sel_tail=t.GetNum(),this.farman=t.GetBool(),this.boom=t.GetBool(),this.flying_wing=t.GetBool(),t.version>10.25&&(this.sel_skin=t.GetNum()),this.interal_bracing_count=this.CountInternalBracing()}DuplicateSection(t,e=1){const s=this.section_list[t];for(let i=0;i<e;i++){const i={frame:s.frame,geodesic:s.geodesic,monocoque:s.monocoque,lifting_body:s.lifting_body,internal_bracing:s.internal_bracing};if(i.internal_bracing){if(this.CountSections()+this.tail_section_list.length==this.interal_bracing_count)return;this.interal_bracing_count+=e}this.section_list.splice(t,0,i)}this.CalculateStats()}DuplicateTailSection(t,e=1){const s=this.tail_section_list[t];for(let i=0;i<e;i++){const e={frame:s.frame,geodesic:s.geodesic,monocoque:s.monocoque,lifting_body:s.lifting_body,internal_bracing:s.internal_bracing};if(e.internal_bracing&&this.CountSections()==this.interal_bracing_count)return;this.tail_section_list.splice(t,0,e)}}DeleteSection(t,e=!0){if(this.required_sections!=this.CountSections()||this.section_list[t].internal_bracing){if(this.section_list[t].internal_bracing&&this.interal_bracing_count--,this.section_list.splice(t,1),this.interal_bracing_count>this.CountSections()+this.tail_section_list.length)for(let t=this.section_list.length-1;t>=0;t--)if(this.section_list[t].internal_bracing){this.interal_bracing_count--,this.section_list.splice(t,1);break}e&&this.CalculateStats()}}SetRequiredSections(t){if(this.required_sections=t,this.required_sections>this.CountSections()&&(0==this.section_list.length&&this.section_list.push({frame:0,geodesic:!1,monocoque:!1,lifting_body:!1,internal_bracing:!1}),this.required_sections-this.CountSections()>0))for(let t=this.section_list.length-1;t>=0;t--)if(!this.section_list[t].internal_bracing)return void this.DuplicateSection(t,this.required_sections-this.CountSections())}SetRequiredTailSections(t){for(t>this.tail_section_list.length&&(0==this.tail_section_list.length&&this.tail_section_list.push({frame:0,geodesic:!1,monocoque:!1,lifting_body:!1,internal_bracing:!1}),t-this.tail_section_list.length>0&&this.DuplicateTailSection(this.tail_section_list.length-1,t-this.tail_section_list.length));t<this.tail_section_list.length;)this.tail_section_list.pop();for(;this.CountSections()+t<this.interal_bracing_count;){let t=this.section_list.length-1;for(;t>0&&!this.section_list[t].internal_bracing;t--);this.DeleteSection(t,!1)}this.CalculateStats()}CountSections(){return this.section_list.length-this.interal_bracing_count}GetNumFrames(){return this.CountSections()+this.tail_section_list.length}CountInternalBracing(){var t=0;for(const e of this.section_list)e.internal_bracing&&t++;return t}BaseType(){const t=[...Array(this.frame_list.length).fill(0)];for(const e of this.section_list)e.internal_bracing||t[e.frame]++;for(const e of this.tail_section_list)e.internal_bracing||t[e.frame]++;var e=0,s=0;for(let i=t.length-1;i>=0;i--)t[i]>s&&(s=t[i],e=i);return e}GetFrameList(){return this.frame_list}GetSkinList(){return this.skin_list}GetSectionList(){return this.section_list}SetFrame(t,e){this.section_list[t].frame=e,this.frame_list[e].geodesic||(this.section_list[t].geodesic=!1),this.CalculateStats()}SetGeodesic(t,e){this.frame_list[this.section_list[t].frame].geodesic&&(this.section_list[t].geodesic=e,this.CalculateStats())}SetMonocoque(t,e){this.skin_list[this.sel_skin].monocoque&&(this.section_list[t].monocoque=e,this.CalculateStats())}SetLiftingBody(t,e){this.skin_list[this.sel_skin].monocoque&&(this.section_list[t].lifting_body=e,this.CalculateStats())}SetInternalBracing(t,e){e&&!this.section_list[t].internal_bracing&&this.PossibleInternalBracing(!0)&&this.CountSections()>this.required_sections?(this.section_list[t].internal_bracing=!0,this.section_list[t].monocoque=!1,this.section_list[t].lifting_body=!1,this.interal_bracing_count++,this.CalculateStats()):e||(this.section_list[t].internal_bracing=!1,this.interal_bracing_count--,this.CalculateStats())}PossibleInternalBracing(t=!1){var e=this.CountSections();return this.farman||(e+=this.tail_section_list.length),t&&(e-=1),this.interal_bracing_count+1<=e}PossibleGeodesic(t){return this.frame_list[this.section_list[t].frame].geodesic&&!this.section_list[t].monocoque}PossibleMonocoque(t){return this.skin_list[this.sel_skin].monocoque&&!this.section_list[t].internal_bracing&&!this.section_list[t].lifting_body}PossibleLiftingBody(t){return this.skin_list[this.sel_skin].monocoque&&!this.section_list[t].internal_bracing&&!this.section_list[t].monocoque}PossibleTailGeodesic(t){return this.frame_list[this.tail_section_list[t].frame].geodesic&&!this.tail_section_list[t].monocoque}PossibleTailMonocoque(t){return this.skin_list[this.sel_skin].monocoque&&!this.farman&&!this.tail_section_list[t].lifting_body}PossibleTailLiftingBody(t){return this.skin_list[this.sel_skin].monocoque&&!this.farman&&!this.tail_section_list[t].monocoque}PossibleRemoveSections(){return this.CountSections()>this.required_sections}GetFarmanOrBoom(){return this.farman||this.boom}SectionStats(t){var e=new D;return e=e.Add(this.frame_list[t.frame].stats),t.geodesic&&(e.structure*=1.5,e.cost*=2,e.era.push({name:"Geodesic",era:"Coming Storm"})),t.lifting_body&&(e.wingarea+=3),t.internal_bracing||(e.drag+=4,t.monocoque&&(e.mass=0,e.cost+=1,e.structure=this.skin_list[this.sel_skin].monocoque_structure),e=e.Add(this.skin_list[this.sel_skin].stats)),e}TailSectionStats(t){var e=new D;return e=e.Add(this.frame_list[t.frame].stats),t.geodesic&&(e.structure*=1.5,e.cost*=2,e.era.push({name:"Geodesic",era:"Coming Storm"})),t.lifting_body&&(e.wingarea+=3),e.drag+=4,this.farman||(t.monocoque&&(e.mass=0,e.cost+=1,e.structure=this.skin_list[this.sel_skin].monocoque_structure),e=e.Add(this.skin_list[this.sel_skin].stats)),e}CountMainLiftingBody(){var t=0;for(const e of this.section_list)e.lifting_body&&t++;return t}CountTailLiftingBody(){var t=0;for(const e of this.tail_section_list)e.lifting_body&&t++;return t}CountLiftingBody(){return this.CountMainLiftingBody()+this.CountTailLiftingBody()}SetIsTandem(t){this.is_tandem!=t&&(this.is_tandem=t,this.SetTailType(this.sel_tail))}SetTailType(t){0==this.tail_list[t].stats.reqsections&&this.is_tandem&&t++,this.sel_tail=t,this.SetRequiredTailSections(this.tail_list[t].stats.reqsections)}GetTailType(){return this.sel_tail}GetTailList(){return this.tail_list}GetTailSectionList(){return this.tail_section_list}SetUseFarman(t){if(this.farman=t,t&&this.boom&&(this.boom=!1),this.farman)for(const t of this.tail_section_list)t.monocoque=!1,t.lifting_body=!1;this.CalculateStats()}GetUseFarman(){return this.farman}SetUseBoom(t){this.boom=t,t&&this.farman&&(this.farman=!1),this.CalculateStats()}GetUseBoom(){return this.boom}SetTailFrame(t,e){this.tail_section_list[t].frame=e,this.frame_list[e].geodesic||(this.tail_section_list[t].geodesic=!1),this.CalculateStats()}SetTailGeodesic(t,e){this.frame_list[this.tail_section_list[t].frame].geodesic&&(this.tail_section_list[t].geodesic=e,this.CalculateStats())}SetTailMonocoque(t,e){this.skin_list[this.sel_skin].monocoque&&!this.farman&&(this.tail_section_list[t].monocoque=e,this.CalculateStats())}SetTailLiftingBody(t,e){this.skin_list[this.sel_skin].monocoque&&!this.farman&&(this.tail_section_list[t].lifting_body=e,this.CalculateStats())}SetHasTractorNacelles(t){this.has_tractor_nacelles=t}GetHasTractorNacelles(){return this.has_tractor_nacelles}CanFlyingWing(){for(const t of this.section_list)if(t.lifting_body)return!0;for(const t of this.tail_section_list)if(t.lifting_body)return!0;return!1}GetFlyingWing(){return this.flying_wing}SetFlyingWing(t){t&&this.CanFlyingWing()?this.flying_wing=!0:this.flying_wing=!1,this.CalculateStats()}GetIsTailless(){return 0==this.tail_section_list.length}SetAllFrame(t){for(const e of this.section_list)e.frame=t,this.frame_list[t].geodesic||(e.geodesic=!1);for(const e of this.tail_section_list)e.frame=t,this.frame_list[t].geodesic||(e.geodesic=!1);this.CalculateStats()}SetAllSkin(t){this.sel_skin=t;for(const e of this.section_list)e.internal_bracing||this.skin_list[t].monocoque||(e.monocoque=!1,e.lifting_body=!1);for(const e of this.tail_section_list)e.internal_bracing||this.skin_list[t].monocoque||(e.monocoque=!1,e.lifting_body=!1);this.CalculateStats()}GetArmor(){return"Dragon Skin"==this.skin_list[this.sel_skin].name?5:0}GetIsFlammable(){return!!this.skin_list[this.sel_skin].flammable}GetSkin(){return this.sel_skin}CanCutout(){let t=this.section_list.length*this.skin_list[this.sel_skin].stats.visibility;return this.farman?t+=this.tail_section_list.length:t+=this.tail_section_list.length*this.skin_list[this.sel_skin].stats.visibility,t<3}SetCalculateStats(t){this.CalculateStats=t}PartStats(){this.CanFlyingWing()||(this.flying_wing=!1);var t=new D;const e=this.BaseType();t.structure=this.frame_list[e].basestruct,t.cost=this.frame_list[e].basecost;var s=this.skin_list[this.sel_skin].monocoque_structure<0;for(const e of this.section_list)t=t.Add(this.SectionStats(e)),s=s&&(e.internal_bracing||e.monocoque);var i=new D;for(const t of this.tail_section_list)i=i.Add(this.TailSectionStats(t)),this.farman||(s=s&&(t.internal_bracing||t.monocoque));s&&(t.structure+=30),t=t.Add(this.tail_list[this.sel_tail].stats),this.boom&&(i.maxstrain-=i.mass,this.has_tractor_nacelles||(i.drag=Math.floor(1e-6+1.5*i.drag))),this.farman?(t.drag*=this.skin_list[this.sel_skin].dragfactor,t.mass*=this.skin_list[this.sel_skin].massfactor,t.visibility+=this.tail_section_list.length,i.mass=Math.floor(1e-6+.5*i.mass),t=t.Add(i)):((t=t.Add(i)).drag*=this.skin_list[this.sel_skin].dragfactor,t.mass*=this.skin_list[this.sel_skin].massfactor);const a=this.CountLiftingBody();return t.cost+=a,this.flying_wing?t.liftbleed+=5:t.drag+=a,this.PossibleRemoveSections()&&this.CountMainLiftingBody()<this.CountSections()&&t.warnings.push({source:A("Frame Count"),warning:A("Frame Count Warning"),color:q.YELLOW}),t.structure=Math.floor(1e-6+t.structure),t.cost=Math.floor(1e-6+t.cost),t.visibility=Math.min(t.visibility,3),t.Round(),t}GetElectrics(){return{storage:0,equipment:[]}}}class Ut extends wt{constructor(t){super(),this.have_tail=!0,this.is_tandem=!1,this.is_swept=!1,this.is_heli=!1,this.hstab_sel=0,this.hstab_count=1,this.hstab_list=[];for(const e of t.hstab)this.hstab_list.push({name:e.name,is_canard:e.is_canard,increment:e.increment,stats:new D(e),dragfactor:e.dragfactor,is_vtail:e.is_vtail,is_tail:e.is_tail});this.vstab_sel=0,this.vstab_count=1,this.vstab_list=[];for(const e of t.vstab)this.vstab_list.push({name:e.name,increment:e.increment,stats:new D(e),dragfactor:e.dragfactor,is_vtail:e.is_vtail,is_tail:e.is_tail})}toJSON(){return{hstab_sel:this.hstab_sel,hstab_count:this.hstab_count,vstab_sel:this.vstab_sel,vstab_count:this.vstab_count}}fromJSON(t,e){this.hstab_sel=t.hstab_sel,this.hstab_count=t.hstab_count,this.vstab_sel=t.vstab_sel,this.vstab_count=t.vstab_count}serialize(t){t.PushNum(this.hstab_sel),t.PushNum(this.hstab_count),t.PushNum(this.vstab_sel),t.PushNum(this.vstab_count)}deserialize(t){this.hstab_sel=t.GetNum(),this.hstab_count=t.GetNum(),this.vstab_sel=t.GetNum(),this.vstab_count=t.GetNum()}IsDefault(){return 0==this.hstab_sel&&1==this.hstab_count&&0==this.vstab_sel&&1==this.vstab_count}GetHStabList(){return this.hstab_list}GetVStabList(){return this.vstab_list}GetHStabType(){return this.hstab_sel}SetHStabType(t){("The Wings"!=this.hstab_list[t].name||this.is_tandem||this.is_swept)&&(this.hstab_list[t].is_vtail?this.SetVTail():this.hstab_list[this.hstab_sel].is_vtail&&(this.vstab_sel=0,this.vstab_count=1),this.hstab_sel=t,this.SetHStabCount(this.hstab_count))}GetHValidList(){var t=[];if(this.is_heli)t=Array(this.hstab_list.length).fill(!1),this.have_tail?t[0]=!0:t[1]=!0;else for(const e of this.hstab_list)"The Wings"!=e.name&&"Outboard"!=e.name||this.is_tandem||this.is_swept?e.is_tail&&!this.have_tail?t.push(!1):t.push(!0):t.push(!1);return t}GetIsVTail(){return this.hstab_list[this.hstab_sel].is_vtail}SetVTail(){for(let t=0;t<this.hstab_list.length;t++)this.hstab_list[t].is_vtail&&(this.hstab_sel=t);for(let t=0;t<this.vstab_list.length;t++)this.vstab_list[t].is_vtail&&(this.vstab_sel=t);this.hstab_count=1,this.vstab_count=0}GetVStabType(){return this.vstab_sel}SetVStabType(t){("Outboard"!=this.vstab_list[t].name||this.CanVOutboard())&&(this.vstab_list[t].is_vtail?this.SetVTail():this.vstab_list[this.vstab_sel].is_vtail&&(this.hstab_sel=0,this.vstab_count=1),this.vstab_sel=t,this.SetVStabCount(this.vstab_count))}GetVValidList(){var t=[];if(this.is_heli)(t=Array(this.vstab_list.length).fill(!1))[0]=!0;else for(const e of this.vstab_list)"Outboard"!=e.name||this.CanVOutboard()?e.is_tail&&!this.have_tail?t.push(!1):t.push(!0):t.push(!1);return t}GetHStabCount(){return this.hstab_count}SetHStabCount(t){if((t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.hstab_count=t,0!=this.hstab_list[this.hstab_sel].increment)for(;this.hstab_count%this.hstab_list[this.hstab_sel].increment!=0;)this.hstab_count++;else this.hstab_count=0;this.CalculateStats()}GetHStabIncrement(){return this.hstab_sel>=0?this.hstab_list[this.hstab_sel].increment:1}GetVStabCount(){return this.vstab_count}SetVStabCount(t){if((t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.vstab_count=t,0!=this.vstab_list[this.vstab_sel].increment)for(;this.vstab_count%this.vstab_list[this.vstab_sel].increment!=0;)this.vstab_count++;else this.vstab_count=0;this.CalculateStats()}GetVStabIncrement(){return this.vstab_sel>=0?this.vstab_list[this.vstab_sel].increment:1}SetEngineCount(t){this.engine_count=t}GetIsTandem(){return this.is_tandem}SetIsTandem(t){this.is_tandem=t}SetIsSwept(t){this.is_swept=t}CanVOutboard(){return this.is_swept||this.is_tandem||this.hstab_list[this.hstab_sel].is_canard&&this.hstab_count>0}GetVOutboard(){return"Outboard"==this.vstab_list[this.vstab_sel].name}GetCanard(){return this.hstab_list[this.hstab_sel].is_canard}SetLiftingArea(t){this.lifting_area=t}SetHaveTail(t){if(this.have_tail=t,!t){this.GetHValidList()[this.hstab_sel]||(this.hstab_sel=2);const t=this.GetVValidList();t[this.vstab_sel]||(t[1]||(this.hstab_sel=2),this.vstab_sel=1,this.vstab_count%2!=0&&this.vstab_count++)}this.is_heli&&(this.have_tail?this.hstab_sel=0:this.hstab_sel=1,this.hstab_count=1)}SetHelicopter(t){this.is_heli=t,t&&(this.have_tail=!0,this.is_tandem=!1,this.is_swept=!1,this.lifting_area=0,this.engine_count=0,this.hstab_sel=0,this.hstab_count=1,this.vstab_sel=0,this.vstab_count=1)}SetCalculateStats(t){this.CalculateStats=t}PartStats(){const t=this.GetHValidList();t[this.hstab_sel]||(this.hstab_sel=0,t[this.hstab_sel]||(this.hstab_sel=0,this.hstab_count=0));const e=this.GetVValidList();e[this.vstab_sel]||(this.vstab_sel=0,e[this.vstab_sel]||(this.vstab_sel=0,this.vstab_count=0));var s=new D;if(this.hstab_count>0){s=s.Add(this.hstab_list[this.hstab_sel].stats);var i=0;this.is_heli?(i=Math.floor(1e-6+this.wing_drag/8*this.hstab_list[this.hstab_sel].dragfactor),s.drag+=Math.max(Math.ceil(1*this.hstab_list[this.hstab_sel].dragfactor),i)):(i=Math.floor(1e-6+this.wing_drag/4*this.hstab_list[this.hstab_sel].dragfactor),s.drag+=Math.max(1,i))}else(this.hstab_sel<0||0!=this.hstab_list[this.hstab_sel].increment)&&(s.pitchstab-=Math.floor(1e-6+this.lifting_area/2),s.liftbleed+=5);if(this.vstab_count>0?(s=s.Add(this.vstab_list[this.vstab_sel].stats),i=0,this.is_heli?(i=Math.floor(1e-6+this.wing_drag/16*this.vstab_list[this.vstab_sel].dragfactor),s.drag+=Math.max(Math.ceil(1*this.hstab_list[this.hstab_sel].dragfactor),i)):(i=Math.floor(1e-6+this.wing_drag/8*this.vstab_list[this.vstab_sel].dragfactor),s.drag+=Math.max(1,i))):(this.vstab_sel<0||0!=this.vstab_list[this.vstab_sel].increment||0==this.vstab_list[this.vstab_sel].increment&&0==this.hstab_count)&&(s.latstab-=this.lifting_area),s.drag+=2*(Math.max(0,this.hstab_count-1)+Math.max(0,this.vstab_count-1)),this.vstab_sel>=0&&0!=this.vstab_list[this.vstab_sel].increment){var a=Math.max(0,this.hstab_count-1);const t=Math.min(this.engine_count-1,this.vstab_count-1);a+=Math.max(0,this.vstab_count-1-t),s.control+=3*t+a}else{const t=Math.max(0,Math.min(this.engine_count-1,this.hstab_count-1));a=Math.max(0,this.hstab_count-1-t),s.control+=3*t+a}return s}GetElectrics(){return{storage:0,equipment:[]}}}class zt extends wt{constructor(t){super(),this.ext_wood_list=[];for(const e of t.external_wood)this.ext_wood_list.push({name:e.name,tension:e.tension,config:e.config,first:e.first,small_sqp:e.small_sqp,ornith:e.ornith,stats:new D(e)});this.ext_wood_count=[...Array(this.ext_wood_list.length).fill(0)],this.ext_steel_list=[];for(const e of t.external_steel)this.ext_steel_list.push({name:e.name,tension:e.tension,config:e.config,first:e.first,small_sqp:e.small_sqp,ornith:e.ornith,stats:new D(e)});this.ext_steel_count=[...Array(this.ext_steel_list.length).fill(0)],this.ext_cabane_list=[];for(const e of t.cabane)this.ext_cabane_list.push({name:e.name,tension:e.tension,stats:new D(e)});this.cabane_sel=0,this.cant_list=[];for(const e of t.cantilever)this.cant_list.push({name:e.name,limited:e.limited,stats:new D(e)});this.cant_count=[...Array(this.cant_list.length).fill(0)],this.wires=!1,this.wing_blades=!1,this.is_staggered=!1,this.is_tandem=!1,this.is_monoplane=!1,this.can_external=!0,this.acft_structure=0,this.cant_lift=0,this.acft_type=gt.AIRPLANE}toJSON(){return{ext_wood_count:this.ext_wood_count,ext_steel_count:this.ext_steel_count,cant_count:this.cant_count,wires:this.wires,cabane_sel:this.cabane_sel,wing_blades:this.wing_blades}}fromJSON(t,e){this.ext_wood_count=F(t.ext_wood_count,this.ext_wood_count.length),this.ext_steel_count=F(t.ext_steel_count,this.ext_steel_count.length),this.cant_count=F(t.cant_count,this.cant_count.length),this.wires=t.wires,this.cabane_sel=t.cabane_sel,this.wing_blades=e>10.25&&t.wing_blades,e<10.45&&(this.cant_count[0]*=2,this.cant_count[1]*=2,this.cant_count[2]*=3,this.cant_count[3]*=2)}serialize(t){t.PushNumArr(this.ext_wood_count),t.PushNumArr(this.ext_steel_count),t.PushNumArr(this.cant_count),t.PushBool(this.wires),t.PushNum(this.cabane_sel),t.PushBool(this.wing_blades)}deserialize(t){this.ext_wood_count=t.GetNumArr(this.ext_wood_count.length),this.ext_steel_count=t.GetNumArr(this.ext_steel_count.length),this.cant_count=t.GetNumArr(this.cant_count.length),this.wires=t.GetBool(),this.cabane_sel=t.GetNum(),t.version>10.25?this.wing_blades=t.GetBool():this.wing_blades=!1,t.version<10.45&&(this.cant_count[0]*=2,this.cant_count[1]*=2,this.cant_count[2]*=3,this.cant_count[3]*=2)}GetExternalList(){return this.ext_wood_list}GetCantileverList(){return this.cant_list}CanExternalWood(){const t=[...Array(this.ext_wood_list.length).fill(this.can_external)];for(let e=0;e<this.ext_wood_list.length;e++)this.acft_type==gt.ORNITHOPTER_FLUTTER?t[e]=this.ext_wood_list[e].ornith:this.limited_sqp&&(t[e]=this.ext_wood_list[e].small_sqp),this.wires||"Wing Truss"!=this.ext_wood_list[e].name&&"Wire Root"!=this.ext_wood_list[e].name||(t[e]=!1);return t}GetExternalWoodCount(){return this.ext_wood_count}SetExternalWoodCount(t,e){(e!=e||e<0)&&(e=0),e=Math.floor(1e-6+e),this.ext_wood_count[t]=e,this.CalculateStats()}CanExternalSteel(){const t=[...Array(this.ext_steel_list.length).fill(this.can_external)];for(let e=0;e<this.ext_steel_list.length;e++)this.acft_type==gt.ORNITHOPTER_FLUTTER?t[e]=this.ext_steel_list[e].ornith:this.limited_sqp&&(t[e]=this.ext_steel_list[e].small_sqp),this.wires||"Steel Wing Truss"!=this.ext_steel_list[e].name&&"Steel Wire Root"!=this.ext_steel_list[e].name||(t[e]=!1);return t}GetExternalSteelCount(){return this.ext_steel_count}SetExternalSteelCount(t,e){(e!=e||e<0)&&(e=0),e=Math.floor(1e-6+e),this.ext_steel_count[t]=e,this.CalculateStats()}GetCantileverCount(){return this.cant_count}GetTotalCantilevers(){var t=0;for(let e=0;e<this.cant_count.length;e++)t+=this.cant_count[e];return t}GetIsCantilever(){var t=0;for(const e of this.cant_count)t+=e;return t>0}SetCantileverCount(t,e){(e!=e||e<0)&&(e=0),e=Math.floor(1e-6+e),this.ImplSCC(t,e),this.CalculateStats()}ImplSCC(t,e){var s=e-this.cant_count[t];if(this.cant_list[t].limited&&e>0){var i=this.TotalStructure();for(let t=0;t<this.cant_list.length;t++)this.cant_list[t].limited&&(i-=5*this.cant_count[t]*this.cant_list[t].stats.mass);s=Math.min(s,Math.floor(1e-6+i/(5*this.cant_list[t].stats.mass)))}return this.cant_count[t]+=s,0!=s}GetWires(){return this.wires}SetWires(t){this.wires=t,this.CalculateStats()}SetStaggered(t){this.is_staggered=t}SetTandem(t){this.is_tandem=t}SetMonoplane(t){this.is_monoplane=t}SetCanUseExternal(t){this.can_external=t}SetAcftStructure(t){const e=this.acft_structure;this.acft_structure=t;var s=!1;if(e>this.acft_structure)for(let t=this.cant_list.length-1;t>=0;t--)s=s||this.ImplSCC(t,this.cant_count[t]);s&&this.CalculateStats()}TotalStructure(){var t=this.ext_cabane_list[this.cabane_sel].stats.structure,e=!1;for(let s=0;s<this.ext_wood_list.length;s++)t+=this.ext_wood_count[s]*this.ext_wood_list[s].stats.structure,t+=this.ext_steel_count[s]*this.ext_steel_list[s].stats.structure,(this.ext_wood_count[s]>0||this.ext_steel_count[s]>0)&&(e=!0);return e&&(t+=5),this.acft_structure+t}GetCantileverType(){const t=this.cant_count[0]+this.cant_count[4];return this.cant_count[1]+this.cant_count[2]+this.cant_count[3]>0?2:t>0?1:0}GetCabaneList(){return this.ext_cabane_list}GetCabane(){return this.cabane_sel}SetCabane(t){this.cabane_sel=t,this.CalculateStats()}SetCantLift(t){this.cant_lift=t}CanWingBlade(){for(const t of this.ext_wood_count)if(t>0)return!1;for(const t of this.ext_steel_count)if(t>0)return!1;return 0==this.cabane_sel&&this.cant_count[2]>0}GetWingBlade(){return this.wing_blades}SetWingBlade(t){this.wing_blades=t,this.CalculateStats()}SetAircraftType(t){this.acft_type=t,t==gt.HELICOPTER&&(this.can_external=!1,this.is_monoplane=!1,this.is_tandem=!1,this.is_staggered=!1),t==gt.ORNITHOPTER_BUZZER&&(this.can_external=!1);const e=this.CanExternalWood();for(let t=0;t<this.ext_wood_count.length;t++)e[t]||(this.ext_wood_count[t]=0);const s=this.CanExternalSteel();for(let t=0;t<this.ext_steel_count.length;t++)s[t]||(this.ext_steel_count[t]=0)}SetSesquiplane(t){if(this.tension_sqp=t.is&&t.super_small,this.limited_sqp=t.is&&!t.super_small,this.limited_sqp){for(let t=0;t<this.ext_wood_list.length;t++)this.ext_wood_list[t].small_sqp||(this.ext_wood_count[t]=0);for(let t=0;t<this.ext_steel_list.length;t++)this.ext_steel_list[t].small_sqp||(this.ext_steel_count[t]=0)}}SetCalculateStats(t){this.CalculateStats=t}PartStats(){var t=new D;switch(this.acft_type){case gt.AIRPLANE:case gt.AUTOGYRO:case gt.ORNITHOPTER_BASIC:break;case gt.HELICOPTER:case gt.ORNITHOPTER_BUZZER:case gt.ORNITHOPTER_FLUTTER:this.cabane_sel=0}var e=1;if(this.is_monoplane?e=.6:this.is_tandem?e=.8:this.is_staggered&&(e=.9),this.tension_sqp&&(e-=.15),this.acft_type==gt.ORNITHOPTER_BASIC&&(e=.5),!this.can_external){for(let t=0;t<this.ext_wood_count.length;t++)this.ext_wood_count[t]=0;for(let t=0;t<this.ext_steel_count.length;t++)this.ext_steel_count[t]=0;this.cabane_sel=0,this.wires=!1}var s=0,i=0,a=!1;for(let n=0;n<this.ext_wood_list.length;n++)if(i+=this.ext_wood_count[n],this.ext_wood_count[n]>0){a=a||this.ext_wood_list[n].first;let i=this.ext_wood_list[n].stats;i=i.Multiply(this.ext_wood_count[n]),t=t.Add(i),this.ext_wood_list[n].config?s+=e*this.ext_wood_list[n].tension*this.ext_wood_count[n]:s+=this.ext_wood_list[n].tension*this.ext_wood_count[n]}for(let n=0;n<this.ext_steel_list.length;n++)if(i+=this.ext_steel_count[n],this.ext_steel_count[n]>0){a=a||this.ext_wood_list[n].first;let i=this.ext_steel_list[n].stats.Clone();i=i.Multiply(this.ext_steel_count[n]),t=t.Add(i),this.ext_steel_list[n].config?s+=e*this.ext_steel_list[n].tension*this.ext_steel_count[n]:s+=this.ext_steel_list[n].tension*this.ext_steel_count[n]}this.acft_type==gt.ORNITHOPTER_BASIC&&(t.maxstrain=Math.floor(1e-6+.5*t.maxstrain)),a&&(t.structure+=5,t.maxstrain+=10,s+=10);const n=this.ext_cabane_list[this.cabane_sel].stats.Clone();t=t.Add(n),s+=e*this.ext_cabane_list[this.cabane_sel].tension,this.cabane_sel>0&&(i+=1),this.wires&&(t.maxstrain+=Math.floor(1e-6+s),t.drag+=3*i);var r=!1;for(let e=0;e<this.cant_list.length;e++)if(this.cant_count[e]>0){r=!0;let s=this.cant_list[e].stats;s=s.Multiply(this.cant_count[e]),s.maxstrain,t=t.Add(s)}return this.CanWingBlade()?this.wing_blades&&(t.mass*=2,t.warnings.push({source:A("Wing Blades"),warning:A("Wing Blades Warning"),color:q.WHITE})):this.wing_blades=!1,r&&(t.cost+=5,t.liftbleed-=this.cant_lift),t}GetElectrics(){return{storage:0,equipment:[]}}}class Ht extends wt{constructor(t){super(),this.tank_stats=[],this.tank_count=[];for(const e of t.tanks)this.tank_stats.push({name:e.name,stats:new D(e),internal:e.internal,cantilever:e.cantilever}),this.tank_count.push(0);this.self_sealing=!1,this.is_cantilever=!1,this.wing_area=-1}toJSON(){return{tank_count:this.tank_count,self_sealing:this.self_sealing,fire_extinguisher:this.fire_extinguisher}}fromJSON(t,e){this.tank_count=F(t.tank_count,this.tank_count.length),this.self_sealing=t.self_sealing,this.fire_extinguisher=t.fire_extinguisher,this.wing_area=-1}serialize(t){t.PushNumArr(this.tank_count),t.PushBool(this.self_sealing),t.PushBool(this.fire_extinguisher)}deserialize(t){this.tank_count=t.GetNumArr(this.tank_count.length),this.self_sealing=t.GetBool(),this.fire_extinguisher=t.GetBool(),this.wing_area=-1}GetTankList(){return this.tank_stats}GetTankEnabled(){const t=[];for(const e of this.tank_stats)!this.is_cantilever&&e.cantilever?t.push(!1):t.push(!0);return t}GetTankCount(){return this.tank_count}SetTankCount(t,e){(e!=e||e<0)&&(e=0),e=Math.floor(1e-6+e),this.tank_count[t]=e,this.VerifyOK(),this.CalculateStats()}SetCantilever(t){this.is_cantilever&&!t&&(this.is_cantilever=t,this.VerifyOK()&&this.CalculateStats()),this.is_cantilever=t}SetArea(t){this.wing_area>t&&(this.wing_area=t,this.VerifyOK()&&this.CalculateStats()),this.wing_area=t}VerifyOK(){if(-1!=this.wing_area){var t=0;for(let e=0;e<this.tank_count.length;e++)this.tank_stats[e].cantilever&&(t+=this.tank_count[e]);var e=Math.floor(1e-6+this.wing_area/10);this.is_cantilever||(e=0);var s=t-e;const i=s>0;for(;s>0;)for(let t=this.tank_count.length-1;t>=0;t--)if(this.tank_stats[t].cantilever){this.tank_count[t]--,s--;break}for(let t=0;t<this.tank_count.length;t++)0==this.tank_stats[t].stats.wetmass&&(this.tank_count[t]=Math.min(4,this.tank_count[t]));return i}return!1}GetSealingEnabled(){var t=0;for(let e=0;e<this.tank_count.length;e++)this.tank_stats[e].internal&&(t+=this.tank_count[e]);return t>0}GetSelfSealing(){return this.self_sealing}SetSelfSealing(t){this.self_sealing=t,this.CalculateStats()}GetExtinguisher(){return this.fire_extinguisher}SetExtinguisher(t){this.fire_extinguisher=t,this.CalculateStats()}SetCalculateStats(t){this.CalculateStats=t}PartStats(){var t=new D,e=0;for(let s=0;s<this.tank_count.length;s++){let i=this.tank_stats[s].stats.Clone();i=i.Multiply(this.tank_count[s]),t=t.Add(i),this.tank_stats[s].internal&&(e+=this.tank_count[s])}return t.reqsections=Math.ceil(-1e-6+t.reqsections),this.self_sealing&&(t.mass+=e,t.cost+=2*e,t.era.push({name:"Self-Sealing Gas Tank",era:"Roaring 20s"}),t.warnings.push({source:A("Self-Sealing Gas Tank"),warning:A("Self-Sealing Gas Tank Warning"),color:q.WHITE})),this.fire_extinguisher&&(t.mass+=2,t.cost+=3,t.era.push({name:"Remote Fire Extinguisher",era:"WWII"}),t.warnings.push({source:A("Remote Fire Extinguisher"),warning:A("Remote Fire Extinguisher Warning"),color:q.WHITE})),t.wetmass%5>0&&(t.wetmass+=5-t.wetmass%5),t}GetElectrics(){return{storage:0,equipment:[]}}}class jt extends wt{constructor(){super(),this.bomb_count=0,this.rocket_count=0,this.internal_bay_count=0,this.internal_bay_1=!1,this.internal_bay_2=!1}toJSON(){return{bomb_count:this.bomb_count,rocket_count:this.rocket_count,bay_count:this.internal_bay_count,bay1:this.internal_bay_1,bay2:this.internal_bay_2}}fromJSON(t,e){this.bomb_count=t.bomb_count,this.internal_bay_count=t.bay_count,this.internal_bay_1=t.bay1,this.internal_bay_2=t.bay2,e>10.75&&(this.rocket_count=t.rocket_count)}serialize(t){t.PushNum(this.bomb_count),t.PushNum(this.internal_bay_count),t.PushBool(this.internal_bay_1),t.PushBool(this.internal_bay_2),t.PushNum(this.rocket_count)}deserialize(t){this.bomb_count=t.GetNum(),this.internal_bay_count=t.GetNum(),this.internal_bay_1=t.GetBool(),this.internal_bay_2=t.GetBool(),t.version>10.75&&(this.rocket_count=t.GetNum())}GetRocketCount(){return this.rocket_count}GetBombCount(){return this.bomb_count}GetInternalBombCount(){var t=10*this.internal_bay_count;return this.bomb_count>0&&this.internal_bay_count>0&&this.internal_bay_1&&(t*=2,this.internal_bay_2&&(t*=2)),t}GetMaxBombSize(){var t=0;const e=this.GetInternalBombCount();return this.bomb_count>0&&this.internal_bay_count>0&&(t=this.internal_bay_1?this.internal_bay_2?Math.floor(1e-6+e):Math.floor(1e-6+e/2):Math.floor(1e-6+e/4)),t}SetRocketCount(t){(t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.rocket_count=t,this.LimitMass(),this.CalculateStats()}SetBombCount(t){(t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.bomb_count=t,this.LimitMass(),this.CalculateStats()}GetBayCount(){return this.internal_bay_count}GetBay1(){return this.internal_bay_1}GetBay2(){return this.internal_bay_2}SetBayCount(t){(t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),this.internal_bay_count=t,this.CalculateStats()}SetUseBays(t,e){this.internal_bay_1=t,this.internal_bay_2=e,!this.internal_bay_1&&this.internal_bay_2&&(this.internal_bay_1=!0,this.internal_bay_2=!1),this.CalculateStats()}LimitMass(){var t=!1;const e=Math.min(this.GetInternalBombCount(),Math.floor(1e-6+3*this.acft_struct*this.maxbomb));var s,i,a=0,n=0;s=this.bomb_count>e?e:this.bomb_count,i=this.rocket_count+s>e?e-s:this.rocket_count,a=this.bomb_count-s,n=this.rocket_count-i;const r=Math.floor(1e-6+this.acft_struct*this.maxbomb-(s+i)/3)*this.gull_factor;for(;a+n>r;)n>0?n--:a--;let o=Math.max(0,s+a);this.bomb_count>o&&(t=!0,this.bomb_count=o);let l=Math.max(0,i+n);return this.rocket_count>l&&(t=!0,this.rocket_count=l),t}GetExternalMass(){const t=this.bomb_count+this.rocket_count;return Math.max(0,t-this.GetInternalBombCount())}SetAcftParameters(t,e,s){switch(this.acft_struct=t,this.maxbomb=e,s){case 2:case 3:this.gull_factor=1.1;break;case 4:this.gull_factor=1.2;break;default:this.gull_factor=1}this.LimitMass()&&this.CalculateStats()}SetCalculateStats(t){this.CalculateStats=t}PartStats(){const t=new D,e=this.GetExternalMass();if(t.reqsections+=this.internal_bay_count,this.internal_bay_count>0){const e=t.reqsections;this.internal_bay_1&&(t.reqsections+=e,this.internal_bay_2&&(t.reqsections+=e))}const s=Math.ceil(e/5-1e-6);return t.mass+=s,t.drag+=s,t.bomb_mass=this.bomb_count+this.rocket_count,t.reqsections=Math.ceil(-1e-6+t.reqsections),t.bomb_mass%5>0&&(t.bomb_mass+=5-t.bomb_mass%5),t}GetElectrics(){return{storage:0,equipment:[]}}}class Jt extends wt{constructor(t){super(),this.cargo_list=[];for(const e of t.spaces)this.cargo_list.push({name:e.name,stats:new D(e)});this.cargo_sel=0}toJSON(){return{space_sel:this.cargo_sel}}fromJSON(t,e){this.cargo_sel=t.space_sel}serialize(t){t.PushNum(this.cargo_sel)}deserialize(t){this.cargo_sel=t.GetNum()}GetSpaceList(){return this.cargo_list}GetSpace(){return this.cargo_sel}SetSpace(t){this.cargo_sel=t,this.CalculateStats()}SetCalculateStats(t){this.CalculateStats=t}PartStats(){var t=new D;return(t=t.Add(this.cargo_list[this.cargo_sel].stats)).bomb_mass+=3*t.reqsections,t.bomb_mass%5>0&&(t.bomb_mass+=5-t.bomb_mass%5),t}GetElectrics(){return{storage:0,equipment:[]}}}class Vt extends wt{constructor(t){super(),this.gear_list=[],this.gear_sel=0,this.retract=!1;for(const e of t.gear)this.gear_list.push({name:e.name,stats:new D(e),DpLMP:e.DpLMP,SpLMP:e.SpLMP,can_retract:e.can_retract});this.extra_list=[];for(const e of t.extras)this.extra_list.push({name:e.name,stats:new D(e),MpLMP:e.MpLMP});this.extra_sel=[...Array(this.extra_list.length).fill(!1)]}toJSON(){return{gear_sel:this.gear_sel,retract:this.retract,extra_sel:this.extra_sel}}fromJSON(t,e){this.gear_sel=t.gear_sel,this.retract=t.retract,this.extra_sel=O(t.extra_sel,this.extra_sel.length)}serialize(t){t.PushNum(this.gear_sel),t.PushBool(this.retract),t.PushBoolArr(this.extra_sel)}deserialize(t){this.gear_sel=t.GetNum(),this.retract=t.GetBool(),this.extra_sel=t.GetBoolArr(this.extra_sel.length)}IsDefault(){return 0==this.gear_sel&&0==this.retract&&0==this.extra_sel.reduce(((t,e)=>t||e),!1)}GetGearName(){return this.retract&&"Boat Hull"==this.gear_list[this.gear_sel].name?A("Retractable Gear + Boat Hull"):this.retract?A("Retractable ")+A(this.gear_list[this.gear_sel].name):A(this.gear_list[this.gear_sel].name)}GetGearList(){return this.gear_list}CanGear(){const t=[...Array(this.gear_list.length).fill(!0)];for(let e=0;e<this.gear_list.length;e++)"Boat Hull"!=this.gear_list[e].name||this.can_boat||(t[e]=!1);return t}GetGear(){return this.gear_sel}SetGear(t){this.CanGear()[t]&&(this.gear_sel=t),this.CalculateStats()}CanRetract(){return this.gear_list[this.gear_sel].can_retract||"Boat Hull"==this.gear_list[this.gear_sel].name}GetRetract(){return this.retract}SetRetract(t){this.retract=t&&this.CanRetract(),this.CalculateStats()}GetExtraList(){return this.extra_list}GetExtraSelected(){return this.extra_sel}SetExtraSelected(t,e){this.extra_sel[t]=e,this.CalculateStats()}SetLoadedMass(t){this.loadedMass=t}CanBoat(t,e){this.can_boat=2==t||1==t&&e>=2||0==t&&e>=3}SetGull(t){this.gull_deck=t}SetCalculateStats(t){this.CalculateStats=t}IsVital(){return!0}PartStats(){var t=new D;this.CanGear()[this.gear_sel]||(this.gear_sel=0),this.CanRetract()||(this.retract=!1);var e=this.loadedMass;for(let s=0;s<this.extra_list.length;s++)this.extra_sel[s]&&(t=t.Add(this.extra_list[s].stats),e+=this.extra_list[s].stats.mass,t.mass+=Math.floor(1e-6+this.extra_list[s].MpLMP*Math.floor(1e-6+e/5)));t=t.Add(this.gear_list[this.gear_sel].stats);var s=this.gear_list[this.gear_sel].DpLMP*Math.floor(1e-6+e/5);if("Boat Hull"==this.gear_list[this.gear_sel].name&&this.retract&&(t.drag+=s,s=this.gear_list[0].DpLMP*Math.floor(1e-6+e/5)),"Boat Hull"!=this.gear_list[this.gear_sel].name||this.retract)switch(this.gull_deck){case 1:s-=Math.floor(1e-6+.1*s);break;case 2:case 3:s-=Math.floor(1e-6+.15*s);break;case 4:s-=Math.floor(1e-6+.25*s)}return this.retract?(t.mass+=Math.floor(1e-6+s/2),t.cost+=Math.floor(1e-6+s/2)):t.drag+=s,t.structure+=this.gear_list[this.gear_sel].SpLMP*Math.floor(1e-6+e/5),t.Round(),t}GetElectrics(){return{storage:0,equipment:[]}}}class Yt extends wt{constructor(t){super(),this.armour_coverage=[...Array(8).fill(0)],this.acft_rad=!1,this.skin_armour=0,this.vital_parts=99,this.electric_list=[];for(const e of t.electrical)this.electric_list.push({name:e.name,stats:new D(e),cp10s:e.cp10s,storage:e.storage});this.electrical_count=[...Array(this.electric_list.length).fill(0)],this.radio_list=[],this.radio_sel=0;for(const e of t.radios)this.radio_list.push({name:e.name,stats:new D(e)});this.recon_list=[];for(const e of t.recon)this.recon_list.push({name:e.name,stats:new D(e)});this.recon_sel=Array(this.recon_list.length).fill(0),this.visi_list=[];for(const e of t.visibility)this.visi_list.push({name:e.name,stats:new D(e)});this.visi_sel=[...Array(this.visi_list.length).fill(!1)],this.can_visi=[...Array(this.visi_list.length).fill(!0)],this.clim_list=[];for(const e of t.climate)this.clim_list.push({name:e.name,stats:new D(e),req_radiator:e.req_radiator});this.clim_sel=[...Array(this.clim_list.length).fill(!1)],this.auto_list=[],this.auto_sel=0;for(const e of t.autopilots)this.auto_list.push({name:e.name,stats:new D(e)});this.cont_list=[],this.cont_sel=0;for(const e of t.control)this.cont_list.push({name:e.name,max_mass_stress:e.max_mass_stress,max_total_stress:e.max_total_stress,stats:new D(e)})}toJSON(){return{v:2,armour_coverage:this.armour_coverage,electrical_count:this.electrical_count,radio_sel:this.radio_sel,recon_sel:this.recon_sel,visi_sel:this.visi_sel,clim_sel:this.clim_sel,auto_sel:this.auto_sel,cont_sel:this.cont_sel}}fromJSON(t,e){if(this.vital_parts=99,2==t.v&&(this.armour_coverage=t.armour_coverage),this.skin_armour=0,e<11.85?(this.electrical_count=F(t.electrical_count,this.electrical_count.length+1),this.electrical_count[0]+=this.electrical_count[1],this.electrical_count.splice(1,1)):this.electrical_count=F(t.electrical_count,this.electrical_count.length),this.radio_sel=t.radio_sel,e<12.05){const e=O(t.info_sel,2);this.recon_sel=Array(this.recon_list.length).fill(0),e[0]&&(this.recon_sel[1]=1),e[1]&&(this.recon_sel[0]=1)}else this.recon_sel=F(t.recon_sel,this.recon_sel.length);this.visi_sel=O(t.visi_sel,this.visi_sel.length),this.clim_sel=O(t.clim_sel,this.clim_sel.length),e<11.95&&this.clim_sel.splice(2,1),this.auto_sel=t.auto_sel,this.cont_sel=t.cont_sel}serialize(t){t.PushNumArr(this.armour_coverage),t.PushNumArr(this.electrical_count),t.PushNum(this.radio_sel),t.PushNumArr(this.recon_sel),t.PushBoolArr(this.visi_sel),t.PushBoolArr(this.clim_sel),t.PushNum(this.auto_sel),t.PushNum(this.cont_sel)}deserialize(t){if(this.vital_parts=99,this.armour_coverage=t.GetNumArr(this.armour_coverage.length),this.skin_armour=0,t.version<11.85?(this.electrical_count=t.GetNumArr(this.electrical_count.length+1),this.electrical_count[0]+=this.electrical_count[1],this.electrical_count.splice(1,1)):this.electrical_count=t.GetNumArr(this.electrical_count.length),this.radio_sel=t.GetNum(),t.version<12.05){const e=t.GetBoolArr(2);this.recon_sel=Array(this.recon_list.length).fill(0),e[0]&&(this.recon_sel[1]=1),e[1]&&(this.recon_sel[0]=1)}else this.recon_sel=t.GetNumArr(this.recon_sel.length);this.visi_sel=t.GetBoolArr(this.visi_sel.length),this.clim_sel=t.GetBoolArr(this.clim_sel.length),t.version<11.95&&this.clim_sel.splice(2,1),this.auto_sel=t.GetNum(),this.cont_sel=t.GetNum()}GetCommunicationName(){return A(this.radio_list[this.radio_sel].name)}GetArmourCoverageForDisplay(){var t=[];for(let e=0;e<this.armour_coverage.length;e++)t.push(this.armour_coverage[e]);return t[1]+=this.skin_armour,t}GetEffectiveCoverage(){const t=[],e=Math.max(0,Math.floor((this.vital_parts-8)/2));for(let e=0;e<this.armour_coverage.length;e++)t.push(Math.max(0,this.armour_coverage[e]));t[1]+=this.skin_armour;let s=0;for(let i=this.armour_coverage.length-1;i>=0;i--)s+=t[i],t[i]=s-e;return t}SetArmourCoverage(t,e){(e!=e||e<0)&&(e=0),e=Math.floor(1e-6+e),this.armour_coverage[t]=1!=t?e:e-this.skin_armour,this.NormalizeCoverage(),this.CalculateStats()}NormalizeCoverage(){var t=-8+Math.min(0,-Math.floor(1e-6+(this.vital_parts-8)/2));t+=this.skin_armour;for(let e=this.armour_coverage.length-1;e>=0;e--)this.armour_coverage[e]=Math.max(0,Math.min(Math.abs(t),this.armour_coverage[e])),t+=this.armour_coverage[e]}GetElectricalList(){return this.electric_list}GetElectricalCount(){return this.electrical_count}SetElectricalCount(t,e){(e!=e||e<0)&&(e=0),e=Math.floor(1e-6+e),e=Math.min(e,50),this.electrical_count[t]=e,this.CalculateStats()}GetRadioList(){return this.radio_list}GetRadioSel(){return this.radio_sel}SetRadioSel(t){this.radio_sel=t,this.CalculateStats()}GetReconList(){return this.recon_list}GetReconSel(){return this.recon_sel}SetReconSel(t,e){((e=Math.trunc(e))!=e||e<0)&&(e=0),this.recon_sel[t]=e,this.CalculateStats()}GetVisibilityList(){return this.visi_list}GetCanVisibility(){return this.can_visi}GetVisibilitySel(){return this.visi_sel}SetVisibilitySel(t,e){this.visi_sel[t]=e,this.CalculateStats()}GetClimateList(){return this.clim_list}GetClimateSel(){return this.clim_sel}GetClimateEnable(){const t=[];for(const e of this.clim_list)!this.acft_rad&&e.req_radiator?t.push(!1):t.push(!0);return t}SetClimateSel(t,e){this.clim_sel[t]=e,this.CalculateStats()}GetAutopilotList(){return this.auto_list}GetAutopilotSel(){return this.auto_sel}SetAutopilotSel(t){this.auto_sel=t,this.CalculateStats()}GetControlList(){return this.cont_list}GetControlSel(){return this.cont_sel}SetControlSel(t){this.cont_sel=t,this.CalculateStats()}SetAcftRadiator(t){this.acft_rad=t}IsElectrics(){for(const t of this.electrical_count)if(t>0)return!0;for(let t=0;t<this.clim_list.length;t++)if(this.clim_sel[t]&&0!=this.clim_list[t].stats.charge)return!0;for(let t=0;t<this.visi_list.length;t++)if(this.visi_sel[t]&&0!=this.visi_list[t].stats.charge)return!0;return 0!=this.radio_list[this.radio_sel].stats.charge||0!=this.auto_list[this.auto_sel].stats.charge}SetSkinArmor(t){this.skin_armour=t,this.NormalizeCoverage()}SetVitalParts(t){let e=this.vital_parts;this.vital_parts=t,this.NormalizeCoverage(),e!=this.vital_parts&&this.CalculateStats()}GetMaxMassStress(){return this.cont_list[this.cont_sel].max_mass_stress}GetMaxTotalStress(){return this.cont_list[this.cont_sel].max_total_stress}SetCalculateStats(t){this.CalculateStats=t}GetStorage(){return 5*this.electrical_count[2]+5*this.electrical_count[3]}GetWindmill(){var t=0;for(let e=0;e<this.electrical_count.length;e++)t+=this.electric_list[e].cp10s*this.electrical_count[e];return t}SetCanCutouts(t,e){for(let s=0;s<this.visi_list.length;s++){let i=!0;switch(this.visi_list[s].name){case"Wing Cutouts":i=t;break;case"Hull Cutouts":i=e}this.can_visi[s]=i,i||(this.visi_sel[s]=!1)}}PartStats(){var t=new D,e="";const s=this.GetEffectiveCoverage();for(let a=0;a<this.armour_coverage.length;a++){const n=a+1;var i=this.armour_coverage[a];t.mass+=i*Math.pow(2,n-1),t.cost+=Math.floor(1e-6+i*n/3),t.toughness+=this.armour_coverage[a]*n,s[a]>0&&(""!=e&&(e+=", "),e+=n.toString()+"/"+(11-s[a]).toString()+"+")}""!=e&&t.warnings.push({source:A("Armour"),warning:e,color:q.WHITE});for(let e=0;e<this.electrical_count.length;e++)if(this.electrical_count[e]>0){let s=this.electric_list[e].stats.Clone();s=s.Multiply(this.electrical_count[e]),t=t.Add(s)}t=t.Add(this.radio_list[this.radio_sel].stats);for(let e=0;e<this.recon_list.length;e++)if(this.recon_sel[e]>0){let s=this.recon_list[e].stats.Clone();s=s.Multiply(this.recon_sel[e]),t=t.Add(s)}for(let e=0;e<this.visi_list.length;e++)this.visi_sel[e]&&(t=t.Add(this.visi_list[e].stats));for(let e=0;e<this.clim_list.length;e++)!this.clim_sel[e]||this.clim_list[e].req_radiator&&!this.acft_rad||(t=t.Add(this.clim_list[e].stats));return(t=(t=t.Add(this.auto_list[this.auto_sel].stats)).Add(this.cont_list[this.cont_sel].stats)).Round(),t}GetElectrics(){var t=0,e=[];for(let s=0;s<this.electric_list.length;s++){const i=this.electric_list[s],a=this.electrical_count[s];a>0&&(t+=i.storage*a,i.cp10s>0?e.push({source:A(i.name),charge:R.Format("{0}"+A("Derived Per 10 Speed"),Math.floor(1e-6+a*i.cp10s))}):0!=i.stats.charge&&e.push({source:A(i.name),charge:(a*i.stats.charge).toString()}))}const s=this.radio_list[this.radio_sel];e=this.FormatEquipment(e,s.name,s.stats.charge);for(let t=0;t<this.clim_list.length;t++)if(this.clim_sel[t]){const s=this.clim_list[t];e=this.FormatEquipment(e,s.name,s.stats.charge)}for(let t=0;t<this.recon_list.length;t++){const s=this.recon_list[t],i=this.recon_sel[t];i>0&&(e=this.FormatEquipment(e,s.name,i*s.stats.charge))}for(let t=0;t<this.visi_list.length;t++)if(this.visi_sel[t]){const s=this.visi_list[t];e=this.FormatEquipment(e,s.name,s.stats.charge)}const i=this.auto_list[this.auto_sel];e=this.FormatEquipment(e,i.name,i.stats.charge);const a=this.cont_list[this.cont_sel];return{storage:t,equipment:e=this.FormatEquipment(e,a.name,a.stats.charge)}}}class Xt extends wt{constructor(){super(),this.free_dots=0,this.cost=0,this.bleed=0,this.escape=0,this.mass=0,this.toughness=0,this.maxstrain=0,this.reliability=0,this.drag=0,this.acft_stats=new D}toJSON(){return{free_dots:this.free_dots,cost:this.cost,bleed:this.bleed,escape:this.escape,mass:this.mass,toughness:this.toughness,maxstrain:this.maxstrain,reliability:this.reliability,drag:this.drag}}fromJSON(t,e){this.free_dots=t.free_dots,this.cost=t.cost,this.bleed=t.bleed,this.escape=t.escape,this.mass=t.mass,this.toughness=t.toughness,this.maxstrain=t.maxstrain,this.reliability=t.reliability,this.drag=t.drag}serialize(t){t.PushNum(this.free_dots),t.PushNum(this.cost),t.PushNum(this.bleed),t.PushNum(this.escape),t.PushNum(this.mass),t.PushNum(this.toughness),t.PushNum(this.maxstrain),t.PushNum(this.reliability),t.PushNum(this.drag)}deserialize(t){this.free_dots=t.GetNum(),this.cost=t.GetNum(),this.bleed=t.GetNum(),this.escape=t.GetNum(),this.mass=t.GetNum(),this.toughness=t.GetNum(),this.maxstrain=t.GetNum(),this.reliability=t.GetNum(),this.drag=t.GetNum()}IsDefault(){return 0==this.free_dots&&0==this.cost&&0==this.bleed&&0==this.escape&&0==this.mass&&0==this.toughness&&0==this.maxstrain&&0==this.reliability&&0==this.drag}GetUnassignedCount(){return this.free_dots-this.cost-this.bleed-this.escape-this.mass-this.toughness-this.maxstrain-this.reliability-this.drag}ReduceDots(){var t=-this.GetUnassignedCount();if(t>0){let e=Math.min(t,this.drag);e=Math.max(e,0),this.drag-=e,t-=e,e=Math.min(t,this.reliability),e=Math.max(e,0),this.reliability-=e,t-=e,e=Math.min(t,this.maxstrain),e=Math.max(e,0),this.maxstrain-=e,t-=e,e=Math.min(t,this.toughness),e=Math.max(e,0),this.toughness-=e,t-=e,e=Math.min(t,this.mass),e=Math.max(e,0),this.mass-=e,t-=e,e=Math.min(t,this.escape),e=Math.max(e,0),this.escape-=e,t-=e,e=Math.min(t,this.bleed),e=Math.max(e,0),this.bleed-=e,t-=e,e=Math.min(t,this.cost),e=Math.max(e,0),this.cost-=e,t-=e}}GetFreeDots(){return this.free_dots}SetFreeDots(t){(t!=t||t<0)&&(t=0),t=Math.floor(1e-6+t),t=Math.max(t,0),this.free_dots=t,this.ReduceDots(),this.CalculateStats()}GetCost(){return this.cost}SetCost(t){t!=t&&(t=0),t=Math.floor(1e-6+t),t=Math.max(t,-3),t=Math.min(t,3),this.cost=t,this.ReduceDots(),this.CalculateStats()}GetBleed(){return this.bleed}SetBleed(t){t!=t&&(t=0),t=Math.floor(1e-6+t),t=Math.max(t,-3),t=Math.min(t,3),this.bleed=t,this.ReduceDots(),this.CalculateStats()}GetEscape(){return this.escape}SetEscape(t){t!=t&&(t=0),t=Math.floor(1e-6+t),t=Math.max(t,-3),t=Math.min(t,3),this.escape=t,this.ReduceDots(),this.CalculateStats()}GetMass(){return this.mass}SetMass(t){t!=t&&(t=0),t=Math.floor(1e-6+t),t=Math.max(t,-3),t=Math.min(t,3),this.mass=t,this.ReduceDots(),this.CalculateStats()}GetToughness(){return this.toughness}SetToughness(t){t!=t&&(t=0),t=Math.floor(1e-6+t),t=Math.max(t,-3),t=Math.min(t,3),this.toughness=t,this.ReduceDots(),this.CalculateStats()}GetMaxStrain(){return this.maxstrain}SetMaxStrain(t){t!=t&&(t=0),t=Math.floor(1e-6+t),t=Math.max(t,-3),t=Math.min(t,3),this.maxstrain=t,this.ReduceDots(),this.CalculateStats()}GetReliabiilty(){return this.reliability}SetReliability(t){t!=t&&(t=0),t=Math.floor(1e-6+t),t=Math.max(t,-3),t=Math.min(t,3),this.reliability=t,this.ReduceDots(),this.CalculateStats()}GetDrag(){return this.drag}SetDrag(t){t!=t&&(t=0),t=Math.floor(1e-6+t),t=Math.max(t,-3),t=Math.min(t,3),this.drag=t,this.ReduceDots(),this.CalculateStats()}SetAcftStats(t){this.acft_stats=t}SetCalculateStats(t){this.CalculateStats=t}PartStats(){const t=new D;return t.cost=Math.floor(1e-6+-this.cost*this.acft_stats.cost/10),t.liftbleed=Math.floor(1e-6+3*-this.bleed),t.escape=this.escape,t.visibility=this.escape,t.mass=Math.floor(1e-6+-this.mass*this.acft_stats.mass/10),t.toughness=Math.floor(1e-6+this.toughness*this.acft_stats.toughness/4),t.reliability=2*this.reliability,t.drag=Math.floor(1e-6+-this.drag*this.acft_stats.drag/10),t}GetElectrics(){return{storage:0,equipment:[]}}}class Qt extends wt{constructor(t,e){super(),this.weapon_list=t,this.wl_permute=e,this.directions=[...Array(6).fill(!1)],this.directions[0]=!0,this.fixed=!0,this.ammo=1,this.weapon_type=0,this.raw_weapon_type=0,this.weapons=[],this.action_sel=bt.STANDARD,this.projectile_sel=yt.BULLETS,this.has_propeller=!0,this.sticky_guns=0,this.repeating=!1,this.seat=0,this.final_weapon={name:"",abrv:"",era:"",size:0,stats:new D,damage:0,hits:0,ammo:0,ap:0,jam:"",reload:0,rapid:!1,synched:!1,shells:!1,can_action:!1,can_projectile:!1,deflection:0},this.MakeFinalWeapon(),this.SWC(1)}toJSON(){const t=[];for(const e of this.weapons)t.push(e.toJSON());return{weapon_type:this.raw_weapon_type,fixed:this.fixed,directions:this.directions,weapons:t,ammo:this.ammo,action:this.action_sel,projectile:this.projectile_sel,repeating:this.repeating,seat:this.seat}}fromJSON(t,e){this.raw_weapon_type=t.weapon_type,this.weapon_type=this.wl_permute[this.raw_weapon_type],this.fixed=t.fixed,this.directions=O(t.directions,this.directions.length),this.weapons=[],this.ammo=t.ammo,null==this.ammo&&(this.ammo=1),e<10.25?(this.action_sel=bt.STANDARD,this.projectile_sel=yt.BULLETS):(this.action_sel=t.action,this.projectile_sel=t.projectile),e<11.75&&(this.projectile_sel==yt.PNEUMATIC?this.projectile_sel=yt.BULLETS:this.projectile_sel==yt.ENUM_MAX&&(this.projectile_sel=yt.PNEUMATIC)),this.MakeFinalWeapon();for(const s of t.weapons){const t=new Gt(this.final_weapon,this.action_sel,this.projectile_sel,this.fixed);t.SetCalculateStats(this.CalculateStats),t.fromJSON(s,e),this.weapons.push(t)}if(e<10.95){this.repeating=!1;for(const t of this.weapons)this.repeating=this.repeating||t.GetRepeating()}else this.repeating=t.repeating;this.seat=e>11.65?t.seat:0,this.MakeFinalWeapon();for(const t of this.weapons)t.SetWeaponType(this.final_weapon,this.action_sel,this.projectile_sel)}serialize(t){t.PushNum(this.raw_weapon_type),t.PushBool(this.fixed),t.PushBoolArr(this.directions),t.PushNum(this.ammo),t.PushNum(this.weapons.length);for(const e of this.weapons)e.serialize(t);t.PushNum(this.action_sel),t.PushNum(this.projectile_sel),t.PushBool(this.repeating),t.PushNum(this.seat)}deserialize(t){this.raw_weapon_type=t.GetNum(),this.weapon_type=this.wl_permute[this.raw_weapon_type],this.fixed=t.GetBool(),this.directions=t.GetBoolArr(this.directions.length),this.ammo=t.GetNum();const e=t.GetNum();this.weapons=[],this.MakeFinalWeapon();for(let s=0;s<e;s++){const e=new Gt(this.final_weapon,this.action_sel,this.projectile_sel,this.fixed);e.SetCalculateStats(this.CalculateStats),e.deserialize(t),this.weapons.push(e)}if(t.version<10.25?(this.action_sel=bt.STANDARD,this.projectile_sel=yt.BULLETS):(this.action_sel=t.GetNum(),this.projectile_sel=t.GetNum()),t.version<11.75&&(this.projectile_sel==yt.PNEUMATIC?this.projectile_sel=yt.BULLETS:this.projectile_sel==yt.ENUM_MAX&&(this.projectile_sel=yt.PNEUMATIC)),t.version<10.95){this.repeating=!1;for(const t of this.weapons)this.repeating=this.repeating||t.GetRepeating()}else this.repeating=t.GetBool();t.version>11.65?this.seat=t.GetNum():this.seat=0,this.MakeFinalWeapon();for(const t of this.weapons)t.SetWeaponType(this.final_weapon,this.action_sel,this.projectile_sel)}GetWeaponSelected(){return this.weapon_type}MakeFinalWeapon(){const t=this.weapon_type;if(this.final_weapon.can_action=this.weapon_list[t].can_action,this.final_weapon.can_projectile=this.weapon_list[t].can_projectile,this.final_weapon.ammo=this.weapon_list[t].ammo,this.final_weapon.ap=this.weapon_list[t].ap,this.final_weapon.damage=this.weapon_list[t].damage,this.final_weapon.era=this.weapon_list[t].era,this.final_weapon.name=this.weapon_list[t].name,this.final_weapon.abrv=this.weapon_list[t].abrv,this.final_weapon.reload=this.weapon_list[t].reload,this.final_weapon.shells=this.weapon_list[t].shells,this.final_weapon.size=this.weapon_list[t].size,this.final_weapon.stats=this.weapon_list[t].stats.Clone(),this.final_weapon.deflection=this.weapon_list[t].deflection,this.final_weapon.jam=this.weapon_list[t].jam,this.final_weapon.stats.era=[],this.final_weapon.stats.era.push({name:this.weapon_list[t].name,era:this.weapon_list[t].era}),0==this.weapon_list[t].hits&&(this.action_sel==bt.MECHANICAL&&(this.action_sel=bt.STANDARD),this.projectile_sel!=yt.GYROJETS&&this.projectile_sel!=yt.HEATRAY||(this.projectile_sel=yt.BULLETS)),this.action_sel==bt.STANDARD)this.final_weapon.hits=this.weapon_list[t].hits,this.final_weapon.rapid=this.weapon_list[t].rapid,this.final_weapon.synched=this.weapon_list[t].synched;else if(this.action_sel==bt.MECHANICAL)this.final_weapon.hits=this.weapon_list[t].hits,this.final_weapon.stats.warnings.push({source:A("Mechanical Action"),warning:A("Mechanical Action Warning"),color:q.WHITE}),this.final_weapon.jam="0/0",this.final_weapon.rapid=!0,this.final_weapon.stats.cost+=this.weapon_list[t].stats.cost,this.final_weapon.synched=!0,this.final_weapon.stats.era.push({name:A("Mechanical Action"),era:A("WWI")});else if(this.action_sel==bt.GAST)this.final_weapon.hits=2*this.weapon_list[t].hits,this.final_weapon.ammo=this.weapon_list[t].ammo/2,this.final_weapon.rapid=this.weapon_list[t].rapid,this.final_weapon.stats.cost+=this.weapon_list[t].stats.cost,this.final_weapon.synched=!1,this.final_weapon.stats.era.push({name:A("Gast Principle"),era:A("WWI")});else if(this.action_sel==bt.ROTARY){this.final_weapon.stats.mass+=this.weapon_list[t].stats.mass,this.final_weapon.stats.cost+=this.weapon_list[t].stats.cost,this.final_weapon.size+=this.weapon_list[t].size,this.final_weapon.size=Math.min(16,this.final_weapon.size),this.final_weapon.hits=3*this.weapon_list[t].hits,this.final_weapon.deflection-=1,this.final_weapon.synched=!1;const e=this.final_weapon.jam.split("/");e[0]="9999",e[1]=(parseInt(e[1])+1).toString(),this.final_weapon.jam=e.join("/"),this.final_weapon.stats.era.push({name:A("Rotary_Gun"),era:A("WWI")})}if(this.repeating&&0!=this.final_weapon.reload&&(this.final_weapon.reload=0,this.final_weapon.stats.cost+=Math.max(1,Math.floor(1e-6+.5*this.weapon_list[t].stats.cost))),this.action_sel!=bt.GAST&&this.action_sel!=bt.MECHANICAL||this.projectile_sel!=yt.HEATRAY||(this.projectile_sel=yt.BULLETS),this.action_sel!=bt.GAST&&this.action_sel!=bt.ROTARY&&this.action_sel!=bt.MECHANICAL||this.projectile_sel!=yt.PNEUMATIC||(this.projectile_sel=yt.BULLETS),this.projectile_sel==yt.HEATRAY)this.final_weapon.stats.cost+=this.weapon_list[t].stats.cost,this.final_weapon.shells=!1,this.final_weapon.ammo=0,this.final_weapon.deflection=0,this.final_weapon.ap=Math.max(0,this.final_weapon.ap-1),this.final_weapon.stats.warnings.push({source:A("Heat Ray"),warning:A("Heat Ray Warning"),color:q.WHITE}),this.final_weapon.stats.era.push({name:A("Heat Ray"),era:A("Himmilgard")});else if(this.projectile_sel==yt.GYROJETS)this.final_weapon.stats.cost+=Math.max(1,Math.floor(1e-6+.5*this.weapon_list[t].stats.cost)),this.final_weapon.shells=!1,this.final_weapon.damage-=1,this.final_weapon.stats.warnings.push({source:A("Gyrojets"),warning:A("Gyrojets Warning"),color:q.WHITE}),this.final_weapon.stats.era.push({name:A("Gyrojets"),era:A("Roaring 20s")});else if(this.projectile_sel==yt.PNEUMATIC){if(this.final_weapon.ammo*=2,this.final_weapon.shells=!1,this.final_weapon.rapid){const t=this.final_weapon.jam.split("/");t[1]="9999",this.final_weapon.jam=t.join("/"),this.final_weapon.stats.warnings.push({source:A("Pneumatic"),warning:A("Pneumatic Warning 1"),color:q.WHITE}),this.final_weapon.stats.era.push({name:A("Pneumatic"),era:A("Pioneer")})}this.final_weapon.hits>0&&this.final_weapon.stats.warnings.push({source:A("Pneumatic"),warning:A("Pneumatic Warning 2"),color:q.WHITE})}0!=this.final_weapon.deflection&&this.final_weapon.stats.warnings.push({source:A(this.final_weapon.name),warning:A("Deflection Warning",this.final_weapon.deflection),color:q.WHITE})}SetWeaponSelected(t){const e=this.IsLightningArc();if(this.weapon_type=t,this.raw_weapon_type=this.wl_permute.findIndex((e=>e==t)),16==this.weapon_list[t].size)for(;this.weapons.length>1;)this.weapons.pop();this.weapon_list[t].can_action&&this.GetCanAction()[this.action_sel]||(this.action_sel=bt.STANDARD),this.weapon_list[t].can_projectile&&this.GetCanProjectile()[this.projectile_sel]||(this.projectile_sel=yt.BULLETS),this.weapon_list[t].rapid?this.repeating=!1:this.repeating||this.action_sel!=bt.GAST||(this.action_sel=bt.STANDARD),this.CanRepeating()||(this.repeating=!1),this.MakeFinalWeapon();for(const t of this.weapons)t.SetWeaponType(this.final_weapon,this.action_sel,this.projectile_sel);if(this.IsLightningArc()){this.SetFixed(!0),this.directions[0]=!0;for(let t=1;t<this.directions.length;t++)this.directions[t]=!1}e&&!this.IsLightningArc()&&this.weapons[0].SetSynchronization(ft.NONE),this.SetMountingCount(this.weapons.length)}CanRepeating(){return(!this.weapon_list[this.weapon_type].rapid||this.weapon_list[this.weapon_type].reload>0)&&this.weapon_list[this.weapon_type].ammo>0&&"Precision Rifle"!=this.weapon_list[this.weapon_type].name}GetRepeating(){return this.repeating}SetRepeating(t){t&&this.CanRepeating()?this.repeating=!0:(this.repeating=!1,this.weapon_list[this.weapon_type].rapid||this.action_sel!=bt.GAST||(this.action_sel=bt.STANDARD)),this.MakeFinalWeapon();for(const t of this.weapons)t.SetWeaponType(this.final_weapon,this.action_sel,this.projectile_sel);this.CalculateStats()}GetFixed(){return this.fixed}SetFixed(t){if(this.IsLightningArc()&&(t=!0),this.fixed!=t){this.fixed=t;for(const t of this.weapons)t.SetFixed(this.fixed);if(t){let t=!1;for(let e=0;e<this.directions.length;e++)this.directions[e]&&t?this.directions[e]=!1:this.directions[e]&&(t=!0)}}this.CalculateStats()}CanDirection(){if(this.IsLightningArc())return[...Array(this.directions.length).fill(!1)];const t=[...Array(this.directions.length).fill(!0)];return this.weapons[0].GetArty()&&this.fixed&&!this.weapons[0].GetWing()&&this.heli&&(t[2]=!1),t}GetDirection(){return this.directions}SetDirection(t,e){this.fixed&&this.directions[t]&&!e&&(e=!0),this.fixed&&(this.directions=[...Array(6).fill(!1)],this.weapons[0].GetArty()&&!this.weapons[0].GetWing()&&2==t&&this.heli&&(t=3)),this.directions[t]=e,this.CalculateStats()}GetMountingCount(){return this.weapons.length}GetWeaponCount(){let t=0;for(const e of this.weapons)t+=e.GetCount();return t}SWC(t){for((t!=t||t<1)&&(t=1),t=Math.floor(1e-6+t);t>this.weapons.length;){const t=new Gt(this.final_weapon,this.action_sel,this.projectile_sel,this.fixed);t.SetCalculateStats(this.CalculateStats),this.weapons.push(t)}for(;t<this.weapons.length;)this.weapons.pop()}SetMountingCount(t){16!=this.final_weapon.size&&"Precision Rifle"!=this.final_weapon.name||(t=1),this.SWC(t),this.CalculateStats()}GetWeapons(){return this.weapons}SetCanFreelyAccessible(t){for(const e of this.weapons)e.GetWing()?e.can_free_accessible=!1:e.can_free_accessible=t}SetTractorPusher(t,e,s,i,a,n,r){if(this.tractor=t,this.pusher=i,this.heli=r,this.spinner_t=s,this.spinner_p=n,this.directions[0]&&t)for(const t of this.weapons)t.GetFixed()&&!t.GetWing()?(t.can_synchronize=!0,t.can_spinner=e||t.GetSynchronization()==ft.SPINNER,t.can_arty_spinner=s||t.GetSynchronization()==ft.SPINNER):t.GetFixed()||t.GetWing()?(t.can_synchronize=!1,t.can_spinner=!1,t.can_arty_spinner=!1):(t.can_synchronize=!0,t.can_spinner=!1,t.can_arty_spinner=!1);else if(this.directions[1]&&i)for(const t of this.weapons)t.GetFixed()&&!t.GetWing()?(t.can_synchronize=!0,t.can_spinner=a||t.GetSynchronization()==ft.SPINNER,t.can_arty_spinner=n||t.GetSynchronization()==ft.SPINNER):t.GetFixed()||t.GetWing()?(t.can_synchronize=!1,t.can_spinner=!1,t.can_arty_spinner=!1):(t.can_synchronize=!0,t.can_spinner=!1,t.can_arty_spinner=!1);else if(this.directions[2]&&this.heli)for(const t of this.weapons)t.can_synchronize=!0,t.can_spinner=!1,t.can_arty_spinner=!1;else for(const t of this.weapons)t.can_synchronize=!1,t.can_spinner=!1,t.can_arty_spinner=!1}GetHits(){const t=this.final_weapon.hits;if(0!=t){let e=0,s=0;for(const i of this.weapons)i.GetWing()&&(i.GetFixed()||this.GetDirectionCount()<=2)?s+=i.GetCount()*t:e+=i.GetCount()*t;return[e+s,Math.floor(1e-6+.75*e)+Math.floor(1e-6+.9*s),Math.floor(1e-6+.5*e)+Math.floor(1e-6+.2*s),Math.floor(1e-6+.25*e)+Math.floor(1e-6+.1*s)]}if(this.IsLightningArc())return[0,0,0,0];if(0==this.final_weapon.ammo){let t=0;for(const e of this.weapons)t+=e.GetCount();return[3*t,0,0,0]}{let t=0;for(const e of this.weapons)t+=e.GetCount();return this.action_sel==bt.GAST&&(t*=2),[3*t,2*t,1*t,0]}}GetDamage(){return this.final_weapon.damage}GetAmmo(){return this.ammo}GetJam(){if(this.final_weapon.rapid){let t=[0,0];for(const e of this.weapons){const s=e.GetJam();t[0]=Math.max(t[0],s[0]+this.sticky_guns),t[1]=Math.max(t[1],s[1]+this.sticky_guns)}return t[0].toString()+"/"+t[1].toString()}{let t=0;for(const e of this.weapons)t=Math.max(t,e.GetJam()+this.sticky_guns);return t.toString()}}IsPlural(){return this.weapons.length>1||this.weapons[0].GetCount()>1}SetAmmo(t){(t!=t||t<1)&&(t=1),t=Math.floor(1e-6+t),this.ammo=t,this.CalculateStats()}SetHavePropeller(t){this.has_propeller&&!t&&this.action_sel==bt.MECHANICAL&&(this.has_propeller=t,this.SetAction(bt.STANDARD)),this.has_propeller=t}SetCanWing(t){for(const e of this.weapons)e.SetCanWing(t)}GetAction(){return this.action_sel}GetCanAction(){return[!0,this.has_propeller&&this.weapon_list[this.weapon_type].can_action&&this.weapon_list[this.weapon_type].hits>0&&(this.repeating||this.weapon_list[this.weapon_type].rapid),this.weapon_list[this.weapon_type].can_action&&(this.repeating||this.weapon_list[this.weapon_type].rapid),this.weapon_list[this.weapon_type].can_action&&this.weapon_list[this.weapon_type].rapid]}SetAction(t){if(this.final_weapon.can_action){this.action_sel=t,this.MakeFinalWeapon();for(const t of this.weapons)t.SetWeaponType(this.final_weapon,this.action_sel,this.projectile_sel)}else this.action_sel=bt.STANDARD;this.CalculateStats()}GetCanProjectile(){return[!0,this.final_weapon.can_projectile&&this.action_sel!=bt.MECHANICAL&&this.action_sel!=bt.GAST&&this.weapon_list[this.weapon_type].hits>0,this.final_weapon.can_projectile&&this.action_sel!=bt.ROTARY&&this.action_sel!=bt.GAST&&this.action_sel!=bt.MECHANICAL]}GetProjectile(){return this.projectile_sel}SetProjectile(t){if(this.final_weapon.can_projectile){this.projectile_sel=t,this.MakeFinalWeapon();for(const t of this.weapons)t.SetWeaponType(this.final_weapon,this.action_sel,this.projectile_sel)}else this.projectile_sel=yt.BULLETS;this.CalculateStats()}GetFinalWeapon(){return this.final_weapon}SetStickyGuns(t){this.sticky_guns=t}GetHRCharges(){if(this.IsLightningArc())return[3];let t=0;for(const e of this.weapons)t+=e.GetCount();if(this.final_weapon.hits>0){let e=this.weapon_list[this.weapon_type].stats.cost;return this.action_sel==bt.ROTARY&&(e*=2),this.final_weapon.rapid?[t*e,Math.max(t*e+1,Math.floor(1e-6+1.5*t*e))]:[t*e]}return"Scattergun"==this.final_weapon.name?this.final_weapon.rapid?[Math.floor(1.875001),Math.floor(3.125001)]:[Math.floor(1.875001)]:"Punt Gun"==this.final_weapon.name?this.final_weapon.rapid?[Math.floor(3.750001),Math.floor(6.250001)]:[Math.floor(3.750001)]:void 0}GetShots(){return Math.max(1,Math.floor(1e-6+this.final_weapon.ammo*this.ammo))}IsLightningArc(){return"Lightning Arc"==this.final_weapon.name}GetReload(){return this.final_weapon.reload}GetWingWeight(){let t=0;for(const e of this.weapons)e.GetWing()&&(t+=e.PartStats().mass);return t}GetDirectionCount(){let t=0;for(const e of this.directions)e&&t++;return t}SetSeat(t){this.seat=t,this.CalculateStats()}GetSeat(){return this.seat}GetIsFullyAccessible(){for(const t of this.weapons)if(!t.GetAccessible())return!1;return!0}GetIsPartlyAccessible(){for(const t of this.weapons)if(t.GetAccessible())return!0;return!1}SetCalculateStats(t){this.CalculateStats=t;for(const e of this.weapons)e.SetCalculateStats(t)}PartStats(){var t=new D;let e=this.GetDirectionCount(),s=0;for(const i of this.weapons)i.has_cantilever=this.has_cantilever,i.SetTurret(e>2),t=t.Add(i.PartStats()),s+=i.GetCount(),this.fixed||(2==e?t.cost+=1:3==e||4==e?t.cost+=2:5==e?t.cost+=3:6==e&&(t.cost+=4));return(this.projectile_sel==yt.HEATRAY||this.IsLightningArc())&&(this.ammo=1),t.mass+=(this.ammo-1)*s,t}GetElectrics(){return{storage:0,equipment:[]}}}const Zt=JSON.parse('{"A":[{"name":"Submachine Gun","abrv":"SMG","era":"WWI","cost":1,"mass":1,"drag":0,"damage":1,"hits":4,"ap":0,"ammo":10,"rapid":true,"manual":false,"synched":false,"shells":false,"jam":"0/1","reload":2,"size":1,"can_action":true,"can_projectile":true,"deflection":0,"warning":"SMG Warning"},{"name":"Scattergun","abrv":"SG","era":"Pioneer","cost":2,"mass":2,"drag":2,"damage":0.5,"hits":0,"ap":0,"ammo":8,"rapid":false,"manual":true,"synched":false,"shells":false,"jam":"0","reload":1,"warning":"Scattergun Warning","size":2,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Light Machine Gun","abrv":"LMG","era":"WWI","cost":2,"mass":2,"drag":1,"damage":2,"hits":4,"ap":1,"ammo":8,"rapid":true,"manual":false,"synched":false,"shells":false,"jam":"1/2","reload":2,"size":2,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Machine Gun","abrv":"MG","era":"WWI","cost":2,"mass":3,"drag":1,"damage":2,"hits":4,"ap":1,"ammo":10,"rapid":true,"manual":false,"synched":true,"shells":false,"jam":"1/2","reload":0,"size":4,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Balloon Gun","abrv":"BMG","era":"WWI","cost":3,"mass":3,"drag":1,"damage":2,"hits":4,"ap":0,"ammo":6,"rapid":true,"manual":false,"synched":true,"shells":true,"jam":"2/3","reload":0,"size":4,"can_action":true,"can_projectile":true,"deflection":-2},{"name":"Enhanced Machine Gun","abrv":"EMG","era":"Coming Storm","cost":3,"mass":2,"drag":1,"damage":2,"hits":5,"ap":1,"ammo":8,"rapid":true,"manual":false,"synched":true,"shells":false,"jam":"0/0","reload":0,"size":2,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Enhanced Heavy Machine Gun","abrv":"EHMG","era":"Coming Storm","cost":5,"mass":3,"drag":2,"damage":4,"hits":5,"ap":2,"ammo":6,"rapid":true,"manual":false,"synched":true,"shells":true,"jam":"0/0","reload":0,"size":4,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Punt Gun","abrv":"PG","era":"Pioneer","cost":4,"mass":4,"drag":3,"damage":0.5,"hits":0,"ap":0,"ammo":5,"rapid":false,"manual":true,"synched":false,"shells":false,"jam":"0","reload":1,"warning":"Punt Gun Warning","size":8,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Light Repeating Cannon","abrv":"LRC","era":"WWI","cost":4,"mass":4,"drag":3,"damage":8,"hits":3,"ap":2,"ammo":6,"rapid":true,"manual":false,"synched":false,"shells":true,"jam":"2/5","reload":2,"size":8,"can_action":true,"can_projectile":true,"deflection":-3},{"name":"Heavy Cannon","abrv":"HC","era":"WWI","cost":6,"mass":5,"drag":2,"damage":16,"hits":1,"ap":2,"ammo":5,"rapid":false,"manual":true,"synched":false,"shells":true,"jam":"0","reload":1,"size":8,"can_action":true,"can_projectile":true,"deflection":-3},{"name":"Light Machine Cannon","abrv":"LMC","era":"Coming Storm","cost":8,"mass":4,"drag":3,"damage":8,"hits":4,"ap":4,"ammo":6,"rapid":true,"manual":false,"synched":true,"shells":true,"jam":"0/0","reload":0,"size":8,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Heavy Machine Cannon","abrv":"HMC","era":"WWII","cost":12,"mass":5,"drag":4,"damage":12,"hits":3,"ap":4,"ammo":5,"rapid":true,"manual":false,"synched":false,"shells":true,"jam":"0/0","reload":0,"size":8,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Fliergerflammenwerfer","abrv":"FFW","era":"WWI","cost":5,"mass":1,"drag":3,"damage":0.5,"hits":0,"ap":0,"ammo":0,"rapid":false,"manual":false,"synched":false,"shells":false,"jam":"0/0","reload":0,"warning":"Fliergerflammenwerfer Warning","size":8,"can_action":false,"can_projectile":false,"deflection":0},{"name":"Recoilless Cannon","abrv":"RC","era":"WWI","cost":5,"mass":8,"drag":3,"damage":30,"hits":1,"ap":3,"ammo":3,"rapid":false,"manual":true,"synched":false,"shells":true,"jam":"0","reload":1,"size":16,"can_action":true,"can_projectile":true,"deflection":-5},{"name":"Autocannon","abrv":"AC","era":"WWII","cost":15,"mass":8,"drag":5,"damage":24,"hits":2,"ap":5,"ammo":2,"rapid":true,"manual":false,"synched":false,"shells":true,"jam":"0/0","reload":0,"size":16,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Battle Cannon","abrv":"BC","era":"WWII","cost":15,"mass":40,"drag":8,"damage":24,"hits":2,"ap":5,"ammo":1,"rapid":false,"manual":true,"synched":false,"shells":true,"jam":"0","reload":1,"size":16,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Precision Rifle","abrv":"PR","era":"WWI","mass":1,"drag":1,"cost":2,"damage":5,"hits":10,"ap":2,"ammo":8,"rapid":false,"manual":true,"synched":false,"shells":true,"jam":"0","reload":1,"size":2,"can_action":false,"can_projectile":false,"warning":"Precision Rifle Warning","deflection":0},{"name":"Lightning Arc","abrv":"LA","era":"Himmilgard","cost":8,"mass":5,"drag":3,"damage":0,"hits":0,"ap":0,"ammo":0,"rapid":false,"manual":false,"synched":false,"shells":false,"jam":"0","reload":0,"size":16,"can_action":false,"can_projectile":false,"warning":"Lightning Arc Warning","deflection":0},{"name":"Harpoon Launcher","abrv":"HL","era":"Himmilgard","cost":3,"mass":3,"drag":2,"damage":4,"hits":1,"ap":1,"ammo":2,"rapid":false,"manual":false,"synched":false,"shells":false,"jam":0,"reload":1,"size":4,"can_action":false,"can_projectile":false,"warning":"Harpoon Launcher Warning","deflection":0},{"name":"Heavy Machine Gun","abrv":"HMG","era":"WWI","cost":4,"mass":4,"drag":2,"damage":4,"hits":4,"ap":2,"ammo":5,"rapid":true,"manual":false,"synched":true,"shells":true,"jam":"2/3","reload":0,"size":4,"can_action":true,"can_projectile":true,"deflection":0},{"name":"Heavy Repeating Cannon","abrv":"HRC","era":"WWI","cost":10,"mass":6,"drag":4,"damage":16,"hits":2,"ap":2,"ammo":5,"rapid":true,"manual":false,"synched":false,"shells":true,"jam":"4/6","reload":2,"size":16,"can_action":true,"can_projectile":true,"deflection":-3}]}');class Kt extends wt{constructor(){super(),this.direction_list=["Forward","Rearward","Up","Down","Left","Right"],this.synchronization_list=["None","Interruptor Gear","Synchronization Gear","Spinner Gun","Deflector Plate","No Interference"],this.action_list=[{name:"Standard Action"},{name:"Mechanical Action"},{name:"Gast Principle"},{name:"Rotary_Gun"}],this.projectile_list=[{name:"Standard"},{name:"Heat Ray"},{name:"Pneumatic"}],this.weapon_list=[];for(const t of Zt.A){const e={name:t.name,abrv:t.abrv,era:t.era,size:t.size,stats:new D(t),damage:t.damage,hits:t.hits,ammo:t.ammo,ap:t.ap,jam:t.jam.toString(),reload:t.reload,rapid:t.rapid,synched:t.synched,shells:t.shells,can_action:t.can_action,can_projectile:t.can_projectile,deflection:t.deflection};this.weapon_list.push(e)}const t=(t,e)=>{const s=(t,e)=>t<e?-1:e<t?1:0;return t.size!=e.size?s(t.size,e.size):t.era!=e.era?s(U(t.era),U(e.era)):t.damage!=e.damage?s(t.damage,e.damage):s(t.name,e.name)};this.wl_permute=Array.from(Array(this.weapon_list.length).keys()).sort(((e,s)=>t(this.weapon_list[e],this.weapon_list[s])));const e=[];for(let t=0;t<this.wl_permute.length;t++)e.push(this.wl_permute.findIndex((e=>e==t)));this.wl_permute=e,this.weapon_list=this.weapon_list.sort(t),this.weapon_sets=[],this.brace_count=0,this.isheli=!1}toJSON(){const t=[];for(const e of this.weapon_sets)t.push(e.toJSON());return{weapon_systems:t,brace_count:this.brace_count}}fromJSON(t,e){this.weapon_sets=[];const s=t.weapon_systems;for(const t of s){const s=new Qt(this.weapon_list,this.wl_permute);s.SetCalculateStats(this.CalculateStats),s.fromJSON(t,e),this.weapon_sets.push(s)}e>10.35&&(this.brace_count=t.brace_count)}serialize(t){t.PushNum(this.weapon_sets.length);for(const e of this.weapon_sets)e.serialize(t);t.PushNum(this.brace_count)}deserialize(t){this.weapon_sets=[];const e=t.GetNum();for(let s=0;s<e;s++){const e=new Qt(this.weapon_list,this.wl_permute);e.SetCalculateStats(this.CalculateStats),e.deserialize(t),this.weapon_sets.push(e)}t.version>10.35&&(this.brace_count=t.GetNum())}GetWeaponList(){return this.weapon_list}GetDirectionList(){return this.direction_list}GetSynchronizationList(){return this.synchronization_list}SetWeaponSetCount(t){for((t!=t||t<1)&&(t=0),t=Math.floor(1e-6+t);t>this.weapon_sets.length;){const t=new Qt(this.weapon_list,this.wl_permute);t.SetCalculateStats(this.CalculateStats),this.weapon_sets.push(t)}for(;t<this.weapon_sets.length;)this.weapon_sets.pop();this.CalculateStats()}GetWeaponSets(){return this.weapon_sets}DuplicateSet(t){const e=new Qt(this.weapon_list,this.wl_permute);e.SetCalculateStats(this.CalculateStats),e.fromJSON(JSON.parse(JSON.stringify(this.weapon_sets[t].toJSON())),99999),this.weapon_sets.splice(t,0,e),this.CalculateStats()}RemoveSet(t){this.weapon_sets.splice(t,1),this.CalculateStats()}CountTractorSpinner(){var t=0;for(const e of this.weapon_sets)if(e.GetDirection()[0]){const s=e.GetWeapons();for(const e of s)e.GetSynchronization()==ft.SPINNER&&t++}return t}CountArtyTractorSpinner(){var t=0;for(const e of this.weapon_sets)if(e.GetDirection()[0]){const s=e.GetWeapons();for(const e of s)e.GetArty()&&e.GetSynchronization()==ft.SPINNER&&t++}return t}CountPusherSpinner(){var t=0;for(const e of this.weapon_sets)if(e.GetDirection()[1]){const s=e.GetWeapons();for(const e of s)e.GetSynchronization()==ft.SPINNER&&t++}return t}CountArtyPusherSpinner(){var t=0;for(const e of this.weapon_sets)if(e.GetDirection()[1]){const s=e.GetWeapons();for(const e of s)e.GetArty()&&e.GetSynchronization()==ft.SPINNER&&t++}return t}CleanFreelyAccessible(){var t=Array(this.cockpit_count).fill(!1);for(const e of this.weapon_sets){const s=e.GetSeat();for(const i of e.GetWeapons())i.GetFreeAccessible()&&t[s]?i.SetFreeAccessible(!1):i.GetFreeAccessible()&&(t[s]=!0)}for(const e of this.weapon_sets){const s=e.GetSeat();for(const i of e.GetWeapons())t[s]&&!i.GetFreeAccessible()||i.GetWing()?i.can_free_accessible=!1:i.can_free_accessible=!0}}RemoveOneTractorSpinner(){for(let t=this.weapon_sets.length-1;t>=0;t--)if(this.weapon_sets[t].GetDirection()[0]){const e=this.weapon_sets[t].GetWeapons();for(let t=e.length-1;t>=0;t--)if(e[t].GetSynchronization()==ft.SPINNER)return void e[t].SetSynchronization(ft.INTERRUPT)}}RemoveOneArtyTractorSpinner(){for(let t=this.weapon_sets.length-1;t>=0;t--)if(this.weapon_sets[t].GetDirection()[0]){const e=this.weapon_sets[t].GetWeapons();for(let t=e.length-1;t>=0;t--)if(e[t].GetSynchronization()==ft.SPINNER&&e[t].GetArty())return void e[t].SetSynchronization(ft.NO_INTERFERENCE)}}RemoveOnePusherSpinner(){for(let t=this.weapon_sets.length-1;t>=0;t--)if(this.weapon_sets[t].GetDirection()[1]){const e=this.weapon_sets[t].GetWeapons();for(let t=e.length-1;t>=0;t--)if(e[t].GetSynchronization()==ft.SPINNER)return void e[t].SetSynchronization(ft.INTERRUPT)}}RemoveOneArtyPusherSpinner(){for(let t=this.weapon_sets.length-1;t>=0;t--)if(this.weapon_sets[t].GetDirection()[1]){const e=this.weapon_sets[t].GetWeapons();for(let t=e.length-1;t>=0;t--)if(e[t].GetSynchronization()==ft.SPINNER&&e[t].GetArty())return void e[t].SetSynchronization(ft.NO_INTERFERENCE)}}CanTractorSpinner(){return this.CountTractorSpinner()+this.CountArtyTractorSpinner()<this.tractor_spinner_count}CanArtyTractorSpinner(){return this.CountArtyTractorSpinner()<this.tractor_arty_spinner_count}CanPusherSpinner(){return this.CountPusherSpinner()+this.CountArtyTractorSpinner()<this.pusher_spinner_count}CanArtyPusherSpinner(){return this.CountArtyPusherSpinner()<this.pusher_arty_spinner_count}SetTractorInfo(t){this.has_tractor=t.have,this.tractor_spinner_count=t.spin_count,this.tractor_arty_spinner_count=t.arty_spin_count}SetPusherInfo(t){this.has_pusher=t.have,this.pusher_spinner_count=t.spin_count,this.pusher_arty_spinner_count=t.arty_spin_count}GetActionList(){return this.action_list}GetProjectileList(){return this.projectile_list}GetBraceCount(){return this.brace_count}SetBraceCount(t){(t<0||t!=t)&&(t=0),t-=t%3,this.brace_count=t,this.CalculateStats()}SetHavePropeller(t){for(const e of this.weapon_sets)e.SetHavePropeller(t)}SetCanWing(t){for(const e of this.weapon_sets)e.SetCanWing(t)}SetStickyGuns(t){for(const e of this.weapon_sets)e.SetStickyGuns(t)}GetWingWeight(){var t=0;for(const e of this.weapon_sets)t+=e.GetWingWeight();return t}GetSeatList(){const t=[];for(let e=0;e<this.cockpit_count;e++)t.push(A("Seat #",e+1));return t}GetArmedSeats(){const t=Array(this.cockpit_count).fill(!1);for(const e of this.weapon_sets)t[e.GetSeat()]=!0;return t}SetCalculateStats(t){this.CalculateStats=t;for(const e of this.weapon_sets)e.SetCalculateStats(t)}SetNumberOfCockpits(t){this.cockpit_count=t}SetHeli(t){this.isheli=t}PartStats(){var t=new D;for(this.CleanFreelyAccessible();this.CountArtyTractorSpinner()>this.tractor_arty_spinner_count;)this.RemoveOneArtyTractorSpinner();for(;this.CountTractorSpinner()>this.tractor_spinner_count;)this.RemoveOneTractorSpinner();for(;this.CountArtyPusherSpinner()>this.pusher_arty_spinner_count;)this.RemoveOneArtyPusherSpinner();for(;this.CountPusherSpinner()>this.pusher_spinner_count;)this.RemoveOnePusherSpinner();var e=0,s=0;0==this.cant_type?(e=4,s=2):1==this.cant_type?(e=8,s=4):(e=16,s=8);const i=[];for(const t of this.weapon_sets)for(const e of t.GetWeapons()){e.wing_reinforcement=!1;const s={total:0,count:0,sz:0,w:e};e.GetWing()&&(s.count=e.GetCount(),s.sz=this.weapon_list[t.GetWeaponSelected()].size,s.total=s.count*s.sz,i.push(s))}i.sort((function(t,e){return t.total-e.total}));for(const t of i)e>=0&&(s<t.sz?t.w.wing_reinforcement=!0:e-=t.total),e<0&&(t.w.wing_reinforcement=!0);for(const e of this.weapon_sets)e.SetTractorPusher(this.has_tractor,this.CanTractorSpinner(),this.CanArtyTractorSpinner(),this.has_pusher,this.CanPusherSpinner(),this.CanArtyPusherSpinner(),this.isheli),e.has_cantilever=this.cant_type>0,t=t.Add(e.PartStats());return t.cost+=this.brace_count/3,this.brace_count>0&&t.warnings.push({source:A("Weapons Braces"),warning:A("Weapons Braces Warning"),color:q.WHITE}),t.control-=Math.floor(1e-6+this.GetWingWeight()/5),t}GetElectrics(){const t={storage:0,equipment:[]};for(let e=0;e<this.weapon_sets.length;e++){const s=this.weapon_sets[e];if(s.GetProjectile()==yt.HEATRAY||s.IsLightningArc()){const i=s.GetHRCharges();for(let t=0;t<i.length;t++)i[t]*=-1;t.equipment.push({source:A("Vital Part Weapon Set",e+1,s.GetFinalWeapon().abrv),charge:R.Join("/",i)})}}return t}}class $t extends wt{constructor(){super(),this.burnt_out=0,this.ragged=0,this.hefty=0,this.sticky_guns=0,this.weak=0,this.fragile=0,this.leaky=0,this.sluggish=0}IsDefault(){return 0==Math.abs(this.burnt_out)+Math.abs(this.ragged)+Math.abs(this.hefty)+Math.abs(this.sticky_guns)+Math.abs(this.weak)+Math.abs(this.fragile)+Math.abs(this.leaky)+Math.abs(this.sluggish)}SetEnabled(t){this.burnt_out=0,this.ragged=0,this.hefty=0,this.sticky_guns=0,this.weak=0,this.fragile=0,this.leaky=0,this.sluggish=0,this.CalculateStats()}toJSON(){return{enabled:!0,burnt_out:this.burnt_out,ragged:this.ragged,hefty:this.hefty,sticky_guns:this.sticky_guns,weak:this.weak,fragile:this.fragile,leaky:this.leaky,sluggish:this.sluggish}}fromJSON(t,e){this.burnt_out=t.burnt_out,this.ragged=t.ragged,this.hefty=t.hefty,this.sticky_guns=t.sticky_guns,this.weak=t.weak,this.fragile=t.fragile,this.leaky=t.leaky,this.sluggish=t.sluggish}serialize(t){t.PushBool(!0),t.PushNum(this.burnt_out),t.PushNum(this.ragged),t.PushNum(this.hefty),t.PushNum(this.sticky_guns),t.PushNum(this.weak),t.PushNum(this.fragile),t.PushNum(this.leaky),t.PushNum(this.sluggish)}deserialize(t){t.GetBool(),this.burnt_out=t.GetNum(),this.ragged=t.GetNum(),this.hefty=t.GetNum(),this.sticky_guns=t.GetNum(),this.weak=t.GetNum(),this.fragile=t.GetNum(),this.leaky=t.GetNum(),this.sluggish=t.GetNum()}Normalize(t){return t!=t&&(t=0),t=Math.floor(1e-6+t),t=Math.min(1,t),Math.max(-1,t)}PartStats(){return this.burnt_out=this.Normalize(this.burnt_out),this.ragged=this.Normalize(this.ragged),this.hefty=this.Normalize(this.hefty),this.sticky_guns=this.Normalize(this.sticky_guns),this.weak=this.Normalize(this.weak),this.fragile=this.Normalize(this.fragile),this.leaky=this.Normalize(this.leaky),this.sluggish=this.Normalize(this.sluggish),new D}SetCalculateStats(t){this.CalculateStats=t}TriggerCS(){this.burnt_out=this.Normalize(this.burnt_out),this.ragged=this.Normalize(this.ragged),this.hefty=this.Normalize(this.hefty),this.sticky_guns=this.Normalize(this.sticky_guns),this.weak=this.Normalize(this.weak),this.fragile=this.Normalize(this.fragile),this.leaky=this.Normalize(this.leaky),this.sluggish=this.Normalize(this.sluggish),this.CalculateStats()}GetElectrics(){return{storage:0,equipment:[]}}}var te;!function(t){t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"}(te||(te={}));class ee extends wt{constructor(t){super(),this.type=gt.AIRPLANE,this.rotor_count=0,this.rotor_span=0,this.wing_area=0,this.stagger_sel=0,this.dryMP=-1,this.sizing_span=0,this.cant_idx=0,this.rotor_thickness=0,this.accessory=!1,this.blade_idx=0,this.blade_list=[];for(const e of t.blade_count)this.blade_list.push({name:e.name,rotor_bleed:e.rotor_bleed,sizing:e.sizing,stats:new D(e)});this.stagger_list=[];for(const e of t.arrangement)this.stagger_list.push({name:e.name,count:e.count,powerfactor:e.powerfactor,blades:e.blades,stats:new D(e)})}toJSON(){return{type:this.type,rotor_count:this.rotor_count,rotor_span:this.rotor_span,rotor_mat:this.cant_idx,stagger_sel:this.stagger_sel,accessory:this.accessory,blade_idx:this.blade_idx,rotor_thickness:this.rotor_thickness}}fromJSON(t,e){this.type=t.type,this.rotor_count=t.rotor_count,this.rotor_span=t.rotor_span,this.cant_idx=t.rotor_mat,this.stagger_sel=e<12.35?0:t.stagger_sel,this.accessory=t.accessory,e>11.55&&(this.blade_idx=t.blade_idx),e<12.45&&(this.rotor_span=0),this.rotor_thickness=e<12.55?0:t.rotor_thickness,this.dryMP=-1}serialize(t){t.PushNum(this.type),t.PushNum(this.rotor_count),t.PushNum(this.rotor_span),t.PushNum(this.cant_idx),t.PushNum(this.stagger_sel),t.PushBool(this.accessory),t.PushNum(this.blade_idx),t.PushNum(this.rotor_thickness)}deserialise(t){this.type=t.GetNum(),this.rotor_count=t.GetNum(),this.rotor_span=t.GetNum(),this.cant_idx=t.GetNum(),t.version<12.35?(t.GetBool(),this.stagger_sel=0):this.stagger_sel=t.GetNum(),this.accessory=t.GetBool(),t.version>11.55&&(this.blade_idx=t.GetNum()),t.version<12.45&&(this.rotor_span=0),t.version<12.55?this.rotor_thickness=0:this.rotor_thickness=t.GetNum(),this.dryMP=-1}SetCantileverList(t){this.cant_list=t}GetCantileverList(){return this.cant_list}SetCantilever(t){this.cant_idx=t,this.CalculateStats()}GetCantilever(){return this.cant_idx}SetRotorThickness(t){t<0&&(t=0),this.rotor_thickness=Math.floor(1e-6+t),this.CalculateStats()}GetRotorThickness(){return this.rotor_thickness}SetType(t){this.type!=t&&(this.accessory=!1,this.cant_idx=0,this.stagger_sel=0,this.rotor_count=1,this.type=t,this.rotor_span=0)}CanRotorCount(){return this.type==gt.HELICOPTER}SetRotorCount(t){t<1&&(t=1),t>=2&&t%2==1&&(t==this.rotor_count+1?t+=1:t-=1),this.rotor_count=t,this.rotor_count<2&&(this.stagger_sel=0),this.CalculateStats()}GetRotorCount(){return this.rotor_count}CanRotorSpan(){return this.type==gt.HELICOPTER}SetRotorSpan(t){this.rotor_span=Math.floor(1e-6+t),this.CalculateStats()}GetRotorSpan(){return this.rotor_span}CanTandem(){return this.type==gt.HELICOPTER&&this.rotor_count>1}SetBladeCount(t){this.blade_idx=t,this.CalculateStats()}SetWingArea(t){this.wing_area=t}GetSizingSpan(){return this.sizing_span}SetMP(t){t!=this.dryMP&&(this.dryMP=t,this.CalculateStats())}GetRotorStrain(){const t=this.GetRotorArea();return this.rotor_count*Math.max(1,2*(this.sizing_span+this.rotor_span)+t-10)}GetRotorArea(){return Math.PI/9*(this.sizing_span+this.rotor_span)*(this.sizing_span+this.rotor_span)}GetIdealRotorArea(){return Math.PI/9*this.sizing_span*this.sizing_span}GetRotorDrag(){if(this.type==gt.HELICOPTER||this.type==gt.AUTOGYRO){const t=this.GetRotorArea();return 1==this.rotor_count?Math.floor(1e-6+6*t*t/((this.sizing_span+this.rotor_span)*(this.sizing_span+this.rotor_span))):Math.floor(1e-6+.75*this.rotor_count*Math.floor(1e-6+6*t*t/((this.sizing_span+this.rotor_span)*(this.sizing_span+this.rotor_span))))}return 0}GetType(){return this.type}GetAccessory(){return this.accessory}SetAccessory(t){this.accessory=t,this.CalculateStats()}SetEngineCount(t){this.engine_count=t}GetTailRotor(){return this.type==gt.HELICOPTER&&this.rotor_count<2}GetBladeList(){return this.blade_list}GetRotorBleed(){return this.type==gt.HELICOPTER?this.blade_list[this.blade_idx].rotor_bleed:0}GetPowerFactor(){return this.stagger_list[this.stagger_sel].powerfactor}GetBladeCountIdx(){return this.blade_idx}GetStaggerList(){return this.stagger_list}GetStagger(){return this.stagger_sel}SetStagger(t){t!=this.stagger_sel&&(this.stagger_sel=t,this.CalculateStats())}CanStagger(){const t=[];for(let e=0;e<this.stagger_list.length;e++)1==this.rotor_count&&1==this.stagger_list[e].count||2==this.rotor_count&&2==this.stagger_list[e].count||this.rotor_count>=2&&3==this.stagger_list[e].count?t.push(!0):t.push(!1);return t}VerifySizes(){this.type==gt.AIRPLANE?(this.rotor_count=0,this.rotor_span=0,this.stagger_sel=0):this.type==gt.AUTOGYRO?(this.rotor_count=1,this.sizing_span=Math.ceil(-1e-6+Math.sqrt(.6*this.wing_area/(Math.PI/8))),this.rotor_span=Math.max(this.rotor_span,2-this.sizing_span),this.stagger_sel=0):this.type==gt.HELICOPTER&&(this.rotor_count=Math.max(1,this.rotor_count),this.rotor_count>1&&this.rotor_count%2==1&&(this.rotor_count=this.rotor_count-1),-1!=this.dryMP?(1==this.rotor_count?this.sizing_span=Math.ceil(5*Math.pow(this.dryMP,.4)*this.blade_list[this.blade_idx].sizing-1e-6):this.sizing_span=Math.ceil(4*Math.pow(this.dryMP,.4)*this.blade_list[this.blade_idx].sizing-1e-6),this.sizing_span=Math.min(100,this.sizing_span),this.rotor_span=Math.max(this.rotor_span,-Math.floor(1e-6+this.sizing_span/2))):this.sizing_span=10)}VerifyStagger(){if(this.rotor_count>2&&this.stagger_list[this.stagger_sel].count<=2){for(let t=0;t<this.stagger_list.length;t++)if(3==this.stagger_list[t].count){this.stagger_sel=t;break}}else if(2==this.rotor_count&&2!=this.stagger_list[this.stagger_sel].count){for(let t=0;t<this.stagger_list.length;t++)if(2==this.stagger_list[t].count){this.stagger_sel=t;break}}else if(1==this.rotor_count&&1!=this.stagger_list[this.stagger_sel].count)for(let t=0;t<this.stagger_list.length;t++)if(1==this.stagger_list[t].count){this.stagger_sel=t;break}}PartStats(){this.VerifySizes(),this.VerifyStagger();var t=new D;const e=this.GetRotorArea();t.wingarea+=Math.floor(1e-6+e),t.drag=this.GetRotorDrag();const s=this.GetRotorStrain();var i=this.cant_list[this.cant_idx].stats.Clone();const a=Math.ceil(s/i.maxstrain-1e-6);return(i=i.Multiply(a)).maxstrain=0,i.toughness=0,t=(t=t.Add(i)).Add(this.stagger_list[this.stagger_sel].stats.Clone()),this.type==gt.HELICOPTER&&(t.reliability=2*Math.min(0,this.rotor_span),(t=t.Add(this.blade_list[this.blade_idx].stats)).power-=this.rotor_thickness,t.maxstrain+=10*this.rotor_thickness),this.accessory?this.type==gt.AUTOGYRO?(t.cost+=2,t.mass+=2):this.type==gt.HELICOPTER&&(t.mass+=this.rotor_count*this.engine_count):this.type==gt.HELICOPTER&&(t.mass+=Math.max(this.rotor_count,this.engine_count)),this.type==gt.HELICOPTER?(t.warnings.push({source:A("Helicopter Landing"),warning:A("Helicopter Landing Warning"),color:q.WHITE}),t.warnings.push({source:A("Helicopter Descent"),warning:A("Helicopter Descent Warning"),color:q.WHITE}),t.warnings.push({source:A("Helicopter Stall"),warning:A("Helicopter Stall Warning"),color:q.WHITE}),t.reliability<0&&t.warnings.push({source:A("Rotor Span"),warning:A("Rotor Span Warning"),color:q.YELLOW})):this.type==gt.AUTOGYRO&&t.warnings.push({source:A("Autogyro Stall"),warning:A("Autogyro Stall Warning"),color:q.WHITE}),t}SetCalculateStats(t){this.CalculateStats=t}GetElectrics(){return{storage:0,equipment:[]}}}class se extends wt{constructor(){super();let t=JSON.parse(window.localStorage.getItem("test.CustomParts"));t||(t=[],window.localStorage.setItem("test.CustomParts",JSON.stringify([]))),this.custom_parts=[];for(const e of t)this.custom_parts.push({name:e.name,stats:new D(e.stats),qty:0})}toJSON(){const t=[],e=[];for(const s of this.custom_parts)e.push({name:s.name,stats:s.stats.toJSON(),qty:s.qty}),s.qty>0&&t.push({name:s.name,stats:s.stats.toJSON(),qty:s.qty});return window.localStorage.setItem("test.CustomParts",JSON.stringify(e)),{part_list:t}}fromJSON(t,e){for(const t of this.custom_parts)t.qty=0;for(const e of t.part_list){const t=this.custom_parts.findIndex((t=>t.name==e.name));-1==t?this.custom_parts.push({name:e.name,stats:new D(e.stats),qty:e.qty}):this.custom_parts[t].qty=e.qty}}serialize(t){const e=[];for(const t of this.custom_parts)t.qty>0&&e.push({name:t.name,stats:t.stats,qty:t.qty});t.PushNum(e.length);for(const s of e)t.PushString(s.name),s.stats.serialize(t),t.PushNum(s.qty)}deserialize(t){for(const t of this.custom_parts)t.qty=0;const e=t.GetNum();for(let i=0;i<e;i++){const e=t.GetString(),i=new D;i.deserialize(t);const a=t.GetNum();var s=this.custom_parts.findIndex((t=>t.name==e));-1==s?(s=this.custom_parts.length,this.custom_parts.push({name:e,stats:i,qty:a})):this.custom_parts[s].qty=a}}IsDefault(){for(const t of this.custom_parts)if(t.qty>0)return!1;return!0}ClearAll(){for(const t of this.custom_parts)t.qty=0}AddPart(t,e){var s=0;if(s+=Math.abs(e.drag),s+=Math.abs(e.mass),s+=Math.abs(e.wetmass),s+=Math.abs(e.bomb_mass),s+=Math.abs(e.cost),s+=Math.abs(e.upkeep),s+=Math.abs(e.liftbleed),s+=Math.abs(e.wingarea),s+=Math.abs(e.control),s+=Math.abs(e.pitchstab),s+=Math.abs(e.latstab),s+=Math.abs(e.maxstrain),s+=Math.abs(e.structure),s+=Math.abs(e.toughness),s+=Math.abs(e.power),s+=Math.abs(e.fuelconsumption),s+=Math.abs(e.fuel),s+=Math.abs(e.charge),s+=Math.abs(e.crashsafety),s+=Math.abs(e.visibility),s+=Math.abs(e.escape),s+=Math.abs(e.reliability),0==(s+=Math.abs(e.warnings.length)))return;const i=this.custom_parts.findIndex((e=>e.name==t));-1!=i?this.custom_parts[i].stats=e:this.custom_parts.push({name:t,stats:e,qty:0}),this.custom_parts.sort(((t,e)=>t.name.localeCompare(e.name))),this.CalculateStats()}RemovePart(t){const e=this.custom_parts.findIndex((e=>e.name==t));-1!=e&&this.custom_parts.splice(e,1),this.CalculateStats()}GetParts(){return this.custom_parts}SetUsedPart(t,e){this.custom_parts[t].qty=e,this.CalculateStats()}PartStats(){var t=new D;for(const e of this.custom_parts)if(e.qty>0){let s=e.stats.Clone();s=s.Multiply(e.qty),t=t.Add(s)}return t}GetElectrics(){var t=[];for(const e of this.custom_parts)e.qty>0&&(t=this.FormatEquipment(t,e.name,e.stats.charge));return{storage:0,equipment:t}}SetCalculateStats(t){this.CalculateStats=t}}class ie{constructor(t,e){this.use_storage=!1,this.reset_json=String.raw`{"version":"12.3","name":"Basic Helicopter","aircraft_type":1,"era":{"selected":1},"cockpits":{"positions":[{"type":0,"upgrades":[false,false,false,false,false,false],"safety":[false,false,false,false,false,false],"sights":[false,false,false,false],"bombsight":0}]},"passengers":{"seats":0,"beds":0,"connected":false},"engines":{"engines":[{"selected_stats":{"name":"Schreiber B.IX 130hp","overspeed":19,"altitude":29,"torque":4,"rumble":0,"oiltank":true,"pulsejet":false,"liftbleed":0,"wetmass":0,"mass":7,"drag":10,"control":0,"cost":8,"reqsections":0,"visibility":0,"flightstress":0,"escape":0,"pitchstab":0,"latstab":0,"cooling":0,"reliability":0,"power":13,"fuelconsumption":16,"maxstrain":0,"structure":0,"pitchboost":0,"pitchspeed":0,"wingarea":0,"toughness":0,"upkeep":0,"crashsafety":0,"bomb_mass":0,"fuel":0,"charge":0,"warnings":[],"eras":[{"name":"Schreiber B.IX 130hp","era":"WWI"}]},"selected_inputs":{"name":"Schreiber B.IX 130hp","engine_type":0,"type":2,"era_sel":1,"displacement":16.2,"compression":4.8,"cyl_per_row":9,"rows":1,"RPM_boost":0.95,"material_fudge":1,"quality_fudge":1.1,"compressor_type":0,"compressor_count":0,"min_IAF":0,"upgrades":[false,false,false,false]},"cooling_count":0,"radiator_index":-1,"selected_mount":1,"use_pushpull":false,"pp_torque_to_struct":false,"use_driveshafts":true,"geared_propeller_ratio":0,"geared_propeller_reliability":0,"cowl_sel":0,"is_generator":false,"has_alternator":false,"intake_fan":false,"outboard_prop":false}],"radiators":[],"is_asymmetric":false},"propeller":{"type":0,"upgrade":0},"frames":{"sections":[{"frame":0,"geodesic":false,"monocoque":false,"lifting_body":false,"internal_bracing":false},{"frame":0,"geodesic":false,"monocoque":false,"lifting_body":false,"internal_bracing":false},{"frame":0,"geodesic":false,"monocoque":false,"lifting_body":false,"internal_bracing":false}],"tail_sections":[{"frame":0,"geodesic":false,"monocoque":false,"lifting_body":false,"internal_bracing":false},{"frame":0,"geodesic":false,"monocoque":false,"lifting_body":false,"internal_bracing":false}],"tail_index":2,"use_farman":false,"use_boom":false,"flying_wing":false,"sel_skin":1},"stabilizers":{"hstab_sel":0,"hstab_count":1,"vstab_sel":0,"vstab_count":1},"reinforcements":{"ext_wood_count":[],"ext_steel_count":[],"cant_count":[0,0,0,0,0],"wires":false,"cabane_sel":0,"wing_blades":false},"fuel":{"tank_count":[1,0],"self_sealing":false,"fire_extinguisher":false},"munitions":{"bomb_count":0,"rocket_count":0,"bay_count":0,"bay1":false,"bay2":false},"cargo":{"space_sel":0},"gear":{"gear_sel":4,"retract":false,"extra_sel":[false]},"accessories":{"v":2,"armour_coverage":[0,0,0,0,0,0,0,0],"electrical_count":[0,0,0],"radio_sel":0,"recon_sel":[0,0,0,0,0,0,0],"visi_sel":[false,false],"clim_sel":[false,false,false],"auto_sel":0,"cont_sel":0},"optimization":{"free_dots":0,"cost":0,"bleed":0,"escape":0,"mass":0,"toughness":0,"maxstrain":0,"reliability":0,"drag":0},"weapons":{"weapon_systems":[{"weapon_type":3,"fixed":true,"directions":[true,false,false,false,false,false],"weapons":[{"fixed":true,"wing":false,"covered":false,"accessible":false,"free_accessible":true,"synchronization":-1,"w_count":1}],"ammo":1,"action":0,"projectile":0,"repeating":false,"seat":0}],"brace_count":0},"used":{"enabled":true,"burnt_out":0,"ragged":0,"hefty":0,"sticky_guns":0,"weak":0,"fragile":0,"leaky":0,"sluggish":0},"rotor":{"type":1,"rotor_count":1,"rotor_span":10,"rotor_mat":0,"stagger_sel":0,"accessory":false,"blade_idx":0},"alter":{"part_list":[]}}`,this.freeze_calculation=!0,this.stats=new D,this.name="Prototype Aircraft",this.version=t.version,this.era=new Tt(t.era),this.cockpits=new Lt(t.cockpit),this.passengers=new Wt(t.passengers),this.engines=new Ot(t.engines),this.propeller=new qt(t.propellers),this.frames=new Dt(t.frames),this.stabilizers=new Ut(t.stabilizers),this.reinforcements=new zt(t.reinforcement),this.fuel=new Ht(t.fuel),this.munitions=new jt,this.cargo=new Jt(t.cargo),this.gear=new Vt(t.landing_gear),this.accessories=new Yt(t.accessories),this.optimization=new Xt,this.weapons=new Kt,this.used=new $t,this.rotor=new ee(t.rotor),this.alter=new se,this.era.SetCalculateStats((()=>{this.CalculateStats()})),this.cockpits.SetCalculateStats((()=>{this.CalculateStats()})),this.passengers.SetCalculateStats((()=>{this.CalculateStats()})),this.engines.SetCalculateStats((()=>{this.CalculateStats()})),this.propeller.SetCalculateStats((()=>{this.CalculateStats()})),this.frames.SetCalculateStats((()=>{this.CalculateStats()})),this.stabilizers.SetCalculateStats((()=>{this.CalculateStats()})),this.reinforcements.SetCalculateStats((()=>{this.CalculateStats()})),this.fuel.SetCalculateStats((()=>{this.CalculateStats()})),this.munitions.SetCalculateStats((()=>{this.CalculateStats()})),this.cargo.SetCalculateStats((()=>{this.CalculateStats()})),this.gear.SetCalculateStats((()=>{this.CalculateStats()})),this.accessories.SetCalculateStats((()=>{this.CalculateStats()})),this.optimization.SetCalculateStats((()=>{this.CalculateStats()})),this.weapons.SetCalculateStats((()=>{this.CalculateStats()})),this.used.SetCalculateStats((()=>{this.CalculateStats()})),this.rotor.SetCalculateStats((()=>{this.CalculateStats()})),this.alter.SetCalculateStats((()=>{this.CalculateStats()})),this.rotor.SetCantileverList(this.reinforcements.GetCantileverList()),this.cockpits.SetNumberOfCockpits(1),this.engines.SetNumberOfEngines(1),this.frames.SetTailType(1),this.use_storage=e,this.updated_stats=!1,this.freeze_calculation=!1,this.aircraft_type=gt.HELICOPTER,this.Reset()}toJSON(){return{version:this.version,name:this.name,aircraft_type:this.aircraft_type,era:this.era.toJSON(),cockpits:this.cockpits.toJSON(),passengers:this.passengers.toJSON(),engines:this.engines.toJSON(),propeller:this.propeller.toJSON(),frames:this.frames.toJSON(),stabilizers:this.stabilizers.toJSON(),reinforcements:this.reinforcements.toJSON(),fuel:this.fuel.toJSON(),munitions:this.munitions.toJSON(),cargo:this.cargo.toJSON(),gear:this.gear.toJSON(),accessories:this.accessories.toJSON(),optimization:this.optimization.toJSON(),weapons:this.weapons.toJSON(),used:this.used.toJSON(),rotor:this.rotor.toJSON(),alter:this.alter.toJSON()}}fromJSON(t,e=!0){this.freeze_calculation=!0,e&&(console.log(t),console.log(t.version));var s=parseFloat(t.version);return this.name=t.name,s>11.05&&(this.aircraft_type=t.aircraft_type,this.aircraft_type==gt.HELICOPTER&&(this.rotor.SetType(t.aircraft_type),this.era.fromJSON(t.era,s),this.cockpits.fromJSON(t.cockpits,s),this.passengers.fromJSON(t.passengers,s),this.engines.fromJSON(t.engines,s),this.propeller.fromJSON(t.propeller,s),this.frames.fromJSON(t.frames,s),this.stabilizers.fromJSON(t.stabilizers,s),this.reinforcements.fromJSON(t.reinforcements,s),this.fuel.fromJSON(t.fuel,s),this.munitions.fromJSON(t.munitions,s),this.cargo.fromJSON(t.cargo,s),this.gear.fromJSON(t.gear,s),this.accessories.fromJSON(t.accessories,s),this.optimization.fromJSON(t.optimization,s),this.weapons.fromJSON(t.weapons,s),s>10.65&&this.used.fromJSON(t.used,s),s>11.05&&this.rotor.fromJSON(t.rotor,s),s>12.25?this.alter.fromJSON(t.alter,s):this.alter.ClearAll(),this.freeze_calculation=!1,!0))}serialize(t){t.PushString(this.version),t.PushString(this.name),this.era.serialize(t),this.cockpits.serialize(t),this.passengers.serialize(t),this.engines.serialize(t),this.propeller.serialize(t),this.frames.serialize(t),this.stabilizers.serialize(t),this.reinforcements.serialize(t),this.fuel.serialize(t),this.munitions.serialize(t),this.cargo.serialize(t),this.gear.serialize(t),this.accessories.serialize(t),this.optimization.serialize(t),this.weapons.serialize(t),this.used.serialize(t),this.rotor.serialize(t),t.PushNum(this.aircraft_type),this.alter.serialize(t)}deserialize(t){this.freeze_calculation=!0,t.version=parseFloat(t.GetString()),console.log(t.version),this.name=t.GetString(),this.era.deserialize(t),this.cockpits.deserialize(t),this.passengers.deserialize(t),this.engines.deserialize(t),this.propeller.deserialize(t),this.frames.deserialize(t),this.stabilizers.deserialize(t),this.reinforcements.deserialize(t),this.fuel.deserialize(t),this.munitions.deserialize(t),this.cargo.deserialize(t),this.gear.deserialize(t),this.accessories.deserialize(t),this.optimization.deserialize(t),this.weapons.deserialize(t),t.version>10.65&&this.used.deserialize(t),t.version>11.05?(this.rotor.deserialise(t),this.aircraft_type=t.GetNum(),this.rotor.SetType(this.aircraft_type)):(this.aircraft_type=gt.AIRPLANE,this.rotor.SetType(gt.AIRPLANE)),t.version>12.25?this.alter.deserialize(t):this.alter.ClearAll(),this.freeze_calculation=!1}SetType(t){this.aircraft_type=t,this.rotor.SetType(t),this.CalculateStats()}SetDisplayCallback(t){this.DisplayCallback=t}CalculateStats(){if(!this.freeze_calculation){this.updated_stats=!1;var t=new D;if(t=(t=(t=t.Add(this.era.PartStats())).Add(this.cockpits.PartStats())).Add(this.passengers.PartStats()),this.engines.SetTailMods(!1,!1,!1),this.engines.SetInternal(!1),this.engines.SetMetalArea(0),this.engines.HaveParasol(!1),t=t.Add(this.engines.PartStats()),this.propeller.SetEngineTypes(this.engines.GetEngineTypes()),this.propeller.SetAcftType(this.aircraft_type),t=(t=(t=t.Add(this.propeller.PartStats())).Add(this.fuel.PartStats())).Add(this.munitions.PartStats()),this.weapons.SetNumberOfCockpits(this.cockpits.GetNumberOfCockpits()),this.weapons.SetTractorInfo(this.engines.GetTractorSpinner()),this.weapons.SetPusherInfo(this.engines.GetPusherSpinner()),this.weapons.SetHeli(!0),this.weapons.cant_type=this.reinforcements.GetCantileverType(),this.weapons.SetHavePropeller(this.engines.GetNumPropellers()>0),this.weapons.SetCanWing(!1),t=(t=t.Add(this.weapons.PartStats())).Add(this.cargo.PartStats()),this.rotor.SetType(this.aircraft_type),this.rotor.SetWingArea(t.wingarea),this.rotor.SetEngineCount(this.engines.GetNumberOfEngines()),t=t.Add(this.rotor.PartStats()),this.reinforcements.SetMonoplane(!1),this.reinforcements.SetTandem(!1),this.reinforcements.SetStaggered(!1),this.reinforcements.SetCanUseExternal(!1),this.reinforcements.SetSesquiplane({is:!1,deck:0,super_small:!1}),this.reinforcements.SetAircraftType(this.aircraft_type),this.reinforcements.SetCantLift(this.era.GetCantLift()),t=t.Add(this.reinforcements.PartStats()),this.rotor.GetTailRotor()&&(t.power=Math.floor(1e-6+.9*t.power)),this.accessories.SetAcftRadiator(this.engines.GetNumberOfRadiators()>0),this.accessories.SetSkinArmor(this.frames.GetArmor()),this.accessories.SetVitalParts(this.VitalComponentList().length),this.accessories.SetCanCutouts(!1,this.frames.CanCutout()),t=t.Add(this.accessories.PartStats()),this.frames.SetRequiredSections(t.reqsections),this.frames.SetHasTractorNacelles(this.engines.GetHasTractorNacelles()),this.frames.SetIsTandem(this.rotor.GetTailRotor()),t=t.Add(this.frames.PartStats()),this.stabilizers.SetHelicopter(!0),this.stabilizers.SetEngineCount(this.engines.GetNumberOfEngines()),this.stabilizers.SetIsTandem(!1),this.stabilizers.SetIsSwept(!1),this.stabilizers.SetHaveTail(!this.frames.GetIsTailless()),this.stabilizers.SetLiftingArea(this.rotor.GetRotorArea()),this.stabilizers.wing_drag=this.rotor.GetRotorDrag(),(t=t.Add(this.stabilizers.PartStats())).mass=Math.max(1,t.mass),this.gear.SetGull(0),this.gear.SetLoadedMass(t.mass+t.wetmass),this.gear.CanBoat(this.engines.GetEngineHeight(),2),(t=t.Add(this.gear.PartStats())).toughness+=Math.floor(1e-6+t.structure/5),this.optimization.SetAcftStats(t),t=t.Add(this.optimization.PartStats()),this.cockpits.SetHasRotary(this.engines.HasTractorRotary()),(t=t.Add(this.alter.PartStats())).power=Math.floor(1e-6+this.rotor.GetPowerFactor()*t.power),t.Round(),this.rotor.SetMP(Math.floor(1e-6+t.mass/5)),!this.updated_stats){this.updated_stats=!0,this.stats=t;var e=this.GetDerivedStats();t.reliability-=this.used.burnt_out,this.weapons.SetStickyGuns(this.used.sticky_guns),this.cockpits.SetArmed(this.weapons.GetArmedSeats()),this.cockpits.UpdateCrewStats(this.stats.escape,e.ControlStress,e.RumbleStress,this.stats.visibility,this.stats.crashsafety);let s=0;for(let t of this.cockpits.GetStressList())s=Math.max(s,t[0]-t[1]);0!=s&&-1==this.stats.warnings.findIndex((t=>t.source==A("Co-Pilot Controls")))&&this.stats.warnings.push({source:A("Co-Pilot Controls"),warning:A("Co-Pilot Warning",s),color:q.WHITE}),this.engines.UpdateReliability(t),this.reinforcements.SetAcftStructure(t.structure),this.fuel.SetArea(0),this.fuel.SetCantilever(this.reinforcements.GetIsCantilever()),this.munitions.SetAcftParameters(t.structure,this.era.GetMaxBomb(),0),this.stats.cost=Math.max(1,this.stats.cost),this.stats.liftbleed=Math.max(1,this.stats.liftbleed),10*this.engines.GetRumble()>t.structure&&(this.stats.power=0,this.stats.warnings.push({source:A("Stat Rumble"),warning:A("Rumble Warning"),color:q.RED})),this.DisplayCallback&&!this.freeze_calculation&&this.DisplayCallback(),this.use_storage&&window.localStorage.setItem("test.helicopter",JSON.stringify(this))}}}GetDerivedStats(){var t=Math.floor(1e-6+this.stats.mass/5);t=Math.max(t,1);var e=Math.floor(1e-6+(this.stats.mass+this.stats.wetmass)/5);e=Math.max(e,1);var s=Math.floor(1e-6+(this.stats.mass+this.stats.wetmass+this.stats.bomb_mass)/5);s=Math.max(s,1);var i=Math.floor(1e-6+(this.stats.drag+t)/5),a=i=Math.max(i,1),n=Math.floor(1e-6+(this.stats.drag+this.munitions.GetExternalMass()+t)/5);n=Math.max(n,1);var r=Math.floor(1e-6+this.stats.pitchspeed*Math.sqrt(2e3*this.stats.power/(9*i))),o=Math.floor(1e-6+this.stats.pitchspeed*Math.sqrt(2e3*this.stats.power/(9*a))),l=Math.floor(1e-6+this.stats.pitchspeed*Math.sqrt(2e3*this.stats.power/(9*n)));this.stats.mass<15&&-1==this.stats.warnings.findIndex((t=>t.source==A("Stat Mass")))&&this.stats.warnings.push({source:A("Stat Mass"),warning:A("Low Mass Warning"),color:q.YELLOW}),this.stats.drag+t<35&&-1==this.stats.warnings.findIndex((t=>t.source==A("Stat Drag")))&&this.stats.warnings.push({source:A("Stat Drag"),warning:A("Low Drag Warning"),color:q.YELLOW});var h=Math.max(1,Math.floor(1e-6+this.stats.liftbleed*t/Math.max(1,this.stats.wingarea))),c=Math.max(1,Math.floor(1e-6+this.stats.liftbleed*e/Math.max(1,this.stats.wingarea))),u=Math.max(Math.floor(1e-6+this.stats.liftbleed*s/Math.max(1,this.stats.wingarea))),_=this.engines.GetOverspeed(),m=Math.floor(1e-6+this.stats.power/t),p=Math.floor(1e-6+this.stats.power/e),d=Math.floor(1e-6+this.stats.power/s),g=Math.floor(1e-6+this.stats.pitchboost*r);d<2&&-1==this.stats.warnings.findIndex((t=>t.source==A("Helicopter Flight")))&&this.stats.warnings.push({source:A("Helicopter Flight"),warning:A("Helicopter Flight Warning"),color:q.WHITE}),r=Math.floor(1e-6+r*(1-.1*this.used.ragged)),o=Math.floor(1e-6+o*(1-.1*this.used.ragged)),l=Math.floor(1e-6+l*(1-.1*this.used.ragged));var f=this.stats.pitchstab+this.stats.latstab;this.stats.pitchstab>0&&this.stats.latstab>0?f+=2:this.stats.pitchstab<0&&this.stats.latstab<0&&(f-=2);var y=100+this.stats.control-t;f>10||f<-10?(y=-1/0,-1==this.stats.warnings.findIndex((t=>t.source==A("Derived Stability")))&&this.stats.warnings.push({source:A("Derived Stability"),warning:A("Stability Warning"),color:q.RED})):10==f?y-=4:f>6?y-=3:f>3?y-=2:f>0?y-=1:0==f?y+=0:f>-4?y+=1:f>-7?y+=2:f>-10?y+=3:-10==f&&(y+=4);var b=y+t-e,S=y+t-s;y=Math.floor(1e-6+y-5*this.used.sluggish),b=Math.floor(1e-6+b-5*this.used.sluggish),S=Math.floor(1e-6+S-5*this.used.sluggish);var w=1/0;w=Math.min(this.stats.maxstrain-t,this.stats.structure),this.optimization.final_ms=Math.floor(1e-6+1.5*this.optimization.GetMaxStrain()*w/10),w+=this.optimization.final_ms,(w=Math.floor(1e-6+w*(1-.2*this.used.fragile)))<10&&-1==this.stats.warnings.findIndex((t=>t.source==A("Stat Max Strain")))&&this.stats.warnings.push({source:A("Stat Max Strain"),warning:A("Max Strain Warning"),color:q.RED});var C=this.stats.toughness;C=Math.floor(1e-6+C*(1-.5*this.used.weak));var G=this.stats.structure,v=Math.max(1,Math.floor(1e-6+i/7)),E=v+1;v=Math.min(v,10),E=Math.min(E,10);var P=Math.floor(1e-6+t/2)+this.rotor.GetRotorBleed();h=0,c=0,u=0;var R=(P=Math.max(P,1))+1;R=Math.max(R,1),h=Math.floor(1e-6+h*(1+.2*this.used.hefty)),c=Math.floor(1e-6+c*(1+.2*this.used.hefty)),(l<=(u=Math.floor(1e-6+u*(1+.2*this.used.hefty)))||o<=c)&&-1==this.stats.warnings.findIndex((t=>t.source==A("Stall Speed")))&&this.stats.warnings.push({source:A("Stall Speed"),warning:A("Stall Speed Warning"),color:q.RED});var x=Math.floor(1e-6+this.stats.fuel/this.stats.fuelconsumption);x=Math.floor(1e-6+x*(1-.2*this.used.leaky)),isFinite(x)||(x=0),x<6&&-1==this.stats.warnings.findIndex((t=>t.source==A("Derived Fuel Uses")))&&this.stats.warnings.push({source:A("Derived Fuel Uses"),warning:A("Fuel Uses Warning"),color:q.RED});var I=1;(f>3||f<-3)&&I++;var M=0;I+=Math.min(this.accessories.GetMaxMassStress(),Math.floor(1e-6+t/10));var N=this.accessories.GetMaxTotalStress();I=Math.min(N,I),this.engines.GetMaxRumble()>0&&(M+=Math.max(1,this.engines.GetMaxRumble()),M=Math.floor(1e-6+M)),0==N&&(M=0);var T=Math.max(1,Math.floor(1e-6+this.stats.power/t*(23/this.stats.pitchspeed)/i)),k=Math.max(1,Math.floor(1e-6+this.stats.power/e*(23/this.stats.pitchspeed)/a)),L=Math.max(1,Math.floor(1e-6+this.stats.power/s*(23/this.stats.pitchspeed)/n));return isFinite(T)||(T=0,k=0,L=0),{DryMP:t,WetMP:e,WetMPwBombs:s,DPEmpty:i,DPFull:a,DPwBombs:n,MaxSpeedEmpty:r,MaxSpeedFull:o,MaxSpeedwBombs:l,StallSpeedEmpty:h,StallSpeedFull:c,StallSpeedFullwBombs:u,Overspeed:_,BoostEmpty:m,BoostFull:p,BoostFullwBombs:d,Dropoff:g,Stabiilty:f,HandlingEmpty:y,HandlingFull:b,HandlingFullwBombs:S,MaxStrain:w,Toughness:C,Structure:G,EnergyLoss:v,EnergyLosswBombs:E,TurnBleed:P,TurnBleedwBombs:R,FuelUses:x,ControlStress:I,RumbleStress:M,RateOfClimbFull:k,RateOfClimbEmpty:T,RateOfClimbwBombs:L}}VitalComponentList(){var t=this.GetDerivedStats(),e=[];e.push(A("Vital Part Controls"));for(let t=0;t<this.GetCockpits().GetNumberOfCockpits();t++)e.push(A("Seat #",t+1)+": "+A(this.GetCockpits().GetCockpit(t).GetName()));t.FuelUses>0&&e.push(A("Vital Part Fuel Tanks"));for(let t=0;t<this.GetEngines().GetNumberOfEngines();t++)this.GetEngines().GetEngine(t).GetUsePushPull()?(e.push(A("Vital Part Engine Pusher",t+1)),this.GetEngines().GetEngine(t).GetHasOilTank()&&e.push(A("Vital Part Oil Tank Pusher",t+1)),this.GetEngines().GetEngine(t).GetHasOilCooler()&&e.push(A("Vital Part Oil Cooler Pusher",t+1)),this.GetEngines().GetEngine(t).GetHasOilPan()&&e.push(A("Vital Part Oil Pan Pusher",t+1)),e.push(A("Vital Part Engine Puller",t+1)),this.GetEngines().GetEngine(t).GetHasOilTank()&&e.push(A("Vital Part Oil Tank Puller",t+1)),this.GetEngines().GetEngine(t).GetHasOilCooler()&&e.push(A("Vital Part Oil Cooler Puller",t+1)),this.GetEngines().GetEngine(t).GetHasOilPan()&&e.push(A("Vital Part Oil Pan Puller",t+1))):(e.push(A("Vital Part Engine",t+1)),this.GetEngines().GetEngine(t).GetHasOilTank()&&e.push(A("Vital Part Oil Tank",t+1)),this.GetEngines().GetEngine(t).GetHasOilCooler()&&e.push(A("Vital Part Oil Cooler",t+1)),this.GetEngines().GetEngine(t).GetHasOilPan()&&e.push(A("Vital Part Oil Pan",t+1)));for(let t=0;t<this.GetEngines().GetNumberOfRadiators();t++)e.push(A("Vital Part Radiator",t+1));this.IsElectrics()&&e.push(A("Vital Part Electrics"));var s=this.GetWeapons().GetWeaponList();for(let t=0;t<this.GetWeapons().GetWeaponSets().length;t++)e.push(A("Vital Part Weapon Set",t+1,s[this.GetWeapons().GetWeaponSets()[t].GetWeaponSelected()].abrv));return this.GetLandingGear().IsVital()&&e.push(A("Vital Part Landing Gear")),this.rotor.GetTailRotor()&&e.push(A("Vital Part Tail Rotor")),e}SetStorage(t){this.use_storage=t}Reset(){this.fromJSON(JSON.parse(this.reset_json),!1)}GetVersion(){return this.version}GetCommunicationName(){return this.accessories.GetCommunicationName()}GetAttackList(){return this.cockpits.GetAttackList()}GetVisibilityList(){return this.cockpits.GetVisibilityList()}GetStressList(){return this.cockpits.GetStressList()}GetEscapeList(){return this.cockpits.GetEscapeList()}GetCrashList(){return this.cockpits.GetCrashList()}GetReliabilityList(){return this.engines.GetReliabilityList()}GetMinIAF(){return this.engines.GetMinIAF()}GetMaxIAF(){return this.engines.GetMaxIAF()}GetMinAltitude(){return this.engines.GetMinAltitude()}GetMaxAltitude(){return this.engines.GetMaxAltitude()}GetGearName(){return this.gear.GetGearName()}GetIsFlammable(){return this.frames.GetIsFlammable()||this.engines.GetIsFlammable()}GetAircraftType(){return this.aircraft_type}GetEra(){return this.era}GetCockpits(){return this.cockpits}GetPassengers(){return this.passengers}GetEngines(){return this.engines}GetPropeller(){return this.propeller}GetFrames(){return this.frames}GetStabilizers(){return this.stabilizers}GetReinforcements(){return this.reinforcements}GetFuel(){return this.fuel}GetMunitions(){return this.munitions}GetCargoAndPassengers(){return this.cargo}GetLandingGear(){return this.gear}GetAccessories(){return this.accessories}GetOptimization(){return this.optimization}GetStats(){return this.stats}GetWeapons(){return this.weapons}IsElectrics(){return this.engines.IsElectrics()||this.accessories.IsElectrics()||this.cockpits.IsElectrics()}GetUsed(){return this.used}GetRotor(){return this.rotor}GetAlter(){return this.alter}GetElectrics(){let t={storage:0,equipment:[]};t=Ct(t,this.accessories.GetElectrics()),t=Ct(t,this.cockpits.GetElectrics()),t=Ct(t,this.alter.GetElectrics()),t=Ct(t,this.cargo.GetElectrics()),t=Ct(t,this.era.GetElectrics()),t=Ct(t,this.frames.GetElectrics()),t=Ct(t,this.fuel.GetElectrics()),t=Ct(t,this.gear.GetElectrics()),t=Ct(t,this.munitions.GetElectrics()),t=Ct(t,this.optimization.GetElectrics()),t=Ct(t,this.passengers.GetElectrics()),t=Ct(t,this.reinforcements.GetElectrics()),t=Ct(t,this.rotor.GetElectrics()),t=Ct(t,this.stabilizers.GetElectrics()),t=Ct(t,this.used.GetElectrics()),t.equipment=t.equipment.sort(((t,e)=>{var s=parseInt(t.charge);"-"==t.charge&&(s=0);var i=parseInt(e.charge);return"-"==e.charge&&(i=0),isNaN(s)&&isNaN(i)?0:isNaN(s)?-1:isNaN(i)?1:i-s})),t=Ct(this.engines.GetElectrics(),t),t=Ct(t,this.weapons.GetElectrics());for(let e of t.equipment){let t=parseInt(e.charge);!isNaN(t)&&t>0&&(e.charge="+"+e.charge)}return t}}var ae=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function a(t,e){if(!i[t]){i[t]={};for(let e=0;e<t.length;e++)i[t][t.charAt(e)]=e}return i[t][e]}var n={compressToBase64:function(t){if(null==t)return"";var s=n._compress(t,6,(function(t){return e.charAt(t)}));switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:n._decompress(t.length,32,(function(s){return a(e,t.charAt(s))}))},compressToUTF16:function(e){return null==e?"":n._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:n._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){var e=n.compress(t),s=new Uint8Array(2*e.length);for(let t=0,a=e.length;t<a;t++){var i=e.charCodeAt(t);s[2*t]=i>>>8,s[2*t+1]=i%256}return s},decompressFromUint8Array:function(e){if(null==e)return n.decompress(e);var s=new Array(e.length/2);for(let t=0,i=s.length;t<i;t++)s[t]=256*e[2*t]+e[2*t+1];var i=[];return s.forEach((function(e){i.push(t(e))})),n.decompress(i.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":n._compress(t,6,(function(t){return s.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),n._decompress(t.length,32,(function(e){return a(s,t.charAt(e))})))},compress:function(e){return n._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,s){if(null==t)return"";var i,a,n,r={},o={},l="",h="",c="",u=2,_=3,m=2,p=[],d=0,g=0;for(n=0;n<t.length;n+=1)if(l=t.charAt(n),Object.prototype.hasOwnProperty.call(r,l)||(r[l]=_++,o[l]=!0),h=c+l,Object.prototype.hasOwnProperty.call(r,h))c=h;else{if(Object.prototype.hasOwnProperty.call(o,c)){if(c.charCodeAt(0)<256){for(i=0;i<m;i++)d<<=1,g==e-1?(g=0,p.push(s(d)),d=0):g++;for(a=c.charCodeAt(0),i=0;i<8;i++)d=d<<1|1&a,g==e-1?(g=0,p.push(s(d)),d=0):g++,a>>=1}else{for(a=1,i=0;i<m;i++)d=d<<1|a,g==e-1?(g=0,p.push(s(d)),d=0):g++,a=0;for(a=c.charCodeAt(0),i=0;i<16;i++)d=d<<1|1&a,g==e-1?(g=0,p.push(s(d)),d=0):g++,a>>=1}0==--u&&(u=Math.pow(2,m),m++),delete o[c]}else for(a=r[c],i=0;i<m;i++)d=d<<1|1&a,g==e-1?(g=0,p.push(s(d)),d=0):g++,a>>=1;0==--u&&(u=Math.pow(2,m),m++),r[h]=_++,c=String(l)}if(""!==c){if(Object.prototype.hasOwnProperty.call(o,c)){if(c.charCodeAt(0)<256){for(i=0;i<m;i++)d<<=1,g==e-1?(g=0,p.push(s(d)),d=0):g++;for(a=c.charCodeAt(0),i=0;i<8;i++)d=d<<1|1&a,g==e-1?(g=0,p.push(s(d)),d=0):g++,a>>=1}else{for(a=1,i=0;i<m;i++)d=d<<1|a,g==e-1?(g=0,p.push(s(d)),d=0):g++,a=0;for(a=c.charCodeAt(0),i=0;i<16;i++)d=d<<1|1&a,g==e-1?(g=0,p.push(s(d)),d=0):g++,a>>=1}0==--u&&(u=Math.pow(2,m),m++),delete o[c]}else for(a=r[c],i=0;i<m;i++)d=d<<1|1&a,g==e-1?(g=0,p.push(s(d)),d=0):g++,a>>=1;0==--u&&(u=Math.pow(2,m),m++)}for(a=2,i=0;i<m;i++)d=d<<1|1&a,g==e-1?(g=0,p.push(s(d)),d=0):g++,a>>=1;for(;;){if(d<<=1,g==e-1){p.push(s(d));break}g++}return p.join("")},decompress:function(t){return null==t?"":""==t?null:n._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,s,i){var a,n,r,o,l,h,c,u=[],_=4,m=4,p=3,d="",g=[],f={val:i(0),position:s,index:1};for(a=0;a<3;a+=1)u[a]=a;for(r=0,l=Math.pow(2,2),h=1;h!=l;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=s,f.val=i(f.index++)),r|=(o>0?1:0)*h,h<<=1;switch(r){case 0:for(r=0,l=Math.pow(2,8),h=1;h!=l;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=s,f.val=i(f.index++)),r|=(o>0?1:0)*h,h<<=1;c=t(r);break;case 1:for(r=0,l=Math.pow(2,16),h=1;h!=l;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=s,f.val=i(f.index++)),r|=(o>0?1:0)*h,h<<=1;c=t(r);break;case 2:return""}for(u[3]=c,n=c,g.push(c);;){if(f.index>e)return"";for(r=0,l=Math.pow(2,p),h=1;h!=l;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=s,f.val=i(f.index++)),r|=(o>0?1:0)*h,h<<=1;switch(c=r){case 0:for(r=0,l=Math.pow(2,8),h=1;h!=l;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=s,f.val=i(f.index++)),r|=(o>0?1:0)*h,h<<=1;u[m++]=t(r),c=m-1,_--;break;case 1:for(r=0,l=Math.pow(2,16),h=1;h!=l;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=s,f.val=i(f.index++)),r|=(o>0?1:0)*h,h<<=1;u[m++]=t(r),c=m-1,_--;break;case 2:return g.join("")}if(0==_&&(_=Math.pow(2,p),p++),u[c])d=u[c];else{if(c!==m)return null;d=n+n.charAt(0)}g.push(d),u[m++]=n+d.charAt(0),n=d,0==--_&&(_=Math.pow(2,p),p++)}}};return n}();class ne extends n{constructor(t,e){super(),this.parts_JSON=t,this.heli=e,this.era=new N(this.heli.GetEra()),this.cockpits=new k(e.GetCockpits()),this.passengers=new L(e.GetPassengers()),this.engines=new lt(e.GetEngines()),this.frames=new ht(e.GetFrames()),this.stabilizers=new ct(e.GetStabilizers()),this.reinforcements=new ut(e.GetReinforcements()),this.load=new _t(e.GetFuel(),e.GetMunitions(),e.GetCargoAndPassengers()),this.gear=new mt(e.GetLandingGear()),this.accessories=new pt(e.GetAccessories()),this.optimization=new dt(e.GetOptimization()),this.weapons=new vt(e.GetWeapons()),this.used=new xt(e.GetUsed()),this.rotor=new It(e.GetRotor()),this.alter=new Mt(e.GetAlter()),document.getElementById("lbl_stats").textContent=A("Aircraft Stats Section Title");var s=document.getElementById("tbl_stats");this.InitStats(s),document.getElementById("lbl_derived").textContent=A("Aircraft Derived Section Title");var i=document.getElementById("tbl_derived");this.InitDerived(i),this.heli.SetDisplayCallback((()=>{this.UpdateDisplay()})),document.getElementById("lbl_acft_save_top").textContent=A("Aircraft Button Save"),document.getElementById("lbl_acft_save_bot").textContent=A("Aircraft Button Save"),document.getElementById("acft_save").onclick=()=>{this.SaveJSON()},document.getElementById("lbl_acft_load_top").textContent=A("Aircraft Button Load"),document.getElementById("lbl_acft_load_bot").textContent=A("Aircraft Button Load");var a=document.getElementById("acft_load");a.multiple=!1,a.accept="application/JSON",a.onchange=t=>{this.LoadJSON(a)};var n=document.getElementById("acft_load_text");n.onchange=()=>{this.LoadText(n)};var r=document.getElementById("acft_load_text2");r.onchange=()=>{this.LoadText(r)},document.getElementById("lbl_acft_save_link_top").textContent=A("Aircraft Button Copy As Link"),document.getElementById("lbl_acft_save_link_bot").textContent=A("Aircraft Button Copy As Link"),document.getElementById("acft_save_link").onclick=()=>{this.SaveLink()},this.cards=new At,document.getElementById("lbl_acft_save_dash_top").textContent=A("Aircraft Button Save Dashboard"),document.getElementById("lbl_acft_save_dash_bot").textContent=A("Aircraft Button Save Dashboard"),document.getElementById("acft_save_dash").onclick=()=>{this.SaveDash()},document.getElementById("lbl_acft_interactive_dash_top").textContent=A("Aircraft Button Interactive Dashboard"),document.getElementById("lbl_acft_interactive_dash_bot").textContent=A("Aircraft Button Interactive Dashboard"),document.getElementById("acft_interactive_dash").onclick=()=>{this.SaveInteractive()},document.getElementById("lbl_acft_save_npc_top").textContent=A("Aircraft Button Save NPC"),document.getElementById("lbl_acft_save_npc_bot").textContent=A("Aircraft Button Save NPC"),document.getElementById("acft_save_npc").onclick=()=>{this.SaveNPC()},document.getElementById("lbl_acft_reset_top").textContent=A("Aircraft Button Default Aircraft"),document.getElementById("lbl_acft_reset_bot").textContent=A("Aircraft Button Default Aircraft"),document.getElementById("acft_reset").onclick=()=>{this.heli.Reset(),this.derived.SetName(this.heli.name),this.heli.CalculateStats(),this.SetCollapse()},document.getElementById("lbl_acft_save_cat_top").textContent=A("Aircraft Button Save Catalog"),document.getElementById("lbl_acft_save_cat_bot").textContent=A("Aircraft Button Save Catalog"),document.getElementById("acft_save_cat").onclick=()=>{this.CatalogStats()},this.SetCollapse()}UpdateCard(){this.heli.name=this.derived.GetName();var t=this.heli.GetStats(),e=this.heli.GetDerivedStats();this.cards.name=this.heli.name,this.cards.acft_data.armour=this.heli.GetAccessories().GetEffectiveCoverage(),this.cards.acft_data.crash=t.crashsafety,this.cards.acft_data.dropoff=e.Dropoff,this.cards.acft_data.empty_boost=e.BoostEmpty,this.cards.acft_data.empty_hand=e.HandlingEmpty,this.cards.acft_data.empty_climb=e.RateOfClimbEmpty,this.cards.acft_data.empty_stall=e.StallSpeedEmpty,this.cards.acft_data.empty_speed=Math.floor(1e-6+e.MaxSpeedEmpty),this.cards.acft_data.energy_loss=e.EnergyLoss,this.cards.acft_data.escape=this.heli.GetCockpits().GetEscapeList()[0],this.cards.acft_data.fuel=e.FuelUses,this.cards.acft_data.full_bomb_boost=e.BoostFullwBombs,this.cards.acft_data.full_bomb_hand=e.HandlingFullwBombs,this.cards.acft_data.full_bomb_climb=e.RateOfClimbwBombs,this.cards.acft_data.full_bomb_stall=e.StallSpeedFullwBombs,this.cards.acft_data.full_bomb_speed=e.MaxSpeedwBombs,this.cards.acft_data.full_boost=e.BoostFull,this.cards.acft_data.full_hand=e.HandlingFull,this.cards.acft_data.full_climb=e.RateOfClimbFull,this.cards.acft_data.full_stall=e.StallSpeedFull,this.cards.acft_data.full_speed=Math.floor(1e-6+e.MaxSpeedFull),this.cards.acft_data.half_bomb_boost=Math.floor((e.BoostFullwBombs+e.BoostEmpty)/2),this.cards.acft_data.half_bomb_hand=Math.floor((e.HandlingFullwBombs+e.HandlingEmpty)/2),this.cards.acft_data.half_bomb_climb=Math.floor(1e-6+(e.RateOfClimbEmpty+e.RateOfClimbwBombs)/2),this.cards.acft_data.half_bomb_stall=Math.floor((e.StallSpeedFullwBombs+e.StallSpeedEmpty)/2),this.cards.acft_data.half_bomb_speed=Math.floor(1e-6+(e.MaxSpeedEmpty+e.MaxSpeedwBombs)/2),this.cards.acft_data.half_boost=Math.floor((e.BoostFull+e.BoostEmpty)/2),this.cards.acft_data.half_hand=Math.floor((e.HandlingFull+e.HandlingEmpty)/2),this.cards.acft_data.half_climb=Math.floor(1e-6+(e.RateOfClimbEmpty+e.RateOfClimbFull)/2),this.cards.acft_data.half_stall=Math.floor((e.StallSpeedFull+e.StallSpeedEmpty)/2),this.cards.acft_data.half_speed=Math.floor(1e-6+(e.MaxSpeedEmpty+e.MaxSpeedFull)/2),this.cards.acft_data.max_strain=e.MaxStrain;var s=[],i=this.heli.GetMunitions().GetBombCount(),a=this.heli.GetMunitions().GetRocketCount(),n=this.heli.GetMunitions().GetInternalBombCount();if(i>0){var r=Math.min(i,n),o=Math.max(0,i-r);if(r>0&&s.push(A(" Bomb Mass Internally.",r)),o>0&&s.push(A(" Bomb Mass Externally.",o)),r>0){var l=Math.min(r,this.heli.GetMunitions().GetMaxBombSize());s.push(A("Largest Internal Bomb",l.toString()))}n-=r}if(a>0){var h=Math.min(a,n),c=Math.max(0,a-h);h>0&&s.push(A(" Rocket Mass Internally.",h)),c>0&&s.push(A(" Rocket Mass Externally.",c))}this.cards.acft_data.ordinance=s,this.cards.acft_data.stability=e.Stabiilty,this.cards.acft_data.stress=this.heli.GetCockpits().GetStressList()[0][0],this.cards.acft_data.toughness=e.Toughness,this.cards.acft_data.turn_bleed=e.TurnBleed,this.cards.acft_data.visibility=this.heli.GetCockpits().GetVisibilityList()[0],this.cards.acft_data.vital_parts=this.heli.VitalComponentList(),this.cards.acft_data.warnings=t.warnings}UpdateWeaponCard(t){var e=this.heli.GetWeapons().GetWeaponList(),s=this.heli.GetWeapons().GetDirectionList(),i=Et(t,e);t.IsPlural()&&(i=t.GetWeaponCount().toString()+"x "+i);var a=t.GetDirection(),n="";n+="[";for(let t=0;t<s.length;t++)a[t]&&(n+=A(s[t])+" ");n=n.substr(0,n.length-1),n+="] ";var r=t.GetFinalWeapon();this.cards.weap_data.ammo=t.GetShots(),this.cards.weap_data.ap=r.ap,this.cards.weap_data.hits=t.GetHits(),"PR"==e[t.GetWeaponSelected()].abrv?this.cards.weap_data.damage=[5,5,5,5]:this.cards.weap_data.damage=[r.damage*this.cards.weap_data.hits[0],r.damage*this.cards.weap_data.hits[1],r.damage*this.cards.weap_data.hits[2],r.damage*this.cards.weap_data.hits[3]],this.cards.weap_data.jam=t.GetJam(),this.cards.weap_data.tags=[n],this.cards.weap_data.type=i,this.cards.weap_data.abrv=r.abrv,this.cards.weap_data.reload=r.reload,this.cards.weap_data.tags.concat(Pt(t))}UpdateEngineCard(t){var e=t.GetCurrentStats();if(this.cards.eng_data.reliability=t.GetReliability(),this.cards.eng_data.overspeed=t.GetOverspeed(),this.cards.eng_data.altitude=e.altitude,t.NeedCooling()?this.cards.eng_data.radiator=t.GetRadiator():this.cards.eng_data.radiator=-1,this.cards.eng_data.notes=[],e.pulsejet)this.cards.eng_data.notes.push(A("Pulsejet")),""!=t.GetSelectedList()&&(s=at().get(t.GetSelectedList()).get_name(e.name)).power>0&&s.starter&&this.cards.eng_data.notes.push(A("Starter"));else if(t.IsRotary()&&t.IsTractor()?this.cards.eng_data.notes.push(A("Turns Right")):t.IsRotary()&&t.IsPusher()&&this.cards.eng_data.notes.push(A("Turns Left")),""!=t.GetSelectedList()){var s=at().get(t.GetSelectedList()).get_name(e.name);this.cards.eng_data.min_IAF=s.min_IdealAlt,s.upgrades[1]?this.cards.eng_data.notes.push(A("War Emergency Power")):s.compressor_count>0&&1==s.compressor_type&&this.cards.eng_data.notes.push(A("War Emergency Power from altitudes 0-9"))}}UpdateRadiatorCard(t){this.cards.rad_data.mount_type=A(t.GetMountList()[t.GetMountIndex()].name),this.cards.rad_data.coolant_type=A(t.GetCoolantList()[t.GetCoolantIndex()].name)}LoadJSON(t){if(0!=t.files.length){var e=t.files[0],s=new FileReader;s.onloadend=()=>{try{var t=JSON.parse(s.result);new ie(this.parts_JSON,!1).fromJSON(t)&&(t=JSON.parse(s.result),console.log(t),this.heli.fromJSON(t),this.derived.SetName(this.heli.name),this.heli.CalculateStats(),this.SetCollapse())}catch(t){console.error(t,t.stack)}},s.readAsText(e),t.value=""}}Stress2Str(t){var e="";for(let s=0;s<t.length-1;s++)2==t[s].length&&t[s][0]!=t[s][1]?e+=t[s][0].toString()+"("+t[s][1].toString()+"), ":e+=t[s][0].toString()+", ";if(t.length>0){var s=t.length-1;2==t[s].length&&t[s][0]!=t[s][1]?e+=t[s][0].toString()+"("+t[s][1].toString()+")":e+=t[s][0].toString()}return e}CatalogStats(){this.heli.name=this.derived.GetName();const t=this.heli.GetStats(),e=this.heli.GetDerivedStats();var s="\\FCPlane[Nickname=\\FrameDefault{Not Set}, %Box Text = {}, Image = {},\n";s+=R.Format("Name={{0}}, Price={1}, Used={2}, Upkeep={3},\n",this.heli.name,t.cost,Math.floor(1e-6+t.cost/2),t.upkeep),s+="Stats = {\n",t.bomb_mass>0&&(s+=R.Format("Full Load & {0} & {1} & {2} & {3} & {4} \\\\\n",e.BoostFullwBombs,e.HandlingFullwBombs,e.RateOfClimbwBombs,e.StallSpeedFullwBombs,e.MaxSpeedwBombs),s+="\\nicefrac{1}{2}"+R.Format(", Bombs & {0} & {1} & {2} & {3} & {4}\\\\\n",Math.floor(1e-6+(e.BoostEmpty+e.BoostFullwBombs)/2),Math.floor(1e-6+(e.HandlingEmpty+e.HandlingFullwBombs)/2),Math.floor(1e-6+(e.RateOfClimbEmpty+e.RateOfClimbwBombs)/2),Math.floor(1e-6+(e.StallSpeedEmpty+e.StallSpeedFullwBombs)/2),Math.floor(1e-6+(e.MaxSpeedEmpty+e.MaxSpeedwBombs)/2))),s+=R.Format("Full Fuel & {0} & {1} & {2} & {3} & {4}\\\\\n",e.BoostFull,e.HandlingFull,e.RateOfClimbFull,e.StallSpeedFull,e.MaxSpeedFull),s+=R.Format("Half Fuel & {0} & {1} & {2} & {3} & {4}\\\\\n",Math.floor(1e-6+(e.BoostEmpty+e.BoostFull)/2),Math.floor(1e-6+(e.HandlingEmpty+e.HandlingFull)/2),Math.floor(1e-6+(e.RateOfClimbEmpty+e.RateOfClimbFull)/2),Math.floor(1e-6+(e.StallSpeedEmpty+e.StallSpeedFull)/2),Math.floor(1e-6+(e.MaxSpeedEmpty+e.MaxSpeedFull)/2)),s+=R.Format("Empty & {0} & {1} & {2} & {3} & {4}\\\\\n","-",e.HandlingEmpty,"-",e.StallSpeedEmpty,0),s+="},\n";var i=this.heli.VitalComponentList(),a=new Map;for(let t of i)t=t.replace(/Weapon Set #.*/g,"Guns").trim(),t=t.replace(/#.*/g,"").trim(),a.has(t)?a.set(t,a.get(t)+1):a.set(t,1);i=[];for(let t of a.keys())1==a.get(t)?i.push(t):i.push(t+" x"+a.get(t).toString());s+="Vital Parts = {"+R.Join(", ",i)+"},\n";var n=[];for(let t=0;t<this.heli.GetCockpits().GetNumberOfCockpits();t++)n.push(A(this.heli.GetCockpits().GetCockpit(t).GetName()));s+="Crew = {"+R.Join(", ",n)+"},\n",s+="Propulsion = {"+R.Format("Dropoff {0}, Reliability {1}, Overspeed {2}, Ideal Alt. {3}, Fuel {4}",e.Dropoff,R.Join("/",this.heli.GetReliabilityList()),e.Overspeed,this.heli.GetMinAltitude().toString()+"-"+this.heli.GetMaxAltitude().toString(),e.FuelUses)+"},\n",s+="Aerodynamics = {",0==t.bomb_mass?s+=R.Format("Visibility {0}, Stability {1}, Energy Loss {2}, Turn Bleed {3}",R.Join("/",this.heli.GetVisibilityList()),e.Stabiilty,e.EnergyLoss,e.TurnBleed):s+=R.Format("Visibility {0}, Stability {1}, Energy Loss {2}, Turn Bleed {3} ({4})",R.Join("/",this.heli.GetVisibilityList()),e.Stabiilty,e.EnergyLoss,e.TurnBleed,e.TurnBleedwBombs),s+="},\nSurvivability = {",s+=R.Format("Toughness {0}, Max Strain {1}, Escape {2}, Crash Safety {3}, Flight Stress {4}",e.Toughness,e.MaxStrain,R.Join("/",this.heli.GetEscapeList()),R.Join("/",this.heli.GetCrashList()),this.Stress2Str(this.heli.GetStressList()))+"},\n",s+="Armament = {";const r=this.heli.GetWeapons().GetWeaponList(),l=this.heli.GetWeapons().GetDirectionList(),h=this.heli.GetMunitions().GetBombCount(),c=this.heli.GetMunitions().GetRocketCount();var u=this.heli.GetMunitions().GetInternalBombCount();if(h>0){const t=Math.min(h,u),e=Math.max(0,h-t);t>0&&(s+=A(" Bomb Mass Internally.",t)),e>0&&(s+=A(" Bomb Mass Externally.",e)),t>0&&(s+=A("Largest Internal Bomb",Math.min(t,this.heli.GetMunitions().GetMaxBombSize()).toString())),u-=t,s+="\\\\\n"}if(c>0){const t=Math.min(c,u),e=Math.max(0,c-t);t>0&&(s+=A(" Rocket Mass Internally.",t)),e>0&&(s+=A(" Rocket Mass Externally.",e)),s+="\\\\\n"}const _=this.heli.GetWeapons().GetWeaponSets();for(let t=0;t<_.length;t++){const e=_[t];let i=Rt(e,r,l);var m="fires";for(let t of e.GetWeapons())t.GetSynchronization()!=ft.INTERRUPT&&t.GetSynchronization()!=ft.SYNCH||(m=" fires");i=i.replace("fires",m),s+=i+"\\\\\n"}for(let e of t.warnings)s+=e.source+":  "+e.warning+"\\\\\n";o(s=(s+="},\nLink = {"+this.MakeLink()+"}\n]{\n\n\n}").replaceAll("#","\\#"),this.heli.name+"_"+this.heli.GetVersion()+".txt","txt")}LoadText(t){try{var e=JSON.parse(t.value);new ie(this.parts_JSON,!1).fromJSON(e)&&(this.heli.fromJSON(e),this.derived.SetName(this.heli.name),this.heli.CalculateStats(),this.SetCollapse())}catch{G(t.parentElement)}finally{t.value=""}}SaveJSON(){this.heli.name=this.derived.GetName(),o(JSON.stringify(this.heli.toJSON()),this.heli.name+"_"+this.heli.GetVersion()+".json","json")}SetCollapse(){this.alter.SetCollapse(),this.gear.SetCollapse(),this.optimization.SetCollapse(),this.passengers.SetCollapse(),this.stabilizers.SetCollapse(),this.used.SetCollapse()}MakeLink(){this.heli.name=this.derived.GetName();var t=new W;this.heli.serialize(t);var e=function(t){let e="";const s=new Uint8Array(t),i=s.byteLength;for(let t=0;t<i;t++)e+=String.fromCharCode(s[t]);return e}(t.FinalArray()),s=ae.compressToEncodedURIComponent(e);return location.protocol+"//"+location.host+location.pathname+"?json="+s}SaveLink(){!function(t){const e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}(this.MakeLink())}SaveDash(){this.UpdateCard(),this.cards.SaveDash();var t=this.heli.GetWeapons().GetWeaponSets();for(let e=0;e<t.length;e++)this.UpdateWeaponCard(t[e]),this.cards.SaveWeapon(e);for(let t=0;t<this.heli.GetEngines().GetNumberOfEngines();t++){let s=this.heli.GetEngines().GetEngine(t);if(this.UpdateEngineCard(s),s.GetUsePushPull()){var e=this.cards.eng_data.reliability.split("/");this.cards.eng_data.reliability=e[0].toString(),this.cards.SaveEngine(t,St.PULLER),this.cards.eng_data.reliability=e[0].toString(),this.cards.SaveEngine(t,St.PUSHER)}else this.cards.SaveEngine(t)}for(let t=0;t<this.heli.GetEngines().GetNumberOfRadiators();t++)this.UpdateRadiatorCard(this.heli.GetEngines().GetRadiator(t)),this.cards.SaveRadiator(t)}SaveInteractive(){const t=location.protocol+"//"+location.host+"/InteractiveDash/index.html?json="+btoa(this.InteractiveDash());window.open(t,"_blank")}InteractiveDash(){this.heli.name=this.derived.GetName();for(var t=this.heli.GetStats(),e=this.heli.GetDerivedStats(),s=this.heli.VitalComponentList(),i=!1;s.length>10;)s.pop(),i=!0;for(i&&(s.pop(),s.push("And More. See Plane Builder for full list."));s.length<10;)s.push("");var a=this.heli.GetAccessories().GetEffectiveCoverage(),n="";for(let t=0;t<a.length;++t){let e=t+1;a[t]>0&&(n+=""!=n?", ":A("Armour")+" ",n+=e.toString()+"/+"+(11-a[t]).toString())}var r=[],o=this.heli.GetMunitions().GetBombCount(),l=this.heli.GetMunitions().GetRocketCount(),h=this.heli.GetMunitions().GetInternalBombCount();if((o>0||l>0)&&r.push("Current load here."),o>0){var c=Math.min(o,h),u=Math.max(0,o-c);if(c>0&&r.push(A(" Bomb Mass Internally.",c)),u>0&&r.push(A(" Bomb Mass Externally.",u)),c>0){var _=Math.min(c,this.heli.GetMunitions().GetMaxBombSize());r.push(A("Largest Internal Bomb",_.toString()))}h-=c}if(l>0){var m=Math.min(l,h),p=Math.max(0,l-m);m>0&&r.push(A(" Rocket Mass Internally.",m)),p>0&&r.push(A(" Rocket Mass Externally.",p))}for(;r.length<5;)r.push("");var d="";for(let e of t.warnings)d+=e.source+": "+e.warning+"\n";var g={altitude:0,airspeed:0,fuel:e.FuelUses,dropoff:e.Dropoff,visibility:this.heli.GetCockpits().GetCockpit(0).GetVisibility(),energy_loss:e.EnergyLoss,turn_bleed:e.TurnBleed,stability:e.Stabiilty,stress:this.heli.GetCockpits().GetCockpit(0).GetFlightStress()[0],plane_escape:this.heli.GetCockpits().GetCockpit(0).GetEscape(),crash:this.heli.GetCockpits().GetCockpit(0).GetCrash(),max_toughness:e.Toughness,current_toughness:e.Toughness,max_strain:e.MaxStrain,current_strain:e.MaxStrain,g_force:0,kills:0,full_load_boost:e.BoostFullwBombs,full_load_handling:e.HandlingFullwBombs,full_load_climb:e.RateOfClimbwBombs,full_load_stall:e.StallSpeedFullwBombs,full_load_speed:e.MaxSpeedwBombs,half_fuel_bombs_boost:Math.floor((e.BoostFullwBombs+e.BoostEmpty)/2),half_fuel_bombs_handling:Math.floor((e.HandlingFullwBombs+e.HandlingEmpty)/2),half_fuel_bombs_climb:Math.floor(1e-6+(e.RateOfClimbEmpty+e.RateOfClimbwBombs)/2),half_fuel_bombs_stall:Math.floor((e.StallSpeedFullwBombs+e.StallSpeedEmpty)/2),half_fuel_bombs_speed:Math.floor(1e-6+(e.MaxSpeedEmpty+e.MaxSpeedwBombs)/2),full_fuel_no_bombs_boost:e.BoostFull,full_fuel_no_bombs_handling:e.HandlingFull,full_fuel_no_bombs_climb:e.RateOfClimbFull,full_fuel_no_bombs_stall:e.StallSpeedFull,full_fuel_no_bombs_speed:Math.floor(1e-6+e.MaxSpeedFull),half_fuel_no_bombs_boost:Math.floor((e.BoostFull+e.BoostEmpty)/2),half_fuel_no_bombs_handling:Math.floor((e.HandlingFull+e.HandlingEmpty)/2),half_fuel_no_bombs_climb:Math.floor(1e-6+(e.RateOfClimbEmpty+e.RateOfClimbFull)/2),half_fuel_no_bombs_stall:Math.floor((e.StallSpeedFull+e.StallSpeedEmpty)/2),half_fuel_no_bombs_speed:Math.floor(1e-6+(e.MaxSpeedEmpty+e.MaxSpeedFull)/2),empty_boost:0,empty_handling:e.HandlingEmpty,empty_climb:0,empty_stall:e.StallSpeedEmpty,empty_speed:0,vital_part_1:s[0],vital_part_2:s[1],vital_part_3:s[2],vital_part_4:s[3],vital_part_5:s[4],vital_part_6:s[5],vital_part_7:s[6],vital_part_8:s[7],vital_part_9:s[8],vital_part_10:s[9],armor:n,max_bomb_load:r[0],ordinance_1:r[1],ordinance_2:r[2],ordinance_3:r[3],ordinance_4:r[4],notes:d,full_load_selected:!0,half_fuel_bombs_selected:!1,full_fuel_no_bombs_selected:!1,half_fuel_no_bombs_selected:!1,empty_selected:!1,engines:this.InteractiveEngines(),weapons:this.InteractiveWeapons()};return JSON.stringify(g)}InteractiveEngines(){var t=[];for(let n=0;n<this.heli.GetEngines().GetNumberOfEngines();n++){let r=this.heli.GetEngines().GetEngine(n),o={rpm:0,wear:0,reliability:r.GetReliability(),ideal_altitide:R.Format("{0}-{1}",r.GetMinAltitude(),r.GetMaxAltitude()),overspeed:r.GetOverspeed(),notes:""};var e,s=r.GetCurrentStats(),i=[];if(s.pulsejet?(i.push(A("Pulsejet")),(e=at().get(r.GetSelectedList()).get_name(s.name)).power>0&&e.starter&&i.push(A("Starter"))):(r.IsRotary()&&r.IsTractor()?i.push(A("Turns Right")):r.IsRotary()&&r.IsPusher()&&i.push(A("Turns Left")),(e=at().get(r.GetSelectedList()).get_name(s.name)).upgrades[1]?i.push(A("War Emergency Power")):e.compressor_count>0&&1==e.compressor_type&&i.push(A("War Emergency Power from altitudes 0-9"))),o.notes=R.Join(", ",i),r.GetUsePushPull()){var a=o.reliability.split("/");o.reliability=a[0].toString(),t.push(JSON.stringify(o)),o.reliability=a[0].toString(),t.push(JSON.stringify(o))}else t.push(JSON.stringify(o))}return t}InteractiveWeapons(){var t=[];for(let h of this.heli.GetWeapons().GetWeaponSets()){var e=this.heli.GetWeapons().GetWeaponList(),s=h.GetHits(),i=[];"PR"==e[h.GetWeaponSelected()].abrv?(i.push(5),i.push(5),i.push(5),i.push(5)):(i.push(Math.floor(1e-6+e[h.GetWeaponSelected()].damage*s[0])),i.push(Math.floor(1e-6+e[h.GetWeaponSelected()].damage*s[1])),i.push(Math.floor(1e-6+e[h.GetWeaponSelected()].damage*s[2])),i.push(Math.floor(1e-6+e[h.GetWeaponSelected()].damage*s[3])));var a=h.GetFinalWeapon(),n=[];let c={type:Et(h,e),ammo:h.GetShots(),ap:a.ap,jam:h.GetJam(),knife_hits:s[0],close_hits:s[1],long_hits:s[2],extreme_hits:s[3],knife_damage:i[0],close_damage:i[1],long_damage:i[2],extreme_damage:i[3],tags:""};var r=this.heli.GetWeapons().GetDirectionList();h.IsPlural()&&(c.type=h.GetWeaponCount().toString()+"x "+c.type);var o=h.GetDirection(),l="";l+="[";for(let t=0;t<r.length;t++)o[t]&&(l+=A(r[t])+" ");l=l.substr(0,l.length-1),l+="]",n.push(l),n.concat(Pt(h)),c.tags=R.Join(", ",n),t.push(JSON.stringify(c))}return t}SaveNPC(){this.UpdateCard(),this.cards.lowest_overspeed=-1;for(let e=0;e<this.heli.GetEngines().GetNumberOfEngines();e++){var t=this.heli.GetEngines().GetEngine(e);(t.GetOverspeed()<this.cards.lowest_overspeed||this.cards.lowest_overspeed<0)&&(this.cards.lowest_overspeed=t.GetOverspeed())}this.cards.all_weapons=[];var e=this.heli.GetWeapons().GetWeaponSets();for(let t=0;t<e.length;t++)this.UpdateWeaponCard(e[t]),this.cards.all_weapons.push(Object.assign({},this.cards.weap_data));this.cards.SaveNPC()}InitStats(t){var e=document.createDocumentFragment(),s=w(e);c(s,A("Stat Lift Bleed")),c(s,A("Stat Drag")),c(s,A("Stat Mass")),c(s,A("Stat Wet Mass")),c(s,A("Stat Bomb Mass")),c(s,A("Stat Cost")),c(s,A("Stat Upkeep")),s=w(e),this.d_lift=s.insertCell(),this.d_drag=s.insertCell(),this.d_mass=s.insertCell(),this.d_wmas=s.insertCell(),this.d_bmas=s.insertCell(),this.d_cost=s.insertCell(),this.d_upkp=s.insertCell(),c(s=w(e),A("Stat Control")),c(s,A("Stat Pitch Stability")),c(s,A("Stat Lateral Stability")),c(s,A("Stat Wing Area")),c(s,A("Stat Raw Strain")),c(s,A("Stat Structure")),c(s,A("Stat Toughness")),s=w(e),this.d_cont=s.insertCell(),this.d_pstb=s.insertCell(),this.d_lstb=s.insertCell(),this.d_wara=s.insertCell(),this.d_mstr=s.insertCell(),this.d_strc=s.insertCell(),this.d_tugh=s.insertCell(),c(s=w(e),A("Stat Power")),c(s,A("Stat Fuel Consumption")),c(s,A("Stat Fuel")),c(s,A("Stat Pitch Speed")),c(s,A("Stat Pitch Boost")),c(s,A("Stat Charge")),c(s,A("Stat Crash Safety")),s=w(e),this.d_powr=s.insertCell(),this.d_fcom=s.insertCell(),this.d_fuel=s.insertCell(),this.d_pspd=s.insertCell(),this.d_pbst=s.insertCell(),this.d_chrg=s.insertCell(),this.d_crsh=s.insertCell(),t.appendChild(e)}InitDerived(t){this.derived=new Nt(t)}UpdateStats(t){var e=R.Format("{0} + {1} ({2}/5)",t.drag,Math.floor(1e-6+t.mass/5),(t.drag+Math.floor(1e-6+t.mass/5))%5),s=R.Format("{0} ({1}/5)",t.mass,t.mass%5);E(this.d_lift,t.liftbleed.toString(),!1),E(this.d_drag,e),E(this.d_mass,s),E(this.d_wmas,t.wetmass.toString(),!1),E(this.d_bmas,t.bomb_mass.toString(),!1),E(this.d_cost,t.cost.toString(),!1),E(this.d_upkp,t.upkeep.toString(),!1),E(this.d_cont,t.control.toString(),!0),E(this.d_pstb,t.pitchstab.toString(),!0),E(this.d_lstb,t.latstab.toString(),!0),E(this.d_powr,t.power.toString(),!0),E(this.d_fcom,t.fuelconsumption.toString(),!1),E(this.d_fuel,t.fuel.toString(),!0),E(this.d_pspd,(Math.round(10*t.pitchspeed)/10).toString(),!0),E(this.d_pbst,(Math.round(10*t.pitchboost)/10).toString(),!0),E(this.d_wara,t.wingarea.toString(),!0),E(this.d_mstr,t.maxstrain.toString(),!0),E(this.d_strc,t.structure.toString(),!0),E(this.d_tugh,t.toughness.toString(),!0),E(this.d_chrg,t.charge.toString(),!0),E(this.d_crsh,t.crashsafety.toString(),!0)}UpdateDerived(t,e){this.derived.GetName()!=A("Derived Aircraft Name")&&(this.heli.name=this.derived.GetName()),this.derived.UpdateDisplay(this.heli,t,e)}UpdateDisplay(){var t=this.heli.GetStats(),e=this.heli.GetDerivedStats();this.heli.GetAircraftType(),this.era.UpdateDisplay(),this.cockpits.UpdateDisplay(),this.passengers.UpdateDisplay(),this.engines.UpdateDisplay(),this.frames.UpdateDisplay(),this.stabilizers.UpdateDisplay(),this.reinforcements.UpdateDisplay(),this.load.UpdateDisplay(),this.load.UpdateFuelUses(t.fuel/t.fuelconsumption),this.gear.UpdateDisplay(),this.accessories.UpdateDisplay(),this.optimization.UpdateDisplay(),this.weapons.UpdateDisplay(),this.used.UpdateDisplay(),this.rotor.UpdateDisplay(),this.rotor.UpdateMaxStrain(e.MaxStrain),this.alter.UpdateDisplay(),this.UpdateStats(t),this.UpdateDerived(t,e)}}const re=JSON.parse('{"version":"12.7","era":{"options":[{"name":"Pioneer","liftbleed":30,"maxbomb":0.166666666666,"cost":-2,"cant_lift":4,"pitchstab":0},{"name":"WWI","liftbleed":25,"maxbomb":0.2,"cant_lift":3,"pitchstab":0,"cost":0},{"name":"Roaring 20s","liftbleed":22,"maxbomb":0.25,"cost":5,"cant_lift":1,"pitchstab":0},{"name":"Coming Storm","liftbleed":22,"maxbomb":0.333333333333,"cost":10,"cant_lift":0,"pitchstab":2},{"name":"WWII","liftbleed":20,"maxbomb":0.333333333333,"cost":15,"cant_lift":0,"pitchstab":2},{"name":"Last Hurrah","liftbleed":18,"maxbomb":0.5,"cost":20,"cant_lift":0,"pitchstab":2}]},"cockpit":{"options":[{"name":"Open","era":"Pioneer","mass":1,"drag":3,"escape":2,"visibility":1,"exposed":true},{"name":"Windscreen","era":"Pioneer","mass":2,"drag":1,"escape":2,"cost":1,"visibility":1,"exposed":true},{"name":"Sealed","era":"Pioneer","mass":2,"escape":-3,"cost":1,"flightstress":-1,"visibility":-99,"warning":"Sealed Warning","exposed":false},{"name":"Narrow Canopy","era":"WWI","mass":3,"cost":3,"flightstress":-1,"visibility":-1,"exposed":false},{"name":"Bubble Canopy","era":"WWII","mass":3,"drag":-3,"cost":8,"flightstress":-1,"exposed":false}],"upgrades":[{"name":"Co-Pilot Controls","era":"Pioneer","cost":1,"flightstress":-2,"visibility":0,"mass":0,"escape":0,"charge":0,"control":0},{"name":"Escape Hatch","era":"Pioneer","mass":1,"escape":3,"cost":2,"flightstress":0,"visibility":0,"charge":0},{"name":"Ejection Seat","era":"Last Hurrah","mass":2,"escape":5,"cost":4,"flightstress":0,"visibility":0,"charge":0},{"name":"Connectivity","era":"Pioneer","mass":1,"escape":0,"cost":0,"flightstress":0,"visibility":0,"charge":0},{"name":"Oxygen Mask","era":"WWI","warning":"Oxygen Mask Warning","charge":-1,"cost":2},{"name":"Isolated","era":"Pioneer","mass":1,"drag":5,"escape":-2,"cost":1,"flightstress":1,"visibility":2,"warning":"Isolated Warning"}],"safety":[{"name":"Padding","era":"Pioneer","cost":1,"warning":"Injury Reduction Warning"},{"name":"Harness","era":"Pioneer","escape":-1,"cost":1,"warning":"Injury Reduction Warning"},{"name":"Fast Release System","era":"Coming Storm","escape":2,"cost":1},{"name":"Roll Bar","era":"WWI","mass":2,"warning":"Injury Reduction Warning"},{"name":"Flare Slot","era":"Roaring 20s","cost":1,"warning":"Flare Slot Warning"},{"name":"Basic Fan","era":"Pioneer","charge":1e-9,"visibility":-1,"warning":"Basic Fan Warning"}],"gunsights":[{"name":"X1 Collimated Gunsight","era":"WWI","visibility":-1,"attack":1,"cost":2,"warning":"X1 Collimated Gunsight Warning","charge":0},{"name":"Telescopic Gunsight","era":"WWI","visibility":-1,"attack":0,"cost":3,"warning":"Telescopic Gunsight Warning","charge":0},{"name":"Illuminated Reflex Sight","era":"WWI","visibility":-1,"attack":2,"charge":1e-9,"cost":6,"warning":"Illuminated Reflex Sight Warning"},{"name":"Gyro Gunsight","era":"WWII","visibility":-1,"attack":2,"charge":1e-9,"cost":12,"warning":"Gyro Gunsight Warning"}]},"passengers":{},"engines":{"mounts":[{"name":"Forward Internal","era":"Pioneer","reqsections":2,"pitchstab":2,"visibility":-1,"strainfactor":0,"dragfactor":0,"massfactor":1,"location":"fuselage","powerfactor":1,"helicopter":true,"pushpull":false,"turbine":false,"reqED":false,"reqTail":false},{"name":"Center Internal","era":"Pioneer","reqsections":1,"strainfactor":0,"dragfactor":0,"massfactor":1,"location":"fuselage","powerfactor":1,"helicopter":true,"pushpull":false,"turbine":false,"reqED":false,"reqTail":false},{"name":"Rear Internal","era":"Pioneer","reqsections":1,"pitchstab":-4,"strainfactor":0,"dragfactor":0,"massfactor":1,"location":"fuselage","powerfactor":1,"helicopter":true,"pushpull":false,"turbine":false,"reqED":false,"reqTail":false},{"name":"Center Pod","era":"Pioneer","drag":5,"reqsections":1,"visibility":-1,"strainfactor":0,"dragfactor":0,"massfactor":1,"location":"fuselage","powerfactor":1,"helicopter":true,"pushpull":false,"turbine":false,"reqED":false,"reqTail":false},{"name":"Rear Pod","era":"Pioneer","drag":5,"reqsections":1,"pitchstab":-4,"strainfactor":0,"dragfactor":0,"massfactor":1,"location":"fuselage","powerfactor":1,"helicopter":true,"pushpull":false,"turbine":false,"reqED":false,"reqTail":false},{"name":"Not Allowed","era":"Pioneer","drag":9999,"reqsections":0,"pitchstab":0,"strainfactor":0,"dragfactor":0,"massfactor":0,"location":"fuselage","powerfactor":0,"helicopter":true,"pushpull":false,"turbine":true,"reqED":false,"reqTail":false}],"radiator-type":[{"name":"Panel","era":"Pioneer","dragpercool":0.5},{"name":"Box","era":"Pioneer","drag":2,"mass":-1,"dragpercool":0.5},{"name":"Intake","era":"Roaring 20s","cost":3,"cooling":2,"dragpercool":0.5}],"radiator-mount":[{"name":"Low","era":"Pioneer","warning":"Low Warning","reliability":1},{"name":"Inline","era":"Pioneer"},{"name":"High","era":"Pioneer","warning":"High Warning","drag":1}],"radiator-coolant":[{"name":"Water","era":"Pioneer","harden":false,"flammable":false},{"name":"Salt Water","era":"Pioneer","cost":1,"harden":true,"reliability":1,"flammable":false},{"name":"Mineral Oil","era":"Pioneer","warning":"Mineral Oil Warning","cost":1,"harden":true,"flammable":true},{"name":"Castor Oil","era":"Pioneer","warning":"Castor Oil Warning","cost":0,"harden":false,"flammable":true},{"name":"Glycol","era":"Roaring 20s","reliability":2,"harden":false,"cost":2,"flammable":false},{"name":"Freon","era":"Coming Storm","warning":"Freon Warning","reliability":4,"harden":false,"cost":3,"flammable":false},{"name":"Ammonia","era":"Pioneer","warning":"Ammonia Warning","reliability":4,"harden":false,"cost":2,"flammable":false}],"cowling":[{"name":"No Cowling","era":"Pioneer","ed":1,"mpd":0,"air":true,"liquid":true,"rotary":true},{"name":"Basic Cowl","era":"Pioneer","mass":1,"cost":1,"ed":0.8,"mpd":0,"air":true,"liquid":false,"rotary":false},{"name":"Rotary Basic Cowl","era":"Pioneer","mass":1,"cost":1,"ed":0.4,"mpd":0,"air":false,"liquid":false,"rotary":true},{"name":"Closed Cowl","era":"WWI","mass":1,"cost":1,"reliability":-1,"ed":0.3,"mpd":0,"air":false,"liquid":false,"rotary":true},{"name":"Adjustable Slat Cowl","era":"Coming Storm","mass":2,"reliability":2,"cost":2,"ed":0.5,"mpd":0,"air":true,"liquid":false,"rotary":true},{"name":"Foil Cowl","era":"Roaring 20s","mass":2,"reliability":3,"cost":3,"ed":0.4,"mpd":0,"air":true,"liquid":false,"rotary":true},{"name":"Sealed Cowl","era":"Pioneer","cost":1,"ed":0.5,"mpd":0.333333333333,"air":false,"liquid":true,"rotary":false}]},"frames":{"frames":[{"name":"Wooden Spars","era":"Pioneer","basestructure":15,"basecost":0,"mass":1,"structure":2,"geodesic":false},{"name":"Steel Spars","era":"Pioneer","basestructure":25,"basecost":1,"mass":1,"structure":5,"cost":1,"geodesic":false},{"name":"Aluminum Spars","era":"WWI","basestructure":20,"basecost":2,"mass":0.5,"structure":4,"cost":2,"geodesic":false},{"name":"Wooden Ribs","era":"WWI","basestructure":30,"basecost":1,"mass":2,"structure":5,"cost":0.5,"geodesic":true},{"name":"Steel Ribs","era":"Roaring 20s","basestructure":60,"basecost":2,"mass":3,"structure":12,"cost":2,"geodesic":true},{"name":"Aluminum Ribs","era":"Roaring 20s","basestructure":50,"basecost":3,"mass":2,"structure":8,"cost":3,"geodesic":true},{"name":"Titanium","era":"Last Hurrah","basestructure":0,"basecost":0,"mass":1,"structure":10,"cost":8,"geodesic":false},{"name":"Living Grove","era":"Pioneer","basestructure":30,"basecost":8,"mass":2,"structure":4,"cost":0,"geodesic":true,"warning":"Living Grove Warning"}],"skin":[{"name":"Naked","era":"Pioneer","dragfactor":1,"massfactor":0.6,"visibility":1,"flammable":false,"monocoque":false,"monocoque_structure":0},{"name":"Cloth Canvas","era":"Pioneer","dragfactor":0.5,"massfactor":1,"flammable":false,"monocoque":false,"monocoque_structure":0},{"name":"Transparent Celluloid","era":"Pioneer","dragfactor":0.6,"massfactor":1,"visibility":1,"cost":1,"flammable":true,"monocoque":false,"monocoque_structure":0},{"name":"Treated Paper","era":"Pioneer","dragfactor":0.5,"massfactor":0.75,"flammable":true,"monocoque":false,"monocoque_structure":0},{"name":"Tense Silk","era":"Pioneer","dragfactor":0.5,"massfactor":1,"toughness":1,"cost":1,"flammable":false,"monocoque":false,"monocoque_structure":0},{"name":"Dragon Skin","era":"Himmilgard","dragfactor":0.5,"massfactor":1,"cost":4,"flammable":false,"monocoque":false,"monocoque_structure":0},{"name":"Molded Plywood","era":"Pioneer","dragfactor":0.4,"massfactor":1,"cost":0.5,"flammable":false,"monocoque":true,"monocoque_structure":3},{"name":"Clinker Build","era":"Pioneer","dragfactor":0.5,"massfactor":1,"flammable":false,"monocoque":true,"monocoque_structure":-3},{"name":"Glass Reinforced Plastic","era":"Last Hurrah","dragfactor":0.3,"massfactor":1,"cost":1,"flammable":false,"monocoque":true,"monocoque_structure":0},{"name":"Corrugated Duralumin","era":"WWI","dragfactor":0.5,"massfactor":1,"toughness":3,"cost":1,"flammable":false,"monocoque":true,"monocoque_structure":10},{"name":"Steel Sheet","era":"Roaring 20s","dragfactor":0.35,"massfactor":1,"cost":1.5,"toughness":3,"flammable":false,"monocoque":true,"monocoque_structure":8},{"name":"Aluminum Sheet","era":"Roaring 20s","dragfactor":0.35,"massfactor":0.75,"cost":2,"toughness":2,"flammable":false,"monocoque":true,"monocoque_structure":6}],"tail":[{"name":"Tailless","era":"Pioneer","pitchstab":-4,"visibility":3},{"name":"Stubby","era":"Pioneer","reqsections":1,"pitchstab":-3},{"name":"Standard","era":"Pioneer","reqsections":2},{"name":"Long","era":"Pioneer","reqsections":3,"pitchstab":3}]},"stabilizers":{"hstab":[{"name":"Tailplane","era":"Pioneer","dragfactor":1,"is_canard":false,"increment":1,"is_vtail":false,"is_tail":true},{"name":"The Rotors","era":"Pioneer","dragfactor":0,"is_canard":false,"increment":0,"is_vtail":false,"is_tail":false}],"vstab":[{"name":"The Rotors","era":"Pioneer","dragfactor":0,"control":0,"increment":0,"is_vtail":false,"is_tail":false}]},"reinforcement":{"external_wood":[],"external_steel":[],"cabane":[{"name":"None","era":"Pioneer","tension":0,"config":false}],"cantilever":[{"name":"Birch","era":"WWI","mass":1,"maxstrain":10,"toughness":2,"cost":1,"limited":true},{"name":"Duralumin","era":"WWI","mass":1,"maxstrain":15,"toughness":3,"cost":2,"limited":true},{"name":"Steel","era":"WWI","mass":1,"maxstrain":20,"toughness":5,"cost":3,"limited":true},{"name":"Aluminium","era":"Roaring 20s","mass":1,"maxstrain":25,"toughness":3,"cost":4,"limited":true},{"name":"Whalebone","era":"Himmilgard","mass":1,"liftbleed":-3,"maxstrain":5,"cost":8,"limited":true}]},"fuel":{"tanks":[{"name":"Internal Fuselage Tank","era":"Pioneer","mass":1,"wetmass":5,"fuel":125,"reqsections":0.5,"internal":true,"cantilever":false},{"name":"Microtank","era":"Pioneer","mass":1,"fuel":25,"internal":true,"cantilever":false}]},"cargo":{"spaces":[{"name":"None","era":"Pioneer"},{"name":"Tiny","era":"Pioneer","mass":1,"warning":"Cargo Tiny"},{"name":"Small","era":"Pioneer","reqsections":1,"warning":"Cargo Small"},{"name":"Medium","era":"Pioneer","reqsections":3,"warning":"Cargo Medium"},{"name":"Large","era":"Pioneer","reqsections":5,"warning":"Cargo Large"},{"name":"Huge","era":"Pioneer","reqsections":10,"warning":"Cargo Huge"}]},"landing_gear":{"gear":[{"name":"Landing Gear","era":"Pioneer","DpLMP":1,"SpLMP":0,"can_retract":true},{"name":"Floats","era":"Pioneer","DpLMP":1.5,"SpLMP":0,"can_retract":true},{"name":"Hybrid Floats","era":"Pioneer","DpLMP":2,"SpLMP":0,"can_retract":true},{"name":"Boat Hull","era":"Pioneer","mass":5,"DpLMP":1,"SpLMP":1,"can_retract":false},{"name":"Landing Skid","era":"Pioneer","DpLMP":0,"SpLMP":0,"can_retract":false}],"extras":[{"name":"Carrier Hook","era":"Pioneer","MpLMP":0.5,"warning":"Carrier Hook Warning"}]},"accessories":{"electrical":[{"name":"Windmill","era":"Pioneer","drag":1,"cost":1,"cp10s":1,"storage":0},{"name":"Battery","era":"Pioneer","mass":1,"cost":2,"cp10s":0,"storage":5},{"name":"Battery (High Quality)","era":"Roaring 20s","mass":0,"cost":4,"cp10s":0,"storage":5}],"radios":[{"name":"Loud Yelling","era":"Pioneer"},{"name":"Intercom System","era":"Pioneer","charge":1e-9,"cost":1},{"name":"Radio Receiver","era":"Pioneer","mass":2,"drag":2,"charge":1e-9,"cost":3},{"name":"Radio Transmitter","era":"WWI","mass":3,"drag":3,"charge":1e-9,"cost":3},{"name":"Radio Transceiver","era":"WWI","mass":5,"drag":3,"charge":1e-9,"cost":3},{"name":"Whalebone Radio Receiver","era":"Himmilgard","charge":1e-9,"cost":5},{"name":"Whalebone Radio Base Station","era":"Himmilgard","mass":6,"drag":1,"charge":1e-9,"cost":12},{"name":"Radio Receiver (High Quality)","era":"Roaring 20s","mass":1,"drag":2,"charge":1e-9,"cost":6},{"name":"Radio Transmitter (High Quality)","era":"Roaring 20s","mass":2,"drag":3,"charge":1e-9,"cost":6},{"name":"Radio Transceiver (High Quality)","era":"Roaring 20s","mass":4,"drag":3,"charge":1e-9,"cost":6},{"name":"Whalebone Radio Base Station (High Quality)","era":"Himmilgard","mass":5,"drag":1,"charge":1e-9,"cost":24}],"recon":[{"name":"Guncam","era":"Pioneer","cost":1,"warning":"Guncam Warning"},{"name":"Small Reconnaissance Camera","era":"Pioneer","mass":1,"drag":1,"cost":2,"warning":"Small Reconnaissance Camera Warning"},{"name":"Medium Reconnaissance Camera","era":"Pioneer","mass":2,"drag":2,"cost":2,"warning":"Medium Reconnaissance Camera Warning"},{"name":"Large Reconnaissance Camera","era":"Pioneer","mass":3,"drag":3,"cost":2,"warning":"Large Reconnaissance Camera Warning"},{"name":"Internal Small Reconnaissance Camera","era":"Pioneer","mass":1,"cost":4,"warning":"Small Reconnaissance Camera Warning"},{"name":"Internal Medium Reconnaissance Camera","era":"Pioneer","mass":2,"cost":2,"reqsections":1,"warning":"Medium Reconnaissance Camera Warning"},{"name":"Internal Large Reconnaissance Camera","era":"Pioneer","mass":3,"cost":2,"reqsections":1,"warning":"Large Reconnaissance Camera Warning"}],"visibility":[{"name":"Hull Cutouts","era":"Pioneer","visibility":1,"structure":-5},{"name":"Searchlight","era":"Pioneer","charge":1e-9,"cost":1}],"climate":[{"name":"Electric Heating","era":"Pioneer","charge":-1,"cost":1,"req_radiator":false},{"name":"Radiator Loop","era":"Pioneer","cost":1,"req_radiator":true},{"name":"Air Conditioning","era":"Pioneer","charge":-2,"cost":4,"req_radiator":false}],"autopilots":[{"name":"None","era":"Pioneer"},{"name":"Gyroscopic","era":"WWI","cost":3,"warning":"Gyroscopic Warning"},{"name":"Altitude Holding","era":"Coming Storm","mass":1,"cost":5,"warning":"Altitude Holding Warning"},{"name":"Clockwork Programmable","era":"Himmilgard","mass":1,"cost":6,"warning":"Clockwork Programmable Warning"},{"name":"Programmable","era":"WWII","mass":1,"charge":-2,"cost":6,"warning":"Programmable Warning"},{"name":"Rattenhirn","era":"Himmilgard","mass":3,"charge":-3,"cost":25,"warning":"Rattenhirn Warning"}],"control":[{"name":"None","era":"Pioneer","max_mass_stress":1000,"max_total_stress":1000},{"name":"Control Rods","era":"WWI","mass":1,"cost":2,"max_mass_stress":1,"max_total_stress":1000},{"name":"Hydraulic-Assisted","era":"WWII","mass":3,"cost":5,"max_mass_stress":0,"max_total_stress":1000},{"name":"Fly by Wire","era":"Last Hurrah","mass":3,"cost":10,"max_mass_stress":0,"max_total_stress":0}]},"rotor":{"blade_count":[{"name":"Two","sizing":1.05,"flightstress":1,"rotor_bleed":0},{"name":"Three","sizing":1,"cost":2,"rotor_bleed":1},{"name":"Four","sizing":0.95,"cost":4,"rotor_bleed":2},{"name":"Five","sizing":0.9,"cost":6,"rotor_bleed":3}],"arrangement":[{"name":"Single Rotor","count":1,"powerfactor":1,"blades":0},{"name":"Coaxial","count":2,"cost":2,"reliability":-1,"powerfactor":1,"blades":0},{"name":"Synchropter","count":2,"cost":-2,"powerfactor":0.95,"blades":0},{"name":"Tandem","count":2,"pitchstab":4,"powerfactor":1,"blades":0},{"name":"Transverse","count":2,"latstab":4,"powerfactor":1,"blades":0},{"name":"Tandem Transverse","count":3,"pitchstab":4,"latstab":4,"powerfactor":1,"blades":0}]},"propellers":{"props":[{"name":"Default","era":"Pioneer","pitchspeed":1,"pitchboost":0.6,"energy":3,"turn":6}],"upgrades":[{"name":"None","era":"Pioneer","energy":0,"turn":0}]}}');var oe=a.t(re,2);function le(){he(),de().hash&&(Re.forEach(ce),Ce?.observe(document,Ee),pe(),Ge=setTimeout(he,Pe))}function he(){clearTimeout(Ge),cancelAnimationFrame(ve),Ce?.disconnect(),Re.forEach(ue)}function ce(t){document.addEventListener(t,he)}function ue(t){document.removeEventListener(t,he)}function _e(t){if(t.defaultPrevented)return;const e=function(t){let e=t;for(;e&&"A"!==e.nodeName;)e=e.parentElement;return e}(t.target);e&&e.hash&&e.pathname===de().pathname&&ye(le)}function me(){ye(pe)}function pe(){const t=de().hash;if(!t)return;const e=decodeURIComponent(t.substring(1)),s=be.call(null,e);s&&Se.call(null,s)}function de(){return location}function ge(t){return document.getElementById(t)}function fe(t){t.scrollIntoView()}function ye(t){cancelAnimationFrame(ve),ve=requestAnimationFrame(t)}let be,Se,we,Ce,Ge,ve;const Ee={attributes:!0,characterData:!0,childList:!0,subtree:!0},Pe=1e4,Re=["selectstart","touchend","wheel"];window.addEventListener("DOMContentLoaded",(()=>{const t=new URLSearchParams(location.search);var e=t.get("json"),s=t.get("lang");s?M.SetCurrentLanguage(s):window.localStorage.language&&M.SetCurrentLanguage(window.localStorage.language);let i=window.localStorage.getItem("test.helicopter");!function(t){for(const t of et.l)if(it.has(t.name)||it.set(t.name,new st(t.name)),"Custom"!=t.name){it.get(t.name).fromJSON(t,!0),it.get(t.name).SetConstant();for(let e=0;e<it.get(t.name).length;e++){const s=it.get(t.name).get(e);it.get("Custom").remove(s)}}else it.get(t.name).fromJSON(t,!1);for(const e of JSON.parse(t))if(it.has(e)||it.set(e,new st(e)),"Custom"!=e)for(let t=0;t<it.get(e).length;t++){const s=it.get(e).get(t);it.get("Custom").remove(s)}}(window.localStorage.getItem("test.engines_names")),xe=new ie(oe,!0),Ie=new ne(oe,xe);var a=!1;if(e&&!a){console.log("Used Query Parameter");var n=!1;try{var r=function(t){const e=new Uint8Array(t.length);for(let s=0;s<t.length;s++)e[s]=t.charCodeAt(s);return e.buffer}(ae.decompressFromEncodedURIComponent(e)),o=new B(r);o.version<12.25&&o.CheckLastNum()==gt.AIRPLANE&&(n=!0),xe.deserialize(o),a=!0}catch(t){console.log("Compressed Query Parameter Failed."),console.log(t),xe.Reset(),n&&(window.history.replaceState(null,null,"/PlaneBuilder/index.html?json="+e),window.history.go())}}if(i&&!a){console.log("Used Saved Data");try{a=xe.fromJSON(JSON.parse(i))}catch{console.log("Saved Data Failed."),xe.Reset()}}xe.CalculateStats(),v=!0,window.addEventListener("load",(()=>{(function(t={}){he(),removeEventListener("click",_e),we&&we(),we=void 0,Ce=void 0,be=t.getElement||ge,Se=t.scrollIntoView||fe,Ce=new MutationObserver(me),addEventListener("click",_e),we=void 0,le()})(),setTimeout((()=>{window.onscroll=function(t,e){let s;return function(){clearTimeout(s),s=setTimeout(t,250)}}(Ae)}),1e3)}));var l=document.getElementsByClassName("collapsible");for(let t=0;t<l.length;t++)l[t].addEventListener("click",(function(){var t=this.classList.toggle("active"),e=this.nextElementSibling;(e=e.nextElementSibling).style.maxHeight=t?"inherit":"0px"}));Ie.SetCollapse()}));var xe,Ie,Me="";function Ae(t){const e=["Era","Cockpit","Passengers","Engines","Frames","Tail","Wings","Rotors","Stabilizers","ControlSurfaces","Reinforcements","Weapons","Load","Landing_Gear","Accessories","Optimization","Stats","Flight"];var s="",i=window.pageYOffset;for(let t of e)if(0!=document.getElementById(t).offsetTop){if(!(i>document.getElementById(t).offsetTop))break;s=t}Me!=s&&(Me=s,window.history.replaceState(null,null,"index.html#"+s))}})();